"use strict";(self.webpackChunkstrapi=self.webpackChunkstrapi||[]).push([[5895],{34759:(ne,R,a)=>{a.r(R),a.d(R,{SettingsPage:()=>je,default:()=>et});var e=a(53547),E=a(68547),s=a(49656),Z=a(35395),X=a(97132),De=a(15482),Le=a(32104),me=a(58836),Ve=a(80117),z=a(94117),j=a(39272),S=a(33483),he=a(9524),ge=a(10407),Q=a(74657),J=a.n(Q);const qe=()=>{const{formatMessage:f}=(0,X.useIntl)();(0,E.useFocusWhenNavigate)();const g=(0,E.useAppInfos)(),{shouldUpdateStrapi:h,latestStrapiReleaseTag:y,strapiVersion:u}=g,m=g.communityEdition?"app.components.UpgradePlanModal.text-ce":"app.components.UpgradePlanModal.text-ee";return e.createElement(Z.Layout,null,e.createElement(E.SettingsPageTitle,{name:"Application"}),e.createElement(Ve.Main,null,e.createElement(Z.HeaderLayout,{title:f({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:f({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"})}),e.createElement(Z.ContentLayout,null,e.createElement(z.Box,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:7,paddingBottom:7,paddingRight:6,paddingLeft:6},e.createElement(he.Stack,{spacing:5},e.createElement(S.Typography,{variant:"delta",as:"h3"},f({id:"global.details",defaultMessage:"Details"})),e.createElement(j.Grid,{paddingTop:1},e.createElement(j.GridItem,{col:6,s:12},e.createElement(S.Typography,{variant:"sigma",textColor:"neutral600"},f({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})),e.createElement(S.Typography,{as:"p"},"v",u),e.createElement(ge.Link,{href:g.communityEdition?"https://discord.strapi.io":"https://support.strapi.io/support/home",isExternal:!0,endIcon:e.createElement(J(),null)},f({id:"Settings.application.get-help",defaultMessage:"Get help"}))),e.createElement(j.GridItem,{col:6,s:12},e.createElement(S.Typography,{variant:"sigma",textColor:"neutral600"},f({id:"Settings.application.edition-title",defaultMessage:"current plan"})),e.createElement(S.Typography,{as:"p"},f({id:m,defaultMessage:`${g.communityEdition?"Community Edition":"Enterprise Edition"}`})))),e.createElement(j.Grid,{paddingTop:1},e.createElement(j.GridItem,{col:6,s:12},h&&e.createElement(ge.Link,{href:`https://github.com/strapi/strapi/releases/tag/${y}`,isExternal:!0,endIcon:e.createElement(J(),null)},f({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"}))),e.createElement(j.GridItem,{col:6,s:12},e.createElement(ge.Link,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:e.createElement(J(),null)},f({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})))),e.createElement(z.Box,{paddingTop:1},e.createElement(S.Typography,{variant:"sigma",textColor:"neutral600"},f({id:"Settings.application.node-version",defaultMessage:"node version"})),e.createElement(S.Typography,{as:"p"},g.nodeVersion)))))))};var ke=a(94654),Ee=a.n(ke);const Xe=f=>Ee()(f,h=>h.links).map(h=>(0,me.ot)(h.Component,h.to,h.exact||!1)),Ge=f=>f.filter(g=>!g.links.every(h=>h.isDisplayed===!1));var Fe=a(42982),oe=a(71002),V=a(15861);function w(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */w=function(){return f};var f={},g=Object.prototype,h=g.hasOwnProperty,y=typeof Symbol=="function"?Symbol:{},u=y.iterator||"@@iterator",m=y.asyncIterator||"@@asyncIterator",Y=y.toStringTag||"@@toStringTag";function le(v,d,P){return Object.defineProperty(v,d,{value:P,enumerable:!0,configurable:!0,writable:!0}),v[d]}try{le({},"")}catch(v){le=function(P,A,D){return P[A]=D}}function G(v,d,P,A){var D=d&&d.prototype instanceof yt?d:yt,N=Object.create(D.prototype),ue=new Et(A||[]);return N._invoke=function(Ye,Pe,q){var Te="suspendedStart";return function(Qe,At){if(Te==="executing")throw new Error("Generator is already running");if(Te==="completed"){if(Qe==="throw")throw At;return Pt()}for(q.method=Qe,q.arg=At;;){var Dt=q.delegate;if(Dt){var nt=Ct(Dt,q);if(nt){if(nt===U)continue;return nt}}if(q.method==="next")q.sent=q._sent=q.arg;else if(q.method==="throw"){if(Te==="suspendedStart")throw Te="completed",q.arg;q.dispatchException(q.arg)}else q.method==="return"&&q.abrupt("return",q.arg);Te="executing";var gt=ce(Ye,Pe,q);if(gt.type==="normal"){if(Te=q.done?"completed":"suspendedYield",gt.arg===U)continue;return{value:gt.arg,done:q.done}}gt.type==="throw"&&(Te="completed",q.method="throw",q.arg=gt.arg)}}}(v,P,ue),N}function ce(v,d,P){try{return{type:"normal",arg:v.call(d,P)}}catch(A){return{type:"throw",arg:A}}}f.wrap=G;var U={};function yt(){}function ct(){}function tt(){}var ut={};le(ut,u,function(){return this});var dt=Object.getPrototypeOf,rt=dt&&dt(dt(bt([])));rt&&rt!==g&&h.call(rt,u)&&(ut=rt);var st=tt.prototype=yt.prototype=Object.create(ut);function pt(v){["next","throw","return"].forEach(function(d){le(v,d,function(P){return this._invoke(d,P)})})}function vt(v,d){function P(D,N,ue,Ye){var Pe=ce(v[D],v,N);if(Pe.type!=="throw"){var q=Pe.arg,Te=q.value;return Te&&(0,oe.Z)(Te)=="object"&&h.call(Te,"__await")?d.resolve(Te.__await).then(function(Qe){P("next",Qe,ue,Ye)},function(Qe){P("throw",Qe,ue,Ye)}):d.resolve(Te).then(function(Qe){q.value=Qe,ue(q)},function(Qe){return P("throw",Qe,ue,Ye)})}Ye(Pe.arg)}var A;this._invoke=function(D,N){function ue(){return new d(function(Ye,Pe){P(D,N,Ye,Pe)})}return A=A?A.then(ue,ue):ue()}}function Ct(v,d){var P=v.iterator[d.method];if(P===void 0){if(d.delegate=null,d.method==="throw"){if(v.iterator.return&&(d.method="return",d.arg=void 0,Ct(v,d),d.method==="throw"))return U;d.method="throw",d.arg=new TypeError("The iterator does not provide a 'throw' method")}return U}var A=ce(P,v.iterator,d.arg);if(A.type==="throw")return d.method="throw",d.arg=A.arg,d.delegate=null,U;var D=A.arg;return D?D.done?(d[v.resultName]=D.value,d.next=v.nextLoc,d.method!=="return"&&(d.method="next",d.arg=void 0),d.delegate=null,U):D:(d.method="throw",d.arg=new TypeError("iterator result is not an object"),d.delegate=null,U)}function Rt(v){var d={tryLoc:v[0]};1 in v&&(d.catchLoc=v[1]),2 in v&&(d.finallyLoc=v[2],d.afterLoc=v[3]),this.tryEntries.push(d)}function mt(v){var d=v.completion||{};d.type="normal",delete d.arg,v.completion=d}function Et(v){this.tryEntries=[{tryLoc:"root"}],v.forEach(Rt,this),this.reset(!0)}function bt(v){if(v){var d=v[u];if(d)return d.call(v);if(typeof v.next=="function")return v;if(!isNaN(v.length)){var P=-1,A=function D(){for(;++P<v.length;)if(h.call(v,P))return D.value=v[P],D.done=!1,D;return D.value=void 0,D.done=!0,D};return A.next=A}}return{next:Pt}}function Pt(){return{value:void 0,done:!0}}return ct.prototype=tt,le(st,"constructor",tt),le(tt,"constructor",ct),ct.displayName=le(tt,Y,"GeneratorFunction"),f.isGeneratorFunction=function(v){var d=typeof v=="function"&&v.constructor;return!!d&&(d===ct||(d.displayName||d.name)==="GeneratorFunction")},f.mark=function(v){return Object.setPrototypeOf?Object.setPrototypeOf(v,tt):(v.__proto__=tt,le(v,Y,"GeneratorFunction")),v.prototype=Object.create(st),v},f.awrap=function(v){return{__await:v}},pt(vt.prototype),le(vt.prototype,m,function(){return this}),f.AsyncIterator=vt,f.async=function(v,d,P,A,D){D===void 0&&(D=Promise);var N=new vt(G(v,d,P,A),D);return f.isGeneratorFunction(d)?N:N.next().then(function(ue){return ue.done?ue.value:N.next()})},pt(st),le(st,Y,"Generator"),le(st,u,function(){return this}),le(st,"toString",function(){return"[object Generator]"}),f.keys=function(v){var d=[];for(var P in v)d.push(P);return d.reverse(),function A(){for(;d.length;){var D=d.pop();if(D in v)return A.value=D,A.done=!1,A}return A.done=!0,A}},f.values=bt,Et.prototype={constructor:Et,reset:function(d){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(mt),!d)for(var P in this)P.charAt(0)==="t"&&h.call(this,P)&&!isNaN(+P.slice(1))&&(this[P]=void 0)},stop:function(){this.done=!0;var d=this.tryEntries[0].completion;if(d.type==="throw")throw d.arg;return this.rval},dispatchException:function(d){if(this.done)throw d;var P=this;function A(q,Te){return ue.type="throw",ue.arg=d,P.next=q,Te&&(P.method="next",P.arg=void 0),!!Te}for(var D=this.tryEntries.length-1;D>=0;--D){var N=this.tryEntries[D],ue=N.completion;if(N.tryLoc==="root")return A("end");if(N.tryLoc<=this.prev){var Ye=h.call(N,"catchLoc"),Pe=h.call(N,"finallyLoc");if(Ye&&Pe){if(this.prev<N.catchLoc)return A(N.catchLoc,!0);if(this.prev<N.finallyLoc)return A(N.finallyLoc)}else if(Ye){if(this.prev<N.catchLoc)return A(N.catchLoc,!0)}else{if(!Pe)throw new Error("try statement without catch or finally");if(this.prev<N.finallyLoc)return A(N.finallyLoc)}}}},abrupt:function(d,P){for(var A=this.tryEntries.length-1;A>=0;--A){var D=this.tryEntries[A];if(D.tryLoc<=this.prev&&h.call(D,"finallyLoc")&&this.prev<D.finallyLoc){var N=D;break}}N&&(d==="break"||d==="continue")&&N.tryLoc<=P&&P<=N.finallyLoc&&(N=null);var ue=N?N.completion:{};return ue.type=d,ue.arg=P,N?(this.method="next",this.next=N.finallyLoc,U):this.complete(ue)},complete:function(d,P){if(d.type==="throw")throw d.arg;return d.type==="break"||d.type==="continue"?this.next=d.arg:d.type==="return"?(this.rval=this.arg=d.arg,this.method="return",this.next="end"):d.type==="normal"&&P&&(this.next=P),U},finish:function(d){for(var P=this.tryEntries.length-1;P>=0;--P){var A=this.tryEntries[P];if(A.finallyLoc===d)return this.complete(A.completion,A.afterLoc),mt(A),U}},catch:function(d){for(var P=this.tryEntries.length-1;P>=0;--P){var A=this.tryEntries[P];if(A.tryLoc===d){var D=A.completion;if(D.type==="throw"){var N=D.arg;mt(A)}return N}}throw new Error("illegal catch attempt")},delegateYield:function(d,P,A){return this.delegate={iterator:bt(d),resultName:P,nextLoc:A},this.method==="next"&&(this.arg=void 0),U}},f}var Ue=function(){return window&&window.strapi&&window.strapi.isEE?a(18290).Z:a(56368).Z}(),ze=function(){return window&&window.strapi&&window.strapi.isEE?a(28099).Z:a(73044).Z}(),Ke=[{Component:function(){return{default:ze}},to:"/settings/roles",exact:!0},{Component:function(){return{default:Ue}},to:"/settings/roles/duplicate/:id",exact:!0},{Component:function(){return{default:Ue}},to:"/settings/roles/new",exact:!0},{Component:function(){var f=(0,V.Z)(w().mark(function h(){var y;return w().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,a.e(2544).then(a.bind(a,50287));case 2:return y=m.sent,m.abrupt("return",y);case 4:case"end":return m.stop()}},h)}));function g(){return f.apply(this,arguments)}return g}(),to:"/settings/roles/:id",exact:!0},{Component:function(){var f=(0,V.Z)(w().mark(function h(){var y;return w().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,a.e(5199).then(a.bind(a,61322));case 2:return y=m.sent,m.abrupt("return",y);case 4:case"end":return m.stop()}},h)}));function g(){return f.apply(this,arguments)}return g}(),to:"/settings/users",exact:!0},{Component:function(){var f=(0,V.Z)(w().mark(function h(){var y;return w().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,a.e(4263).then(a.bind(a,86294));case 2:return y=m.sent,m.abrupt("return",y);case 4:case"end":return m.stop()}},h)}));function g(){return f.apply(this,arguments)}return g}(),to:"/settings/users/:id",exact:!0},{Component:function(){var f=(0,V.Z)(w().mark(function h(){var y;return w().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Promise.all([a.e(8252),a.e(5162)]).then(a.bind(a,2937));case 2:return y=m.sent,m.abrupt("return",y);case 4:case"end":return m.stop()}},h)}));function g(){return f.apply(this,arguments)}return g}(),to:"/settings/webhooks/create",exact:!0},{Component:function(){var f=(0,V.Z)(w().mark(function h(){var y;return w().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Promise.all([a.e(8252),a.e(5162)]).then(a.bind(a,27103));case 2:return y=m.sent,m.abrupt("return",y);case 4:case"end":return m.stop()}},h)}));function g(){return f.apply(this,arguments)}return g}(),to:"/settings/webhooks/:id",exact:!0},{Component:function(){var f=(0,V.Z)(w().mark(function h(){var y;return w().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,a.e(4121).then(a.bind(a,77967));case 2:return y=m.sent,m.abrupt("return",y);case 4:case"end":return m.stop()}},h)}));function g(){return f.apply(this,arguments)}return g}(),to:"/settings/webhooks",exact:!0},{Component:function(){var f=(0,V.Z)(w().mark(function h(){var y;return w().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,a.e(8056).then(a.bind(a,81666));case 2:return y=m.sent,m.abrupt("return",y);case 4:case"end":return m.stop()}},h)}));function g(){return f.apply(this,arguments)}return g}(),to:"/settings/api-tokens",exact:!0},{Component:function(){var f=(0,V.Z)(w().mark(function h(){var y;return w().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,a.e(4299).then(a.bind(a,1424));case 2:return y=m.sent,m.abrupt("return",y);case 4:case"end":return m.stop()}},h)}));function g(){return f.apply(this,arguments)}return g}(),to:"/settings/api-tokens/create",exact:!0},{Component:function(){var f=(0,V.Z)(w().mark(function h(){var y;return w().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,a.e(92).then(a.bind(a,51037));case 2:return y=m.sent,m.abrupt("return",y);case 4:case"end":return m.stop()}},h)}));function g(){return f.apply(this,arguments)}return g}(),to:"/settings/api-tokens/:id",exact:!0}];const Be=Ke;var We=function(){return window&&window.strapi&&window.strapi.isEE?a(49475).Z:a(73258).Z}();const He=[].concat((0,Fe.Z)(We),(0,Fe.Z)(Be));var _e=a(45697),re=a.n(_e),L=a(95431),ae=Object.defineProperty,x=Object.defineProperties,fe=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,W=(f,g,h)=>g in f?ae(f,g,{enumerable:!0,configurable:!0,writable:!0,value:h}):f[g]=h,$=(f,g)=>{for(var h in g||(g={}))ee.call(g,h)&&W(f,h,g[h]);if(se)for(var h of se(g))ie.call(g,h)&&W(f,h,g[h]);return f},te=(f,g)=>x(f,fe(g));const xe=({menu:f})=>{const{formatMessage:g}=(0,X.useIntl)(),y=Ge(f).map(m=>te($({},m),{title:m.intlLabel,links:m.links.map(Y=>te($({},Y),{title:Y.intlLabel,name:Y.id}))})),u=g({id:"global.settings",defaultMessage:"Settings"});return e.createElement(L.SubNav,{ariaLabel:u},e.createElement(L.SubNavHeader,{label:u}),e.createElement(L.SubNavSections,null,y.map(m=>e.createElement(L.SubNavSection,{key:m.id,label:g(m.intlLabel)},m.links.map(Y=>e.createElement(L.SubNavLink,{as:s.NavLink,withBullet:Y.hasNotification,to:Y.to,key:Y.id},g(Y.intlLabel)))))))};xe.propTypes={menu:re().array.isRequired};const $e=xe;function je(){const{settingId:f}=(0,s.useParams)(),{settings:g}=(0,E.useStrapiApp)(),{formatMessage:h}=(0,X.useIntl)(),{isLoading:y,menu:u}=(0,Le.Te)(),m=(0,e.useMemo)(()=>(0,me.WW)(He.map(({to:G,Component:ce,exact:U})=>(0,me.ot)(ce,G,U))),[]),Y=Xe(g);if(y)return e.createElement(E.LoadingIndicatorPage,null);if(!f)return e.createElement(s.Redirect,{to:"/settings/application-infos"});const le=h({id:"global.settings",defaultMessage:"Settings"});return e.createElement(Z.Layout,{sideNav:e.createElement($e,{menu:u})},e.createElement(De.Helmet,{title:le}),e.createElement(s.Switch,null,e.createElement(s.Route,{path:"/settings/application-infos",component:qe,exact:!0}),m,Y))}const et=(0,e.memo)(je)},56368:(ne,R,a)=>{a.d(R,{Z:()=>Z});var e=a(53547),E=a(49656);const Z=()=>e.createElement(E.Redirect,{to:"/404"})},14934:(ne,R,a)=>{a.d(R,{Z:()=>E});const E=!0},48496:(ne,R,a)=>{a.d(R,{Z:()=>E});const E=!0},93485:(ne,R,a)=>{a.d(R,{Z:()=>E});const E=!0},55632:(ne,R,a)=>{a.d(R,{Z:()=>E});const E=!0},39672:(ne,R,a)=>{a.d(R,{Z:()=>E});const E=!0},79160:(ne,R,a)=>{a.d(R,{Z:()=>Xa});var e=a(53547),E=a(45697),s=a.n(E),Z=a(68547),X=a(1738),De=a(18721),Le=a.n(De),me=a(41609),Ve=a.n(me),z=a(97132),j=a(94117),S=a(16384),he=a(89734),ge=a.n(he),Q=a(70885),J=a(32080),Je=a.n(J),qe=a(80499),ke=a.n(qe),Ee=a(46458),H=a(40264),Xe=a(27361),ye=a.n(Xe),Ge=a(57557),Fe=a.n(Ge),oe=a(32104),V=a(17581),w=a.n(V),Ue=a(64459);const ze=S.default.div`
  position: relative;

  ${({hasConditions:o,disabled:t,theme:n})=>o&&`
    &:before {
      content: '';
      position: absolute;
      top: -3px;
      left: -10px;
      width: 6px;
      height: 6px;
      border-radius: ${20/16}rem;;
      background: ${t?n.colors.neutral100:n.colors.primary600};
    }
  `}
`,Ke=({onClick:o,className:t,hasConditions:n,variant:r})=>{const{formatMessage:i}=(0,z.useIntl)();return e.createElement(ze,{hasConditions:n,className:t},e.createElement(Ue.Button,{variant:r,startIcon:e.createElement(w(),null),onClick:o},i({id:"global.settings",defaultMessage:"Settings"})))};Ke.defaultProps={className:null,hasConditions:!1,variant:"tertiary"},Ke.propTypes={onClick:s().func.isRequired,className:s().string,hasConditions:s().bool,variant:s().string};const Be=(0,S.default)(Ke)``;var We=a(97833),He=a(9524),_e=a(68991),re=a(44981),L=a(33483),ae=a(8041),x=a(7739),fe=a.n(x),se=a(11700),ee=a.n(se),ie=a(4942),W=a(42982),$=a(2632);const te=`${120/16}rem`,xe=`${200/16}rem`,$e=`${53/16}rem`;function je(o,t){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),n.push.apply(n,r)}return n}function et(o){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?je(Object(n),!0).forEach(function(r){(0,ie.Z)(o,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(n,r))})}return o}var f=function(){return window&&window.strapi&&window.strapi.isEE?a(15272).Z:a(14934).Z}(),g=(0,S.default)(H.Flex).withConfig({displayName:"ActionRow__FlexWrapper",componentId:"sc-1bqpgdl-0"})(["height:",";"],$e),h=function(t){var n=t.arrayOfOptionsGroupedByCategory,r=t.isFormDisabled,i=t.isGrey,l=t.label,c=t.name,p=t.onChange,C=t.value,b=(0,z.useIntl)(),T=b.formatMessage,I=n.reduce(function(F,B){var O=(0,Q.Z)(B,2),M=O[0],K=O[1],de={label:ee()(M),children:K.map(function(Se){return{label:Se.displayName,value:Se.id}})};return[].concat((0,W.Z)(F),[de])},[]),k=Object.values(C).map(function(F){return Object.entries(F).filter(function(B){var O=(0,Q.Z)(B,2),M=O[1];return M}).map(function(B){var O=(0,Q.Z)(B,1),M=O[0];return M})}).flat(),_=function(B){var O=(0,Q.Z)(n,1),M=(0,Q.Z)(O[0],2),K=M[1],de=K.reduce(function(Se,ve){return et((0,ie.Z)({},ve.id,B.includes(ve.id)),Se)},{});p(c,de)};return e.createElement(g,{as:"li",background:i?"neutral100":"neutral0"},e.createElement(H.Flex,{paddingLeft:6,style:{width:180}},e.createElement(L.Typography,{variant:"sigma",textColor:"neutral600"},T({id:"Settings.permissions.conditions.can",defaultMessage:"Can"}),"\xA0"),e.createElement(L.Typography,{variant:"sigma",title:l,textColor:"primary600",ellipsis:!0},T({id:"Settings.roles.form.permissions.".concat(l.toLowerCase()),defaultMessage:l})),e.createElement(L.Typography,{variant:"sigma",textColor:"neutral600"},"\xA0",T({id:"Settings.permissions.conditions.when",defaultMessage:"When"}))),e.createElement(j.Box,{style:{maxWidth:430,width:"100%"}},e.createElement($.MultiSelectNested,{id:c,customizeContent:function(B){return"".concat(B.length," currently selected")},onChange:_,value:k,options:I,disabled:r||f})))};h.propTypes={arrayOfOptionsGroupedByCategory:s().array.isRequired,isFormDisabled:s().bool.isRequired,isGrey:s().bool.isRequired,label:s().string.isRequired,name:s().string.isRequired,value:s().object.isRequired,onChange:s().func.isRequired};const y=h;var u=a(96486);const m=(o,t)=>o.reduce((n,r)=>(n[r.id]=(0,u.get)(t,r.id,!1),n),{}),Y=(o,t)=>o.reduce((n,r)=>{const[i,l]=r,c=m(l,t);return n[i]=c,n},{}),G=(o,t,n)=>o.reduce((r,i)=>{const l=(0,u.get)(t,[...i.pathToConditionsObject,"conditions"],{}),c=Y(n,l);return r[i.pathToConditionsObject.join("..")]=c,r},{});var ce=Object.defineProperty,U=Object.getOwnPropertySymbols,yt=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable,tt=(o,t,n)=>t in o?ce(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,ut=(o,t)=>{for(var n in t||(t={}))yt.call(t,n)&&tt(o,n,t[n]);if(U)for(var n of U(t))ct.call(t,n)&&tt(o,n,t[n]);return o};const dt=({actions:o,headerBreadCrumbs:t,isFormDisabled:n,onClosed:r,onToggle:i})=>{const{formatMessage:l}=(0,z.useIntl)(),{availableConditions:c,modifiedData:p,onChangeConditions:C}=(0,oe.$_)(),b=(0,e.useMemo)(()=>Object.entries(fe()(c,"category")),[c]),T=o.filter(({isDisplayed:O,hasSomeActionsSelected:M,hasAllActionsSelected:K})=>O&&(M||K)),I=(0,e.useMemo)(()=>G(T,p,b),[T,p,b]),[k,_]=(0,e.useState)(I),F=(O,M)=>{_((0,ae.default)(K=>{K[O]||(K[O]={}),K[O].default||(K[O].default={}),K[O].default=M}))},B=()=>{const O=Object.entries(k).reduce((M,K)=>{const[de,Se]=K,ve=Object.values(Se).reduce((Ae,Ie)=>ut(ut({},Ae),Ie),{});return M[de]=ve,M},{});C(O),i()};return e.createElement(_e.ModalLayout,{labelledBy:"condition-modal-breadcrumbs",onClose:r},e.createElement(_e.ModalHeader,null,e.createElement(re.Breadcrumbs,{id:"condition-modal-breadcrumbs",label:t.join(", ")},t.map(O=>e.createElement(re.Crumb,{key:O},ee()(l({id:O,defaultMessage:O})))))),e.createElement(j.Box,{padding:8},e.createElement(He.Stack,{spacing:6},e.createElement(L.Typography,{variant:"beta",as:"h2"},l({id:"Settings.permissions.conditions.define-conditions",defaultMessage:"Define conditions"})),e.createElement(j.Box,null,e.createElement(We.Divider,null)),e.createElement(j.Box,null,T.length===0&&e.createElement(L.Typography,null,l({id:"Settings.permissions.conditions.no-actions",defaultMessage:"You first need to select actions (create, read, update, ...) before defining conditions on them."})),e.createElement("ul",null,T.map(({actionId:O,label:M,pathToConditionsObject:K},de)=>{const Se=K.join("..");return e.createElement(y,{key:O,arrayOfOptionsGroupedByCategory:b,label:M,isFormDisabled:n,isGrey:de%2===0,name:Se,onChange:F,value:ye()(k,Se,{})})}))))),e.createElement(_e.ModalFooter,{startActions:e.createElement(Ue.Button,{variant:"tertiary",onClick:i},l({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(Ue.Button,{onClick:B},l({id:"Settings.permissions.conditions.apply",defaultMessage:"Apply"}))}))};dt.propTypes={actions:s().arrayOf(s().shape({actionId:s().string.isRequired,checkboxName:s().string,hasSomeActionsSelected:s().bool.isRequired,hasAllActionsSelected:s().bool,isDisplayed:s().bool.isRequired,label:s().string})).isRequired,headerBreadCrumbs:s().arrayOf(s().string).isRequired,isFormDisabled:s().bool.isRequired,onClosed:s().func.isRequired,onToggle:s().func.isRequired};const rt=dt,pt=S.default.div`
  width: ${te};
`,Ct=(0,S.default)(H.Flex)`
  padding-right: ${({theme:o})=>o.spaces[2]};
  overflow: hidden;
  flex: 1;
  ${({isCollapsable:o})=>o&&"cursor: pointer;"}
`;var Rt=Object.defineProperty,mt=Object.getOwnPropertySymbols,Et=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,Pt=(o,t,n)=>t in o?Rt(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,v=(o,t)=>{for(var n in t||(t={}))Et.call(t,n)&&Pt(o,n,t[n]);if(mt)for(var n of mt(t))bt.call(t,n)&&Pt(o,n,t[n]);return o};const d=({children:o,isCollapsable:t,isActive:n,isFormDisabled:r,label:i,onChange:l,onClick:c,checkboxName:p,someChecked:C,value:b})=>{const{formatMessage:T}=(0,z.useIntl)();return e.createElement(H.Flex,{alignItems:"center",paddingLeft:6,style:{width:xe,flexShrink:0}},e.createElement(j.Box,{paddingRight:2},e.createElement(Ee.BaseCheckbox,{name:p,"aria-label":T({id:"Settings.permissions.select-all-by-permission",defaultMessage:"Select all {label} permissions"},{label:i}),disabled:r,onValueChange:I=>l({target:{name:p,value:I}}),indeterminate:C,value:b})),e.createElement(Ct,v({title:i,alignItems:"center",isCollapsable:t},t&&{onClick:c,"aria-expanded":n,onKeyDown:({key:I})=>(I==="Enter"||I===" ")&&c(),tabIndex:0,role:"button"}),e.createElement(L.Typography,{fontWeight:n?"bold":"",textColor:n?"primary600":"neutral800",ellipsis:!0},ee()(i)),o))};d.defaultProps={children:null,checkboxName:"",onChange:()=>{},value:!1,someChecked:!1,isCollapsable:!1},d.propTypes={checkboxName:s().string,children:s().node,label:s().string.isRequired,isCollapsable:s().bool,isFormDisabled:s().bool.isRequired,onChange:s().func,onClick:s().func.isRequired,someChecked:s().bool,value:s().bool,isActive:s().bool.isRequired};const P=(0,e.memo)(d),A=o=>(0,u.isObject)(o)?(0,u.flattenDeep)(Object.values(o).map(t=>(0,u.isObject)(t)?A(t):t)):[],D=A,ue=o=>o?Object.keys(o).reduce((t,n)=>(n!=="conditions"&&(t[n]=o[n]),t),{}):null,Pe=o=>{const t=ue(o),n=D(t);if(!n.length)return{hasAllActionsSelected:!1,hasSomeActionsSelected:!1};const r=n.every(l=>l),i=n.some(l=>l)&&!r;return{hasAllActionsSelected:r,hasSomeActionsSelected:i}},Te=(o,t,n)=>o.map(({actionId:r,isDisplayed:i,applyToProperties:l,label:c})=>{if(!i)return{actionId:r,hasSomeActionsSelected:!1,isDisplayed:i};const p=[...n.split(".."),r],C=(0,u.isEmpty)(l)?[...p,"properties","enabled"]:p,b=C.join(".."),T=(0,u.get)(t,[...p,"conditions"],null),I=D(T).some(B=>B);if((0,u.isEmpty)(l)){const B=(0,u.get)(t,C,!1);return{actionId:r,checkboxName:b,hasAllActionsSelected:B,hasConditions:I,hasSomeActionsSelected:B,isDisplayed:i,isParentCheckbox:!1,label:c,pathToConditionsObject:p}}const k=(0,u.get)(t,C,null),{hasAllActionsSelected:_,hasSomeActionsSelected:F}=Pe(k);return{actionId:r,checkboxName:b,hasAllActionsSelected:_,hasConditions:I,hasSomeActionsSelected:F,isDisplayed:i,isParentCheckbox:!0,label:c,pathToConditionsObject:p}});var Qe=a(40413),At=a.n(Qe);const nt=(0,S.default)(At())`
  display: none;
  width: ${10/16}rem;
  transform: rotate(${({$isActive:o})=>o?"180":"0"}deg);
  margin-left: ${({theme:o})=>o.spaces[2]};
`,Tt=o=>`
  ${L.Typography} {
    color: ${o.colors.primary600};
    font-weight: ${o.fontWeights.bold}
  }
  ${nt} {
    display: block;
    path {
      fill: ${o.colors.primary600}
    };
  }
`;var Gt=function(){return window&&window.strapi&&window.strapi.isEE?a(43549).Z:a(55632).Z}(),Ut=function o(t,n){return`
  `.concat(Kt,` {
    background-color: `).concat(t.colors.primary100,`;
    color: `).concat(t.colors.primary600,`;
    border-radius: `).concat(n?"2px 2px 0 0":"2px",`;
  }
  `).concat(Xt,` {
    display: flex;
  }
  `).concat(Be,` {
    display: block;
  }
  &:hover {
   `).concat(Tt(t),`
  }

  &:focus-within {
    `).concat(function(r){var i=r.theme,l=r.isActive;return o(i,l)},`
  }
  
`)},Kt=S.default.div.withConfig({displayName:"Collapse__Wrapper",componentId:"sc-132fji1-0"})(["flex:1;display:flex;align-items:center;height:",";background-color:",";border:1px solid transparent;"],$e,function(o){var t=o.isGrey,n=o.theme;return t?n.colors.neutral100:n.colors.neutral0}),Yn=S.default.div.withConfig({displayName:"Collapse__BoxWrapper",componentId:"sc-132fji1-1"})(["display:inline-flex;min-width:100%;","{display:none;}"," &:hover{","}"],Be,function(o){var t=o.isActive,n=o.theme;return t&&Ut(n,t)},function(o){var t=o.theme,n=o.isActive;return Ut(t,n)}),Ht=(0,S.default)(H.Flex).withConfig({displayName:"Collapse__Cell",componentId:"sc-132fji1-2"})(["width:",";position:relative;"],te),Xt=(0,S.default)(j.Box).withConfig({displayName:"Collapse__Chevron",componentId:"sc-132fji1-3"})(["display:none;svg{width:11px;}*{fill:",";}"],function(o){var t=o.theme;return t.colors.primary600}),zt=S.default.span.withConfig({displayName:"Collapse__TinyDot",componentId:"sc-132fji1-4"})(["position:absolute;top:-6px;left:37px;width:6px;height:6px;border-radius:20px;background:",";"],function(o){var t=o.theme;return t.colors.primary600}),Qn=(0,S.default)(j.Box).withConfig({displayName:"Collapse__AbsoluteBox",componentId:"sc-132fji1-5"})(["position:absolute;right:9px;transform:translateY(10px);"]),Yt=function(t){var n=t.availableActions,r=t.isActive,i=t.isGrey,l=t.isFormDisabled,c=t.label,p=t.onClickToggle,C=t.pathToData,b=(0,e.useState)(!1),T=(0,Q.Z)(b,2),I=T[0],k=T[1],_=(0,z.useIntl)(),F=_.formatMessage,B=(0,oe.$_)(),O=B.modifiedData,M=B.onChangeParentCheckbox,K=B.onChangeSimpleCheckbox,de=function(){k(function(be){return!be})},Se=function(){k(!1)},ve=ye()(O,C.split(".."),{}),Ae=(0,e.useMemo)(function(){return Object.keys(ve).reduce(function(pe,be){return pe[be]=Fe()(ve[be],"conditions"),pe},{})},[ve]),Ie=Pe(Ae),Re=Ie.hasAllActionsSelected,it=Ie.hasSomeActionsSelected,Ce=(0,e.useMemo)(function(){return Te(n,O,C)},[n,O,C]),Me=Ce.some(function(pe){var be=pe.hasConditions;return be});return e.createElement(Yn,{isActive:r},e.createElement(Kt,{isGrey:i},e.createElement(P,{isCollapsable:!0,isFormDisabled:l,label:c,checkboxName:C,onChange:M,onClick:p,someChecked:it,value:Re,isActive:r},e.createElement(Xt,{paddingLeft:2},r?e.createElement(ke(),null):e.createElement(Je(),null))),e.createElement(H.Flex,{style:{flex:1}},Ce.map(function(pe){var be=pe.actionId,Oe=pe.hasConditions,we=pe.hasAllActionsSelected,Ne=pe.hasSomeActionsSelected,at=pe.isDisplayed,Ze=pe.isParentCheckbox,ot=pe.checkboxName,ft=pe.label;return at?Ze?e.createElement(Ht,{key:be,justifyContent:"center",alignItems:"center"},Oe&&e.createElement(zt,null),e.createElement(Ee.BaseCheckbox,{disabled:l||Gt,name:ot,"aria-label":F({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(ft," ").concat(c)}),onValueChange:function(lt){M({target:{name:ot,value:lt}})},indeterminate:Ne,value:we})):e.createElement(Ht,{key:be,justifyContent:"center",alignItems:"center"},Oe&&e.createElement(zt,null),e.createElement(Ee.BaseCheckbox,{disabled:l||Gt,indeterminate:Oe,name:ot,onValueChange:function(lt){K({target:{name:ot,value:lt}})},value:we})):e.createElement(pt,{key:be})})),I&&e.createElement(rt,{headerBreadCrumbs:[c,"app.components.LeftMenuLinkContainer.settings"],actions:Ce,isFormDisabled:l,onClosed:Se,onToggle:de})),e.createElement(Qn,null,e.createElement(Be,{onClick:de,hasConditions:Me})))};Yt.propTypes={availableActions:s().array.isRequired,isActive:s().bool.isRequired,isGrey:s().bool.isRequired,isFormDisabled:s().bool.isRequired,label:s().string.isRequired,onClickToggle:s().func.isRequired,pathToData:s().string.isRequired};const Jn=Yt,qn=(o,t)=>o.map(n=>{const r=Array.isArray(n.applyToProperties)&&n.applyToProperties.indexOf(t)!==-1&&n.isDisplayed;return{label:n.label,actionId:n.actionId,isActionRelatedToCurrentProperty:r}}),Qt=(0,S.default)(H.Flex)`
  width: ${te};
  flex-shrink: 0;
`,_n=(0,S.default)(H.Flex)`
  width: ${xe};
  height: ${$e};
  flex-shrink: 0;
`,Jt=({headers:o,label:t})=>{const{formatMessage:n}=(0,z.useIntl)(),r=n({id:"Settings.roles.form.permission.property-label",defaultMessage:"{label} permissions"},{label:t});return e.createElement(H.Flex,null,e.createElement(_n,{alignItems:"center",paddingLeft:6},e.createElement(L.Typography,{variant:"sigma",textColor:"neutral500"},r)),o.map(i=>i.isActionRelatedToCurrentProperty?e.createElement(Qt,{justifyContent:"center",key:i.label},e.createElement(L.Typography,{variant:"sigma",textColor:"neutral500"},n({id:`Settings.roles.form.permissions.${i.label.toLowerCase()}`,defaultMessage:i.label}))):e.createElement(Qt,{key:i.label})))};Jt.propTypes={headers:s().arrayOf(s().shape({label:s().string.isRequired,isActionRelatedToCurrentProperty:s().bool.isRequired})).isRequired,label:s().string.isRequired};const eo=Jt,to=S.default.span`
  color: ${({theme:o})=>o.colors.danger700};
  padding-left: ${({theme:o})=>o.spaces[1]}px;
`,qt=()=>e.createElement(to,null,"*");var no=Object.defineProperty,oo=Object.defineProperties,ao=Object.getOwnPropertyDescriptors,_t=Object.getOwnPropertySymbols,ro=Object.prototype.hasOwnProperty,so=Object.prototype.propertyIsEnumerable,en=(o,t,n)=>t in o?no(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,io=(o,t)=>{for(var n in t||(t={}))ro.call(t,n)&&en(o,n,t[n]);if(_t)for(var n of _t(t))so.call(t,n)&&en(o,n,t[n]);return o},lo=(o,t)=>oo(o,ao(t));const co=(o,t)=>o.map(n=>{const r=Array.isArray(n.subjects)&&n.subjects.indexOf(t)!==-1;return lo(io({},n),{isDisplayed:r})});var uo=a(87462),po=Object.defineProperty,tn=Object.getOwnPropertySymbols,mo=Object.prototype.hasOwnProperty,go=Object.prototype.propertyIsEnumerable,nn=(o,t,n)=>t in o?po(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,fo=(o,t)=>{for(var n in t||(t={}))mo.call(t,n)&&nn(o,n,t[n]);if(tn)for(var n of tn(t))go.call(t,n)&&nn(o,n,t[n]);return o};const ho=(0,S.default)(j.Box)`
  transform: translate(-4px, -12px);

  &:before {
    content: '';
    width: ${4/16}rem;
    height: ${12/16}rem;
    background: ${({theme:o})=>o.colors.primary200};
    display: block;
  }
`,yo=S.default.svg`
  position: relative;
  flex-shrink: 0;
  transform: translate(-0.5px, -1px);

  * {
    fill: ${({theme:o,color:t})=>o.colors[t]};
  }
`,Lt=o=>e.createElement(ho,null,e.createElement(yo,fo({width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.02477 14.7513C8.65865 17.0594 11.6046 18.6059 17.5596 18.8856C18.6836 18.9384 19.5976 19.8435 19.5976 20.9688V20.9688C19.5976 22.0941 18.6841 23.0125 17.5599 22.9643C10.9409 22.6805 6.454 20.9387 3.75496 17.1258C0.937988 13.1464 0.486328 7.39309 0.486328 0.593262H4.50974C4.50974 7.54693 5.06394 11.9813 7.02477 14.7513Z",fill:"#D9D8FF"})));Lt.defaultProps={fill:"primary200"},Lt.propTypes={fill:s().string};const vo=(0,e.memo)(Lt);var on=function(){return window&&window.strapi&&window.strapi.isEE?a(73071).Z:a(93485).Z}(),an=(0,S.default)(H.Flex).withConfig({displayName:"SubActionRow__Cell",componentId:"sc-7y8yzq-0"})(["width:",";position:relative;"],te),Co=(0,S.default)(H.Flex).withConfig({displayName:"SubActionRow__RowWrapper",componentId:"sc-7y8yzq-1"})(["height:",";"],$e),Eo=(0,S.default)(j.Box).withConfig({displayName:"SubActionRow__Wrapper",componentId:"sc-7y8yzq-2"})(["padding-left:","rem;"],31/16),bo=(0,S.default)(j.Box).withConfig({displayName:"SubActionRow__LeftBorderTimeline",componentId:"sc-7y8yzq-3"})(["border-left:",";"],function(o){var t=o.isVisible,n=o.theme;return t?"4px solid ".concat(n.colors.primary200):"4px solid transparent"}),Po=(0,S.default)(H.Flex).withConfig({displayName:"SubActionRow__RowStyle",componentId:"sc-7y8yzq-4"})(["padding-left:",";width:","px;"," ",";"],function(o){var t=o.theme;return t.spaces[4]},function(o){var t=o.level;return 145-t*36},function(o){var t=o.isCollapsable,n=o.theme;return t&&`
      `.concat(nt,` {
        display: block;
        color: `).concat(n.colors.neutral100,`;
      }
      &:hover {
        `).concat(Tt(n),`
      }
  `)},function(o){var t=o.isActive,n=o.theme;return t&&Tt(n)}),To=S.default.div.withConfig({displayName:"SubActionRow__TopTimeline",componentId:"sc-7y8yzq-5"})(["padding-top:",";margin-top:",";width:","rem;background-color:",";border-top-left-radius:2px;border-top-right-radius:2px;"],function(o){var t=o.theme;return t.spaces[2]},function(o){var t=o.theme;return t.spaces[2]},4/16,function(o){var t=o.theme;return t.colors.primary200}),rn=function o(t){var n=t.childrenForm,r=t.isFormDisabled,i=t.recursiveLevel,l=t.pathToDataFromActionRow,c=t.propertyActions,p=t.parentName,C=t.propertyName,b=(0,z.useIntl)(),T=b.formatMessage,I=(0,oe.$_)(),k=I.modifiedData,_=I.onChangeParentCheckbox,F=I.onChangeSimpleCheckbox,B=(0,e.useState)(null),O=(0,Q.Z)(B,2),M=O[0],K=O[1],de=function(Ae){K(function(Ie){return Ie===Ae?null:Ae})},Se=(0,e.useMemo)(function(){return M?n.find(function(ve){var Ae=ve.value;return Ae===M}):null},[M,n]);return e.createElement(Eo,null,e.createElement(To,null),n.map(function(ve,Ae){var Ie=ve.label,Re=ve.value,it=ve.required,Ce=ve.children,Me=Ae+1<n.length,pe=Array.isArray(Ce),be=M===Re;return e.createElement(bo,{key:Re,isVisible:Me},e.createElement(Co,null,e.createElement(vo,{color:"primary200"}),e.createElement(H.Flex,{style:{flex:1}},e.createElement(Po,{level:i,isActive:be,isCollapsable:pe},e.createElement(Ct,(0,uo.Z)({alignItems:"center",isCollapsable:pe},pe&&{onClick:function(){return de(Re)},"aria-expanded":be,onKeyDown:function(we){var Ne=we.key;return(Ne==="Enter"||Ne===" ")&&de(Re)},tabIndex:0,role:"button"},{title:Ie}),e.createElement(L.Typography,{ellipsis:!0},ee()(Ie)),it&&e.createElement(qt,null),e.createElement(nt,{$isActive:be}))),e.createElement(H.Flex,{style:{flex:1}},c.map(function(Oe){var we=Oe.actionId,Ne=Oe.label,at=Oe.isActionRelatedToCurrentProperty;if(!at)return e.createElement(pt,{key:we});var Ze=[].concat((0,W.Z)(l.split("..")),[we,"properties",C],(0,W.Z)(p.split("..")),[Re]),ot=ye()(k,Ze,!1);if(!Ce)return e.createElement(an,{key:Ne,justifyContent:"center",alignItems:"center"},e.createElement(Ee.BaseCheckbox,{disabled:r||on,name:Ze.join(".."),"aria-label":T({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(p," ").concat(Ie," ").concat(Ne)}),onValueChange:function(St){F({target:{name:Ze.join(".."),value:St}})},value:ot}));var ft=Pe(ot),ht=ft.hasAllActionsSelected,lt=ft.hasSomeActionsSelected;return e.createElement(an,{key:Ne,justifyContent:"center",alignItems:"center"},e.createElement(Ee.BaseCheckbox,{key:Ne,disabled:r||on,name:Ze.join(".."),"aria-label":T({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(p," ").concat(Ie," ").concat(Ne)}),onValueChange:function(St){_({target:{name:Ze.join(".."),value:St}})},value:ht,indeterminate:lt}))})))),Se&&be&&e.createElement(j.Box,{paddingBottom:2},e.createElement(o,{isFormDisabled:r,parentName:"".concat(p,"..").concat(Re),pathToDataFromActionRow:l,propertyActions:c,propertyName:C,recursiveLevel:i+1,childrenForm:Se.children})))}))};rn.propTypes={childrenForm:s().array.isRequired,isFormDisabled:s().bool.isRequired,parentName:s().string.isRequired,pathToDataFromActionRow:s().string.isRequired,propertyActions:s().array.isRequired,propertyName:s().string.isRequired,recursiveLevel:s().number.isRequired};const So=(0,e.memo)(rn),Ao=o=>o.reduce((n,r)=>(r.isActionRelatedToCurrentProperty&&n.push(r.actionId),n),[]),Oo=(o,t,n,r,i)=>{const c=Ao(o).reduce((p,C)=>{const b=[...n.split(".."),C,"properties",r,i],T=(0,u.get)(t,b,!1);return p[C]=T,p},{});return Pe(c)};var sn=function(){return window&&window.strapi&&window.strapi.isEE?a(57779).Z:a(48496).Z}(),ln=(0,S.default)(H.Flex).withConfig({displayName:"ActionRow__Cell",componentId:"sc-4agenc-0"})(["width:",";position:relative;"],te),Ro=(0,S.default)(H.Flex).withConfig({displayName:"ActionRow__Wrapper",componentId:"sc-4agenc-1"})(["height:",";flex:1;"," ",";"],$e,function(o){var t=o.isCollapsable,n=o.theme;return t&&`
      `.concat(nt,` {
        display: block;
        color: `).concat(n.colors.neutral100,`;
      }
      &:hover {
        `).concat(Tt(n),`
      }
  `)},function(o){var t=o.isActive,n=o.theme;return t&&Tt(n)}),xt=function(t){var n=t.childrenForm,r=t.label,i=t.isFormDisabled,l=t.name,c=t.required,p=t.pathToData,C=t.propertyActions,b=t.propertyName,T=t.isOdd,I=(0,z.useIntl)(),k=I.formatMessage,_=(0,e.useState)(null),F=(0,Q.Z)(_,2),B=F[0],O=F[1],M=(0,oe.$_)(),K=M.modifiedData,de=M.onChangeCollectionTypeLeftActionRowCheckbox,Se=M.onChangeParentCheckbox,ve=M.onChangeSimpleCheckbox,Ae=B===l,Ie=(0,e.useMemo)(function(){return Array.isArray(n)?n:[]},[n]),Re=Ie.length>0,it=(0,e.useCallback)(function(){Re&&O(function(Oe){return Oe===l?null:l})},[Re,l]),Ce=function(we){var Ne=we.target.value;de(p,b,l,Ne)},Me=(0,e.useMemo)(function(){return Oo(C,K,p,b,l)},[C,K,p,b,l]),pe=Me.hasAllActionsSelected,be=Me.hasSomeActionsSelected;return e.createElement(e.Fragment,null,e.createElement(Ro,{alignItems:"center",isCollapsable:Re,isActive:Ae,background:T?"neutral100":"neutral0"},e.createElement(H.Flex,null,e.createElement(P,{onChange:Ce,onClick:it,isCollapsable:Re,isFormDisabled:i,label:r,someChecked:be,value:pe,isActive:Ae},c&&e.createElement(qt,null),e.createElement(nt,{$isActive:Ae})),e.createElement(H.Flex,null,C.map(function(Oe){var we=Oe.label,Ne=Oe.isActionRelatedToCurrentProperty,at=Oe.actionId;if(!Ne)return e.createElement(pt,{key:we});var Ze=[].concat((0,W.Z)(p.split("..")),[at,"properties",b,l]);if(!Re){var ot=ye()(K,Ze,!1);return e.createElement(ln,{key:at,justifyContent:"center",alignItems:"center"},e.createElement(Ee.BaseCheckbox,{disabled:i||sn,name:Ze.join(".."),"aria-label":k({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(l," ").concat(we)}),onValueChange:function(Vt){ve({target:{name:Ze.join(".."),value:Vt}})},value:ot}))}var ft=ye()(K,Ze,{}),ht=Pe(ft),lt=ht.hasAllActionsSelected,Zt=ht.hasSomeActionsSelected;return e.createElement(ln,{key:we,justifyContent:"center",alignItems:"center"},e.createElement(Ee.BaseCheckbox,{disabled:i||sn,name:Ze.join(".."),onValueChange:function(Vt){Se({target:{name:Ze.join(".."),value:Vt}})},"aria-label":k({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(l," ").concat(we)}),value:lt,indeterminate:Zt}))})))),Ae&&e.createElement(So,{childrenForm:Ie,isFormDisabled:i,parentName:l,pathToDataFromActionRow:p,propertyName:b,propertyActions:C,recursiveLevel:0}))};xt.defaultProps={childrenForm:[],required:!1},xt.propTypes={childrenForm:s().array,label:s().string.isRequired,isFormDisabled:s().bool.isRequired,name:s().string.isRequired,pathToData:s().string.isRequired,propertyActions:s().array.isRequired,propertyName:s().string.isRequired,required:s().bool,isOdd:s().bool.isRequired};const Do=(0,e.memo)(xt),Lo=S.default.div`
  display: inline-flex;
  flex-direction: column;
  min-width: 0;
`,cn=({availableActions:o,childrenForm:t,isFormDisabled:n,label:r,pathToData:i,propertyName:l})=>{const c=(0,e.useMemo)(()=>qn(o,l),[o,l]);return e.createElement(Lo,null,e.createElement(eo,{label:r,headers:c}),e.createElement(j.Box,null,t.map(({children:p,label:C,value:b,required:T},I)=>e.createElement(Do,{childrenForm:p,key:b,label:C,isFormDisabled:n,name:b,required:T,propertyActions:c,pathToData:i,propertyName:l,isOdd:I%2===0}))))};cn.propTypes={childrenForm:s().array.isRequired,availableActions:s().array.isRequired,isFormDisabled:s().bool.isRequired,label:s().string.isRequired,pathToData:s().string.isRequired,propertyName:s().string.isRequired};const xo=cn,Io=S.default.div`
  flex-direction: column;
  display: inline-flex;
  min-width: 100%;
  ${({theme:o,isActive:t})=>t&&`border: 1px solid ${o.colors.primary600};`}
`,un=({allActions:o,contentTypeName:t,label:n,index:r,isActive:i,isFormDisabled:l,onClickToggleCollapse:c,pathToData:p,properties:C})=>{const b=(0,e.useCallback)(()=>{c(t)},[t,c]),T=(0,e.useMemo)(()=>co(o,t),[o,t]);return e.createElement(Io,{isActive:i},e.createElement(Jn,{availableActions:T,isActive:i,isGrey:r%2===0,isFormDisabled:l,label:n,onClickToggle:b,pathToData:p}),i&&C.map(({label:I,value:k,children:_})=>e.createElement(xo,{availableActions:T,childrenForm:_,isFormDisabled:l,label:I,pathToData:p,propertyName:k,key:k})))};un.propTypes={allActions:s().array.isRequired,contentTypeName:s().string.isRequired,index:s().number.isRequired,isActive:s().bool.isRequired,isFormDisabled:s().bool.isRequired,label:s().string.isRequired,onClickToggleCollapse:s().func.isRequired,pathToData:s().string.isRequired,properties:s().array.isRequired};const Mo=un,It=({actions:o,isFormDisabled:t,pathToData:n,subjects:r})=>{const[i,l]=(0,e.useState)(null),c=p=>{l(i===p?null:p)};return r.map(({uid:p,label:C,properties:b},T)=>e.createElement(Mo,{allActions:o,key:p,contentTypeName:p,label:C,isActive:i===p,isFormDisabled:t,index:T,onClickToggleCollapse:c,pathToData:`${n}..${p}`,properties:b}))};It.defaultProps={actions:[],subjects:[]},It.propTypes={actions:s().array.isRequired,isFormDisabled:s().bool.isRequired,pathToData:s().string.isRequired,subjects:s().arrayOf(s().shape({uid:s().string.isRequired,label:s().string.isRequired,properties:s().array.isRequired}))};const wo=(0,e.memo)(It),Fo=o=>o.filter(({subjects:t})=>t&&t.length);var Bo=Object.defineProperty,dn=Object.getOwnPropertySymbols,jo=Object.prototype.hasOwnProperty,No=Object.prototype.propertyIsEnumerable,pn=(o,t,n)=>t in o?Bo(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,mn=(o,t)=>{for(var n in t||(t={}))jo.call(t,n)&&pn(o,n,t[n]);if(dn)for(var n of dn(t))No.call(t,n)&&pn(o,n,t[n]);return o};const ko=o=>o.map(({actionId:t})=>t),Wo=(o,t)=>o.reduce((n,r)=>(Object.keys(t).forEach(i=>{const l=(0,u.get)(t,[i,r],{}),c={[i]:ue(l)};n[r]?n[r]=mn(mn({},n[r]),c):n[r]=c}),n),{}),$o=(o,t)=>{const n=ko(o),r=Wo(n,t);return Object.keys(r).reduce((l,c)=>(l[c]=Pe(r[c]),l),{})};var Zo=function(){return window&&window.strapi&&window.strapi.isEE?a(26107).Z:a(39672).Z}(),Vo=(0,S.default)(He.Stack).withConfig({displayName:"GlobalActions__CenteredStack",componentId:"sc-1vxwsjr-0"})(["align-items:center;justify-content:center;width:",";flex-shrink:0;"],te),Mt=function(t){var n=t.actions,r=t.isFormDisabled,i=t.kind,l=(0,z.useIntl)(),c=l.formatMessage,p=(0,oe.$_)(),C=p.modifiedData,b=p.onChangeCollectionTypeGlobalActionCheckbox,T=(0,e.useMemo)(function(){return Fo(n)},[n]),I=(0,e.useMemo)(function(){return $o(T,C[i])},[C,T,i]);return e.createElement(j.Box,{paddingBottom:4,paddingTop:6,style:{paddingLeft:xe}},e.createElement(He.Stack,{horizontal:!0,spacing:0},T.map(function(k){var _=k.label,F=k.actionId;return e.createElement(Vo,{key:F,spacing:3},e.createElement(L.Typography,{variant:"sigma",textColor:"neutral500"},c({id:"Settings.roles.form.permissions.".concat(_.toLowerCase()),defaultMessage:_})),e.createElement(Ee.BaseCheckbox,{disabled:r||Zo,onValueChange:function(O){b(i,F,O)},name:F,"aria-label":c({id:"Settings.permissions.select-all-by-permission",defaultMessage:"Select all {label} permissions"},{label:c({id:"Settings.roles.form.permissions.".concat(_.toLowerCase()),defaultMessage:_})}),value:ye()(I,[F,"hasAllActionsSelected"],!1),indeterminate:ye()(I,[F,"hasSomeActionsSelected"],!1)}))})))};Mt.defaultProps={actions:[]},Mt.propTypes={actions:s().arrayOf(s().shape({label:s().string.isRequired,actionId:s().string.isRequired,subjects:s().array.isRequired})),isFormDisabled:s().bool.isRequired,kind:s().string.isRequired};const Go=(0,e.memo)(Mt),Uo=(0,S.default)(j.Box)`
  overflow-x: auto;
`,gn=({isFormDisabled:o,kind:t,layout:{actions:n,subjects:r}})=>{const i=ge()([...r],"label");return e.createElement(Uo,{background:"neutral0"},e.createElement(Go,{actions:n,kind:t,isFormDisabled:o}),e.createElement(wo,{actions:n,isFormDisabled:o,pathToData:t,subjects:i}))};gn.propTypes={isFormDisabled:s().bool.isRequired,kind:s().string.isRequired,layout:s().shape({actions:s().array,subjects:s().arrayOf(s().shape({uid:s().string.isRequired,label:s().string.isRequired,properties:s().array.isRequired}))}).isRequired};const fn=(0,e.memo)(gn);var Ko=a(40448);const hn=({children:o,value:t})=>e.createElement(Ko.$l.Provider,{value:t},o);hn.propTypes={children:s().node.isRequired,value:s().exact({availableConditions:s().array.isRequired,modifiedData:s().object.isRequired,onChangeCollectionTypeLeftActionRowCheckbox:s().func.isRequired,onChangeConditions:s().func.isRequired,onChangeSimpleCheckbox:s().func.isRequired,onChangeParentCheckbox:s().func.isRequired,onChangeCollectionTypeGlobalActionCheckbox:s().func.isRequired}).isRequired};const Ho=hn;var wt=a(47949),yn=a(39272),vn=a(43499),Xo=Object.defineProperty,zo=Object.defineProperties,Yo=Object.getOwnPropertyDescriptors,Cn=Object.getOwnPropertySymbols,Qo=Object.prototype.hasOwnProperty,Jo=Object.prototype.propertyIsEnumerable,En=(o,t,n)=>t in o?Xo(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,qo=(o,t)=>{for(var n in t||(t={}))Qo.call(t,n)&&En(o,n,t[n]);if(Cn)for(var n of Cn(t))Jo.call(t,n)&&En(o,n,t[n]);return o},_o=(o,t)=>zo(o,Yo(t));const ea=(o,t,n)=>o.map(r=>{const i=[...n,r.action,"properties","enabled"],l=(0,u.get)(t,i,!1),c=(0,u.get)(t,[...n,r.action,"conditions"],{}),p=D(c).some(C=>C);return _o(qo({},r),{isDisplayed:l,checkboxName:i.join(".."),hasSomeActionsSelected:l,value:l,hasConditions:p,label:r.displayName,actionId:r.action,pathToConditionsObject:[...n,r.action]})}),ta=o=>{const t=Object.entries(o).reduce((r,i)=>{const[l,{conditions:c}]=i;return r[l]=c,r},{});return D(t).some(r=>r)};var Ft=function(){return window&&window.strapi&&window.strapi.isEE?a(45667).Z:a(99399).Z}(),na=S.default.div.withConfig({displayName:"SubCategory__Border",componentId:"sc-akgczm-0"})(["flex:1;align-self:center;border-top:1px solid ",";"],function(o){var t=o.theme;return t.colors.neutral150}),oa=S.default.div.withConfig({displayName:"SubCategory__CheckboxWrapper",componentId:"sc-akgczm-1"})(["position:relative;word-break:keep-all;",""],function(o){var t=o.hasConditions,n=o.disabled,r=o.theme;return t&&`
    &:before {
      content: '';
      position: absolute;
      top: `.concat(-4/16,`rem;
      left: `).concat(-8/16,`rem;
      width: `).concat(6/16,`rem;
      height: `).concat(6/16,`rem;
      border-radius: `).concat(20/16,`rem;
      background: `).concat(n?r.colors.neutral100:r.colors.primary600,`;
    }
  `)}),bn=function(t){var n=t.categoryName,r=t.isFormDisabled,i=t.subCategoryName,l=t.actions,c=t.pathToData,p=(0,e.useState)(!1),C=(0,Q.Z)(p,2),b=C[0],T=C[1],I=(0,oe.$_)(),k=I.modifiedData,_=I.onChangeParentCheckbox,F=I.onChangeSimpleCheckbox,B=(0,z.useIntl)(),O=B.formatMessage,M=ye()(k,c,{}),K=(0,e.useMemo)(function(){return Object.keys(M).reduce(function(Ce,Me){return Ce[Me]=ue(M[Me]),Ce},{})},[M]),de=Pe(K),Se=de.hasAllActionsSelected,ve=de.hasSomeActionsSelected,Ae=function(){T(function(Me){return!Me})},Ie=function(){T(!1)},Re=ea(l,k,c),it=ta(ye()(k,(0,W.Z)(c),{}));return e.createElement(e.Fragment,null,e.createElement(j.Box,null,e.createElement(H.Flex,{justifyContent:"space-between",alignItems:"center"},e.createElement(j.Box,{paddingRight:4},e.createElement(L.Typography,{variant:"sigma",textColor:"neutral600"},i)),e.createElement(na,null),e.createElement(j.Box,{paddingLeft:4},e.createElement(vn.Checkbox,{name:c.join(".."),disabled:r||Ft,onValueChange:function(Me){_({target:{name:c.join(".."),value:Me}})},indeterminate:ve,value:Se},O({id:"app.utils.select-all",defaultMessage:"Select all"})))),e.createElement(H.Flex,{paddingTop:6,paddingBottom:6},e.createElement(yn.Grid,{gap:2,style:{flex:1}},Re.map(function(Ce){var Me=Ce.checkboxName,pe=Ce.value,be=Ce.action,Oe=Ce.displayName,we=Ce.hasConditions;return e.createElement(yn.GridItem,{col:3,key:be},e.createElement(oa,{disabled:r||Ft,hasConditions:we},e.createElement(vn.Checkbox,{name:Me,disabled:r||Ft,onValueChange:function(at){F({target:{name:Me,value:at}})},value:pe},Oe)))})),e.createElement(Be,{hasConditions:it,onClick:Ae}))),b&&e.createElement(rt,{headerBreadCrumbs:[n,i],actions:Re,isFormDisabled:r,onClosed:Ie,onToggle:Ae}))};bn.propTypes={actions:s().array.isRequired,categoryName:s().string.isRequired,isFormDisabled:s().bool.isRequired,subCategoryName:s().string.isRequired,pathToData:s().array.isRequired};const aa=bn,Bt=({childrenForm:o,kind:t,name:n,isOpen:r,isFormDisabled:i,isWhite:l,onOpenCategory:c,pathToData:p})=>{const{formatMessage:C}=(0,z.useIntl)(),b=()=>{c(n)},T=(0,e.useMemo)(()=>n.split("::").pop(),[n]);return e.createElement(wt.Accordion,{expanded:r,onToggle:b,id:`accordion-${n}`,variant:l?"primary":"secondary"},e.createElement(wt.AccordionToggle,{title:ee()(T),description:`${C({id:"Settings.permissions.category"},{category:T})} ${t==="plugins"?"plugin":t}`}),e.createElement(wt.AccordionContent,null,e.createElement(j.Box,{padding:6},o.map(({actions:I,subCategoryName:k,subCategoryId:_})=>e.createElement(aa,{key:k,actions:I,categoryName:T,isFormDisabled:i,subCategoryName:k,pathToData:[...p,_]})))))};Bt.defaultProps={},Bt.propTypes={childrenForm:s().array.isRequired,isOpen:s().bool.isRequired,isFormDisabled:s().bool.isRequired,isWhite:s().bool.isRequired,kind:s().string.isRequired,name:s().string.isRequired,onOpenCategory:s().func.isRequired,pathToData:s().array.isRequired};const ra=Bt,Pn=({isFormDisabled:o,kind:t,layout:n})=>{const[r,i]=(0,e.useState)(null),l=c=>{i(c===r?null:c)};return e.createElement(j.Box,{padding:6,background:"neutral0"},n.map(({category:c,categoryId:p,childrenForm:C},b)=>e.createElement(ra,{key:c,childrenForm:C,kind:t,isFormDisabled:o,isOpen:r===c,isWhite:b%2===1,name:c,onOpenCategory:l,pathToData:[t,p]})))};Pn.propTypes={isFormDisabled:s().bool.isRequired,kind:s().string.isRequired,layout:s().arrayOf(s().shape({category:s().string.isRequired,categoryId:s().string.isRequired,childrenForm:s().arrayOf(s().shape({actions:s().array.isRequired})).isRequired}).isRequired).isRequired};const Tn=Pn,Sn=(o,t,n)=>o.find(r=>r.action===t&&r.subject===n);var sa=Object.defineProperty,ia=Object.defineProperties,la=Object.getOwnPropertyDescriptors,An=Object.getOwnPropertySymbols,ca=Object.prototype.hasOwnProperty,ua=Object.prototype.propertyIsEnumerable,On=(o,t,n)=>t in o?sa(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,Rn=(o,t)=>{for(var n in t||(t={}))ca.call(t,n)&&On(o,n,t[n]);if(An)for(var n of An(t))ua.call(t,n)&&On(o,n,t[n]);return o},Dn=(o,t)=>ia(o,la(t));const Ln=(o,t=[])=>o.reduce((n,r)=>(n[r.id]=t.indexOf(r.id)!==-1,n),{}),xn=({children:o},t,n="")=>o.reduce((r,i)=>{if(i.children)return Dn(Rn({},r),{[i.value]:xn(i,t,`${n}${i.value}.`)});const l=t.indexOf(`${n}${i.value}`)!==-1;return r[i.value]=l,r},{}),da=(o,t,n)=>o.reduce((r,i)=>{const l=t.properties.find(({value:c})=>c===i);if(l){const c=(0,u.get)(n,["properties",l.value],[]),p=xn(l,c);r.properties[i]=p}return r},{properties:{}}),pa=(o,t)=>t.reduce((n,r)=>{const i=o.find(({uid:l})=>l===r)||null;return i&&(n[r]=i),n},{}),In=({subjects:o},t,n,r=[])=>t.reduce((i,l)=>{const c=l.subjects,p=pa(o,c);if((0,u.isEmpty)(p))return i;const C=Object.keys(p).reduce((b,T)=>{const{actionId:I,applyToProperties:k}=l,B=p[T].properties.map(({value:de})=>de).every(de=>(k||[]).indexOf(de)===-1),O=Sn(r,I,T),M=Ln(n,(0,u.get)(O,"conditions",[]));if((0,u.isEmpty)(k)||B)return(0,u.set)(b,[T,I],{properties:{enabled:O!==void 0},conditions:M}),b;const K=da(k,p[T],O);return(0,u.set)(b,[T,I],Dn(Rn({},K),{conditions:M})),b},{});return(0,u.merge)(i,C)},{}),ma=(o,t,n)=>o.reduce((r,i)=>{const l=Sn(n,i.action,null);return r[i.action]={properties:{enabled:l!==void 0},conditions:Ln(t,(0,u.get)(l,"conditions",[]))},r},{}),ga=(o,t,n)=>o.reduce((r,i)=>(r[i.subCategoryId]=ma(i.actions,t,n),r),{}),Mn=(o,t,n=[])=>o.reduce((r,{categoryId:i,childrenForm:l})=>{const c=ga(l,t,n);return r[i]=c,r},{}),wn=o=>o.split(" ").join("-"),Fn=(o,t)=>(0,u.chain)(o).groupBy(t).map((n,r)=>({category:r,categoryId:wn(r),childrenForm:(0,u.chain)(n).groupBy("subCategory").map((i,l)=>({subCategoryName:l,subCategoryId:wn(l),actions:i})).value()})).value(),fa=(o,t)=>{const{conditions:n,sections:{collectionTypes:r,singleTypes:i,plugins:l,settings:c}}=o,p={collectionTypes:r,singleTypes:i,plugins:Fn(l,"plugin"),settings:Fn(c,"category")},C={collectionTypes:In(r,r.actions||[],n,t),singleTypes:In(i,i.actions||[],n,t),plugins:Mn(p.plugins,n,t),settings:Mn(p.settings,n,t)};return{initialData:C,modifiedData:C,layouts:p}};var ha=Object.defineProperty,ya=Object.defineProperties,va=Object.getOwnPropertyDescriptors,Bn=Object.getOwnPropertySymbols,Ca=Object.prototype.hasOwnProperty,Ea=Object.prototype.propertyIsEnumerable,jn=(o,t,n)=>t in o?ha(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,jt=(o,t)=>{for(var n in t||(t={}))Ca.call(t,n)&&jn(o,n,t[n]);if(Bn)for(var n of Bn(t))Ea.call(t,n)&&jn(o,n,t[n]);return o},Nt=(o,t)=>ya(o,va(t));const Nn=o=>Object.keys(o).reduce((t,n)=>{const r=o[n];if((0,u.isObject)(r)&&!(0,u.has)(r,"conditions"))return Nt(jt({},t),{[n]:Nn(r)});if((0,u.isObject)(r)&&(0,u.has)(r,"conditions")&&!D((0,u.omit)(r,"conditions")).some(l=>l)){const l=Object.keys(r.conditions).reduce((c,p)=>(c[p]=!1,c),{});return Nt(jt({},t),{[n]:Nt(jt({},r),{conditions:l})})}return t[n]=r,t},{}),kt=Nn;var ba=Object.defineProperty,Pa=Object.defineProperties,Ta=Object.getOwnPropertyDescriptors,kn=Object.getOwnPropertySymbols,Sa=Object.prototype.hasOwnProperty,Aa=Object.prototype.propertyIsEnumerable,Wn=(o,t,n)=>t in o?ba(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,Oa=(o,t)=>{for(var n in t||(t={}))Sa.call(t,n)&&Wn(o,n,t[n]);if(kn)for(var n of kn(t))Aa.call(t,n)&&Wn(o,n,t[n]);return o},Ra=(o,t)=>Pa(o,Ta(t));const $n=(o,t)=>Object.keys(o).reduce((n,r)=>{const i=o[r];return r==="conditions"?(n[r]=i,n):(0,u.isObject)(i)?Ra(Oa({},n),{[r]:$n(i,t)}):(n[r]=t,n)},{}),Ot=$n;var Da=Object.defineProperty,La=Object.defineProperties,xa=Object.getOwnPropertyDescriptors,Zn=Object.getOwnPropertySymbols,Ia=Object.prototype.hasOwnProperty,Ma=Object.prototype.propertyIsEnumerable,Vn=(o,t,n)=>t in o?Da(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,wa=(o,t)=>{for(var n in t||(t={}))Ia.call(t,n)&&Vn(o,n,t[n]);if(Zn)for(var n of Zn(t))Ma.call(t,n)&&Vn(o,n,t[n]);return o},Fa=(o,t)=>La(o,xa(t));const Ba={initialData:{},modifiedData:{},layouts:{}},ja=(o,t)=>(0,ae.default)(o,n=>{switch(t.type){case"ON_CHANGE_COLLECTION_TYPE_GLOBAL_ACTION_CHECKBOX":{const{collectionTypeKind:r,actionId:i,value:l}=t,c=["modifiedData",r];Object.keys((0,u.get)(o,c)).forEach(p=>{const C=(0,u.get)(o,[...c,p,i],void 0);if(C){let b=Ot(C,l);if(!l&&b.conditions){const T=Ot(b.conditions,!1);b=Fa(wa({},b),{conditions:T})}(0,u.set)(n,[...c,p,i],b)}});break}case"ON_CHANGE_COLLECTION_TYPE_ROW_LEFT_CHECKBOX":{const{pathToCollectionType:r,propertyName:i,rowName:l,value:c}=t;let p=(0,u.cloneDeep)(o.modifiedData);const C=r.split(".."),b=(0,u.get)(p,C,{});Object.keys(b).forEach(T=>{if((0,u.has)(b[T],`properties.${i}`)){const I=(0,u.get)(b,[T,"properties",i,l]),k=[...C,T,"properties",i,l];if(!(0,u.isObject)(I))(0,u.set)(p,k,c);else{const _=Ot(I,c);(0,u.set)(p,k,_)}}}),c||(p=kt(p)),(0,u.set)(n,"modifiedData",p);break}case"ON_CHANGE_CONDITIONS":{Object.entries(t.conditions).forEach(r=>{const[i,l]=r;(0,u.set)(n,["modifiedData",...i.split(".."),"conditions"],l)});break}case"ON_CHANGE_SIMPLE_CHECKBOX":{let r=(0,u.cloneDeep)(o.modifiedData);(0,u.set)(r,[...t.keys.split("..")],t.value),t.value||(r=kt(r)),(0,u.set)(n,"modifiedData",r);break}case"ON_CHANGE_TOGGLE_PARENT_CHECKBOX":{const{keys:r,value:i}=t,l=[...r.split("..")];let c=(0,u.cloneDeep)(o.modifiedData);const p=(0,u.get)(c,l,{}),C=Ot(p,i);(0,u.set)(c,l,C),i||(c=kt(c)),(0,u.set)(n,["modifiedData"],c);break}case"RESET_FORM":{n.modifiedData=o.initialData;break}case"SET_FORM_AFTER_SUBMIT":{n.initialData=o.modifiedData;break}default:return n}}),Wt=o=>Object.entries(o).filter(([,t])=>t).map(([t])=>t),Na=o=>{const[t,{conditions:n}]=o;return{action:t,subject:null,conditions:Wt(n),properties:{}}},ka=o=>Object.values(o).reduce((t,n)=>{const r=Object.entries(n).reduce((i,l)=>{const[,{properties:{enabled:c}}]=l;if(!c)return i;const p=Na(l);return i.push(p),i},[]);return[...t,...r]},[]),Gn=o=>Object.values(o).reduce((t,n)=>{const r=ka(n);return[...t,...r]},[]),Un=(o,t="")=>Object.entries(o).reduce((n,r)=>{const[i,l]=r;return(0,u.isObject)(l)?[...n,...Un(l,`${t}${i}.`)]:(l&&!(0,u.isObject)(l)&&n.push(`${t}${i}`),n)},[]),Wa=(o,t,{conditions:n,properties:r})=>Object.entries(r).reduce((i,l)=>{const[c,p]=l;return i.properties[c]=Un(p),i},{action:o,subject:t,conditions:Wt(n),properties:{}}),$a=(o,t,{conditions:n})=>({action:o,subject:t,properties:{},conditions:Wt(n)}),Za=(o,t)=>Object.entries(t).reduce((r,i)=>{const[l,c]=i;if(!D(c).some(b=>b))return r;if(!(0,u.has)(c,"properties.enabled")){const b=Wa(l,o,c);return[...r,b]}if(!c.properties.enabled)return r;const C=$a(l,o,c);return r.push(C),r},[]),Kn=o=>Object.entries(o).reduce((n,r)=>{const[i,l]=r,c=Za(i,l);return[...n,...c]},[]),Va=o=>{const t=Gn(o.plugins),n=Gn(o.settings),r=Kn(o.collectionTypes),i=Kn(o.singleTypes);return[...t,...n,...r,...i]},Ga=[{labelId:"app.components.LeftMenuLinkContainer.collectionTypes",defaultMessage:"Collection Types",id:"collectionTypes"},{labelId:"app.components.LeftMenuLinkContainer.singleTypes",id:"singleTypes",defaultMessage:"Single Types"},{labelId:"app.components.LeftMenuLinkContainer.plugins",defaultMessage:"Plugins",id:"plugins"},{labelId:"app.components.LeftMenuLinkContainer.settings",defaultMessage:"Settings",id:"settings"}];var Ua=Object.defineProperty,Hn=Object.getOwnPropertySymbols,Ka=Object.prototype.hasOwnProperty,Ha=Object.prototype.propertyIsEnumerable,Xn=(o,t,n)=>t in o?Ua(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,zn=(o,t)=>{for(var n in t||(t={}))Ka.call(t,n)&&Xn(o,n,t[n]);if(Hn)for(var n of Hn(t))Ha.call(t,n)&&Xn(o,n,t[n]);return o};const $t=(0,e.forwardRef)(({layout:o,isFormDisabled:t,permissions:n},r)=>{const[{initialData:i,layouts:l,modifiedData:c},p]=(0,e.useReducer)(ja,Ba,()=>fa(o,n)),{formatMessage:C}=(0,z.useIntl)();(0,e.useImperativeHandle)(r,()=>({getPermissions:()=>{const F=(0,Z.difference)(i.collectionTypes,c.collectionTypes),B=(0,Z.difference)(i.singleTypes,c.singleTypes),O=zn(zn({},F),B);let M;return Ve()(O)?M=!1:M=Object.values(O).some(K=>Object.values(K).some(de=>Le()(de,"conditions"))),{permissionsToSend:Va(c),didUpdateConditions:M}},resetForm:()=>{p({type:"RESET_FORM"})},setFormAfterSubmit:()=>{p({type:"SET_FORM_AFTER_SUBMIT"})}}));const b=(F,B,O,M)=>{p({type:"ON_CHANGE_COLLECTION_TYPE_ROW_LEFT_CHECKBOX",pathToCollectionType:F,propertyName:B,rowName:O,value:M})},T=(F,B,O)=>{p({type:"ON_CHANGE_COLLECTION_TYPE_GLOBAL_ACTION_CHECKBOX",collectionTypeKind:F,actionId:B,value:O})},I=F=>{p({type:"ON_CHANGE_CONDITIONS",conditions:F})},k=(0,e.useCallback)(({target:{name:F,value:B}})=>{p({type:"ON_CHANGE_SIMPLE_CHECKBOX",keys:F,value:B})},[]),_=(0,e.useCallback)(({target:{name:F,value:B}})=>{p({type:"ON_CHANGE_TOGGLE_PARENT_CHECKBOX",keys:F,value:B})},[]);return e.createElement(Ho,{value:{availableConditions:o.conditions,modifiedData:c,onChangeConditions:I,onChangeSimpleCheckbox:k,onChangeParentCheckbox:_,onChangeCollectionTypeLeftActionRowCheckbox:b,onChangeCollectionTypeGlobalActionCheckbox:T}},e.createElement(X.TabGroup,{id:"tabs",label:C({id:"Settings.permissions.users.tabs.label",defaultMessage:"Tabs Permissions"})},e.createElement(X.Tabs,null,Ga.map(F=>e.createElement(X.Tab,{key:F.id},C({id:F.labelId,defaultMessage:F.defaultMessage})))),e.createElement(X.TabPanels,{style:{position:"relative"}},e.createElement(X.TabPanel,null,e.createElement(fn,{layout:l.collectionTypes,kind:"collectionTypes",isFormDisabled:t})),e.createElement(X.TabPanel,null,e.createElement(fn,{layout:l.singleTypes,kind:"singleTypes",isFormDisabled:t})),e.createElement(X.TabPanel,null,e.createElement(Tn,{layout:l.plugins,kind:"plugins",isFormDisabled:t})),e.createElement(X.TabPanel,null,e.createElement(Tn,{layout:l.settings,kind:"settings",isFormDisabled:t})))))});$t.defaultProps={permissions:[],layout:{conditions:[],sections:{collectionTypes:{},singleTypes:{actions:[]},settings:[],plugins:[]}}},$t.propTypes={layout:s().object,isFormDisabled:s().bool.isRequired,permissions:s().array};const Xa=(0,e.memo)($t)},99399:(ne,R,a)=>{a.d(R,{Z:()=>E});const E=!0},75365:(ne,R,a)=>{a.d(R,{Z:()=>e});const e=()=>"todo empty role"},56894:(ne,R,a)=>{a.d(R,{Z:()=>Fe});var e=a(53547),E=a(45697),s=a.n(E),Z=a(94117),X=a.n(Z),De=a(40264),Le=a.n(De),me=a(43546),Ve=a.n(me),z=a(33483),j=a.n(z),S=a(49549),he=a.n(S),ge=a(68547),Q=a.n(ge),J=a(97132),Je=a.n(J),qe=Object.defineProperty,ke=Object.getOwnPropertySymbols,Ee=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,Xe=(oe,V,w)=>V in oe?qe(oe,V,{enumerable:!0,configurable:!0,writable:!0,value:w}):oe[V]=w,ye=(oe,V)=>{for(var w in V||(V={}))Ee.call(V,w)&&Xe(oe,w,V[w]);if(ke)for(var w of ke(V))H.call(V,w)&&Xe(oe,w,V[w]);return oe};const Ge=({id:oe,name:V,description:w,usersCount:Ue,icons:ze})=>{const{formatMessage:Ke}=(0,J.useIntl)(),Be=Ke({id:"Roles.RoleRow.user-count",defaultMessage:"{number, plural, =0 {#  user} one {#  user} other {# users}}"},{number:Ue});return e.createElement(me.Tr,ye({key:oe},(0,ge.onRowClick)({fn:ze[1].onClick})),e.createElement(me.Td,{maxWidth:(0,ge.pxToRem)(130)},e.createElement(z.Typography,{ellipsis:!0,textColor:"neutral800"},V)),e.createElement(me.Td,{maxWidth:(0,ge.pxToRem)(250)},e.createElement(z.Typography,{ellipsis:!0,textColor:"neutral800"},w)),e.createElement(me.Td,null,e.createElement(z.Typography,{textColor:"neutral800"},Be)),e.createElement(me.Td,null,e.createElement(De.Flex,ye({justifyContent:"flex-end"},ge.stopPropagation),ze.map((We,He)=>We?e.createElement(Z.Box,{key:We.label,paddingLeft:He===0?0:1},e.createElement(S.IconButton,{onClick:We.onClick,label:We.label,noBorder:!0,icon:We.icon})):null))))};Ge.propTypes={id:s().number.isRequired,name:s().string.isRequired,description:s().string.isRequired,usersCount:s().number.isRequired,icons:s().array.isRequired};const Fe=Ge},73044:(ne,R,a)=>{a.d(R,{Z:()=>f});var e=a(53547),E=a(68547),s=a(92699),Z=a(63852),X=a(89326),De=a.n(X),Le=a(62982),me=a.n(Le),Ve=a(56204),z=a.n(Ve),j=a(54279),S=a.n(j),he=a(64459),ge=a(35395),Q=a(43546),J=a(33483),Je=a(80117),qe=a(19631),ke=a(97132),Ee=a(49656),H=a(56894),Xe=a(75365),ye=a(45697),Ge=a.n(ye),Fe=a(16384),oe=a(54451),V=a(15577),w=a(49549),Ue=a(22499),ze=a(94117),Ke=a(40264),Be=a(9524),We=a(74657),He=a.n(We),_e=a(7228),re=a.n(_e),L=a(12285),ae=a(31652);const x=Fe.default.div`
  position: absolute;
  z-index: 3;
  inset: 0;
  background: ${({theme:g})=>(0,E.setHexOpacity)(g.colors.neutral800,.2)};
  padding: 0 ${({theme:g})=>g.spaces[8]};
`,fe=(0,Fe.default)(Ke.Flex)`
  position: relative;
  max-width: ${830/16}rem;
  height: ${415/16}rem;
  margin: 0 auto;
  overflow: hidden;
  margin-top: 10%;
  padding-left: ${64/16}rem;

  img:first-of-type {
    position: absolute;
    right: 0;
    top: 0;
    max-width: ${360/16}rem;
  }

  img:not(:first-of-type) {
    width: ${130/16}rem;
    margin-left: 12%;
    margin-right: ${20/16}rem;
    z-index: 0;
  }
`,se=(0,Fe.default)(Be.Stack)`
  align-items: flex-start;
  max-width: ${400/16}rem;
  z-index: 0;
`,ee=(0,Fe.default)(ze.Box)`
  position: absolute;
  right: ${({theme:g})=>g.spaces[4]};
  top: ${({theme:g})=>g.spaces[4]};
`,ie=({onClose:g,isOpen:h})=>{(0,E.useLockScroll)(h);const{formatMessage:y}=(0,ke.useIntl)();return h?e.createElement(oe.Portal,null,e.createElement(x,{onClick:g},e.createElement(V.FocusTrap,{onEscape:g},e.createElement(fe,{onClick:u=>u.stopPropagation(),"aria-labelledby":"upgrade-plan",background:"neutral0",hasRadius:!0},e.createElement("img",{src:L,alt:"air-balloon"}),e.createElement(ee,null,e.createElement(w.IconButton,{onClick:g,"aria-label":"Close",icon:e.createElement(re(),null)})),e.createElement(se,{spacing:6},e.createElement(J.Typography,{fontWeight:"bold",textColor:"primary600"},y({id:"app.components.UpgradePlanModal.text-ce",defaultMessage:"COMMUNITY EDITION"})),e.createElement(Be.Stack,{spacing:2},e.createElement(J.Typography,{variant:"alpha",as:"h2",id:"upgrade-plan"},y({id:"app.components.UpgradePlanModal.limit-reached",defaultMessage:"You have reached the limit"})),e.createElement(J.Typography,null,y({id:"app.components.UpgradePlanModal.text-power",defaultMessage:"Unlock the full power of Strapi by upgrading your plan to the Enterprise Edition"}))),e.createElement(Ue.LinkButton,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:e.createElement(He(),null)},y({id:"app.components.UpgradePlanModal.button",defaultMessage:"Learn more"}))),e.createElement("img",{src:ae,alt:"upgrade-arrow"}))))):null};ie.propTypes={onClose:Ge().func.isRequired,isOpen:Ge().bool.isRequired};const W=ie;var $=a(32104);const te=()=>{const{roles:g,isLoading:h}=(0,$.bF)(),y=(0,E.useQuery)(),u=decodeURIComponent(y.get("_q")||""),m=(0,Z.ZP)(g,u,{keys:["name","description"]});return{isLoading:h,sortedRoles:m}},xe=()=>{const{formatMessage:g}=(0,ke.useIntl)(),[h,y]=(0,e.useState)(!1),{trackUsage:u}=(0,E.useTracking)(),{push:m}=(0,Ee.useHistory)(),Y=(0,e.useCallback)(U=>{m(`/settings/roles/${U}`)},[m]),le=(0,e.useCallback)(()=>{y(U=>!U)},[]),G=(0,e.useCallback)(()=>{u("didShowRBACUpgradeModal"),y(!0)},[u]),ce=(0,e.useCallback)(U=>[{onClick:le,label:g({id:"app.utils.duplicate",defaultMessage:"Duplicate"}),icon:e.createElement(S(),null)},{onClick:()=>Y(U.id),label:g({id:"app.utils.edit",defaultMessage:"Edit"}),icon:e.createElement(z(),null)},{onClick:le,label:g({id:"global.delete",defaultMessage:"Delete"}),icon:e.createElement(me(),null)}],[g,le,Y]);return{isModalOpen:h,handleToggleModalForCreatingRole:G,handleToggle:le,getIcons:ce}},je=()=>{const{formatMessage:g}=(0,ke.useIntl)();(0,E.useFocusWhenNavigate)();const{sortedRoles:h,isLoading:y}=te(),{isModalOpen:u,handleToggle:m,handleToggleModalForCreatingRole:Y,getIcons:le}=xe(),G=h.length+1,ce=5;return e.createElement(Je.Main,null,e.createElement(E.SettingsPageTitle,{name:"Roles"}),e.createElement(ge.HeaderLayout,{primaryAction:e.createElement(he.Button,{onClick:Y,startIcon:e.createElement(De(),null),size:"L"},g({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})),title:g({id:"global.roles",defaultMessage:"roles"}),subtitle:g({id:"Settings.roles.list.description",defaultMessage:"List of roles"})}),e.createElement(ge.ContentLayout,null,e.createElement(Q.Table,{colCount:ce,rowCount:G,footer:e.createElement(Q.TFooter,{onClick:Y,icon:e.createElement(De(),null)},g({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"}))},e.createElement(Q.Thead,null,e.createElement(Q.Tr,null,e.createElement(Q.Th,null,e.createElement(J.Typography,{variant:"sigma",textColor:"neutral600"},g({id:"global.name",defaultMessage:"Name"}))),e.createElement(Q.Th,null,e.createElement(J.Typography,{variant:"sigma",textColor:"neutral600"},g({id:"global.description",defaultMessage:"Description"}))),e.createElement(Q.Th,null,e.createElement(J.Typography,{variant:"sigma",textColor:"neutral600"},g({id:"global.users",defaultMessage:"Users"}))),e.createElement(Q.Th,null,e.createElement(qe.VisuallyHidden,null,g({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(Q.Tbody,null,h==null?void 0:h.map(U=>e.createElement(H.Z,{key:U.id,id:U.id,name:U.name,description:U.description,usersCount:U.usersCount,icons:le(U)})))),!G&&!y&&e.createElement(Xe.Z,null)),e.createElement(W,{isOpen:u,onClose:m}))},f=()=>e.createElement(E.CheckPagePermissions,{permissions:s.Z.settings.roles.main},e.createElement(je,null))},73258:(ne,R,a)=>{a.d(R,{Z:()=>E});const E=[]},18290:(ne,R,a)=>{a.d(R,{Z:()=>_e});var e=a(53547),E=a(30381),s=a.n(E),Z=a(68547),X=a(94117),De=a(64459),Le=a(35395),me=a(39272),Ve=a(80117),z=a(40264),j=a(9524),S=a(33483),he=a(99136),ge=a(78607),Q=a(87760),J=a.n(Q),Je=a(80831),qe=a(27361),ke=a.n(qe),Ee=a(41609),H=a.n(Ee),Xe=a(97132),ye=a(49656),Ge=a(16384),Fe=a(79160),oe=a(32104),V=a(92699),w=a(53209);const ze=w.Ry().shape({name:w.Z_().required(Z.translatedErrors.required),description:w.Z_().required(Z.translatedErrors.required)});var Ke=a(25108),Be=(re,L,ae)=>new Promise((x,fe)=>{var se=W=>{try{ie(ae.next(W))}catch($){fe($)}},ee=W=>{try{ie(ae.throw(W))}catch($){fe($)}},ie=W=>W.done?x(W.value):Promise.resolve(W.value).then(se,ee);ie((ae=ae.apply(re,L)).next())});const We=Ge.default.div`
  border: 1px solid ${({theme:re})=>re.colors.primary200};
  background: ${({theme:re})=>re.colors.primary100};
  padding: ${({theme:re})=>`${re.spaces[2]} ${re.spaces[4]}`};
  color: ${({theme:re})=>re.colors.primary600};
  border-radius: ${({theme:re})=>re.borderRadius};
  font-size: ${12/16}rem;
  font-width: bold;
`,He=()=>{const re=(0,Z.useNotification)(),{lockApp:L,unlockApp:ae}=(0,Z.useOverlayBlocker)(),{formatMessage:x}=(0,Xe.useIntl)(),[fe,se]=(0,e.useState)(!1),{replace:ee}=(0,ye.useHistory)(),ie=(0,e.useRef)(),{trackUsage:W}=(0,Z.useTracking)(),$=(0,ye.useRouteMatch)("/settings/roles/duplicate/:id"),te=ke()($,"params.id",null),{isLoading:xe,data:$e}=(0,oe.U_)(),{permissions:je,isLoading:et}=(0,oe.Dq)(te),f=h=>{L(),se(!0),W(te?"willDuplicateRole":"willCreateNewRole"),Promise.resolve((0,Z.request)("/admin/roles",{method:"POST",body:h})).then(y=>Be(void 0,null,function*(){const{permissionsToSend:u}=ie.current.getPermissions();return W(te?"didDuplicateRole":"didCreateNewRole"),y.data.id&&!H()(u)&&(yield(0,Z.request)(`/admin/roles/${y.data.id}/permissions`,{method:"PUT",body:{permissions:u}})),y})).then(y=>{se(!1),re({type:"success",message:{id:"Settings.roles.created",defaultMessage:"created"}}),ee(`/settings/roles/${y.data.id}`)}).catch(y=>{Ke.error(y),se(!1),re({type:"warning",message:{id:"notification.error"}})}).finally(()=>{ae()})},g=`${x({id:"Settings.roles.form.created",defaultMessage:"Created"})} ${s()().format("LL")}`;return e.createElement(Ve.Main,null,e.createElement(Z.SettingsPageTitle,{name:"Roles"}),e.createElement(Je.Formik,{initialValues:{name:"",description:g},onSubmit:f,validationSchema:ze,validateOnChange:!1},({handleSubmit:h,values:y,errors:u,handleReset:m,handleChange:Y})=>e.createElement(Z.Form,{noValidate:!0},e.createElement(e.Fragment,null,e.createElement(Le.HeaderLayout,{primaryAction:e.createElement(j.Stack,{horizontal:!0,spacing:2},e.createElement(De.Button,{variant:"secondary",onClick:()=>{m(),ie.current.resetForm()},size:"L"},x({id:"app.components.Button.reset",defaultMessage:"Reset"})),e.createElement(De.Button,{onClick:h,loading:fe,size:"L"},x({id:"global.save",defaultMessage:"Save"}))),title:x({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:x({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"}),navigationAction:e.createElement(Z.Link,{startIcon:e.createElement(J(),null),to:"/settings/roles"},x({id:"global.back",defaultMessage:"Back"}))}),e.createElement(Le.ContentLayout,null,e.createElement(j.Stack,{spacing:6},e.createElement(X.Box,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(j.Stack,{spacing:4},e.createElement(z.Flex,{justifyContent:"space-between"},e.createElement(X.Box,null,e.createElement(X.Box,null,e.createElement(S.Typography,{fontWeight:"bold"},x({id:"global.details",defaultMessage:"Details"}))),e.createElement(X.Box,null,e.createElement(S.Typography,{variant:"pi",textColor:"neutral600"},x({id:"Settings.roles.form.description",defaultMessage:"Name and description of the role"})))),e.createElement(We,null,x({id:"Settings.roles.form.button.users-with-role",defaultMessage:"{number, plural, =0 {# users} one {# user} other {# users}} with this role"},{number:0}))),e.createElement(me.Grid,{gap:4},e.createElement(me.GridItem,{col:6},e.createElement(he.TextInput,{name:"name",error:u.name&&x({id:u.name}),label:x({id:"global.name",defaultMessage:"Name"}),onChange:Y,value:y.name})),e.createElement(me.GridItem,{col:6},e.createElement(ge.Textarea,{label:x({id:"global.description",defaultMessage:"Description"}),name:"description",error:u.description&&x({id:u.description}),onChange:Y},y.description))))),!xe&&!et?e.createElement(X.Box,{shadow:"filterShadow",hasRadius:!0},e.createElement(Fe.Z,{isFormDisabled:!1,ref:ie,permissions:je,layout:$e})):e.createElement(X.Box,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(Z.LoadingIndicatorPage,null))))))))},_e=()=>e.createElement(Z.CheckPagePermissions,{permissions:V.Z.settings.roles.create},e.createElement(He,null))},15272:(ne,R,a)=>{a.d(R,{Z:()=>E});const E=!1},57779:(ne,R,a)=>{a.d(R,{Z:()=>E});const E=!1},73071:(ne,R,a)=>{a.d(R,{Z:()=>E});const E=!1},43549:(ne,R,a)=>{a.d(R,{Z:()=>E});const E=!1},26107:(ne,R,a)=>{a.d(R,{Z:()=>E});const E=!1},45667:(ne,R,a)=>{a.d(R,{Z:()=>E});const E=!1},28099:(ne,R,a)=>{a.d(R,{Z:()=>re});var e=a(53547),E=a(68547),s=a(92699),Z=a(89326),X=a.n(Z),De=a(62982),Le=a.n(De),me=a(54279),Ve=a.n(me),z=a(56204),j=a.n(z),S=a(64459),he=a(35395),ge=a(19631),Q=a(80117),J=a(43546),Je=a(33483),qe=a(96486),ke=a(63852),Ee=a(97132),H=a(49656),Xe=a(63955),ye=a(32104),Ge=a(75365),Fe=a(56894),oe=a(8041);const V={roleToDelete:null,showModalConfirmButtonLoading:!1,shouldRefetchData:!1},Ue=(L,ae)=>(0,oe.default)(L,x=>{switch(ae.type){case"ON_REMOVE_ROLES":{x.showModalConfirmButtonLoading=!0;break}case"ON_REMOVE_ROLES_SUCCEEDED":{x.shouldRefetchData=!0,x.roleToDelete=null;break}case"RESET_DATA_TO_DELETE":{x.shouldRefetchData=!1,x.roleToDelete=null,x.showModalConfirmButtonLoading=!1;break}case"SET_ROLE_TO_DELETE":{x.roleToDelete=ae.id;break}default:return x}});var ze=(L,ae,x)=>new Promise((fe,se)=>{var ee=$=>{try{W(x.next($))}catch(te){se(te)}},ie=$=>{try{W(x.throw($))}catch(te){se(te)}},W=$=>$.done?fe($.value):Promise.resolve($.value).then(ee,ie);W((x=x.apply(L,ae)).next())});const Ke=()=>{(0,E.useFocusWhenNavigate)();const{isLoading:L,allowedActions:{canCreate:ae,canDelete:x,canRead:fe,canUpdate:se}}=(0,E.useRBAC)(s.Z.settings.roles),{getData:ee,roles:ie,isLoading:W}=(0,ye.bF)(!1),[{query:$}]=(0,E.useQueryParams)(),te=($==null?void 0:$._q)||"",xe=(0,ke.ZP)(ie,te,{keys:["name","description"]});return(0,e.useEffect)(()=>{!L&&fe&&ee()},[L,fe,ee]),{isLoadingForPermissions:L,canCreate:ae,canDelete:x,canRead:fe,canUpdate:se,isLoading:W,getData:ee,sortedRoles:xe,roles:ie}},Be=({getData:L,canCreate:ae,canDelete:x,canUpdate:fe})=>{const{formatMessage:se}=(0,Ee.useIntl)(),ee=(0,E.useNotification)(),[ie,W]=(0,e.useState)(!1),{push:$}=(0,H.useHistory)(),[{selectedRoles:te,showModalConfirmButtonLoading:xe,roleToDelete:$e},je]=(0,e.useReducer)(Ue,V),et=()=>ze(void 0,null,function*(){try{je({type:"ON_REMOVE_ROLES"}),yield Xe.be.post("/admin/roles/batch-delete",{ids:[$e]}),yield L(),je({type:"RESET_DATA_TO_DELETE"})}catch(G){const ce=(0,qe.get)(G,["response","payload","data","ids"],null);if(ce&&Array.isArray(ce)){const U=ce.join(`
`);ee({type:"warning",message:U})}else ee({type:"warning",message:{id:"notification.error"}})}y()}),f=(0,e.useCallback)(G=>{$(`/settings/roles/duplicate/${G}`)},[$]),g=()=>$("/settings/roles/new"),h=(0,e.useCallback)(G=>{je({type:"SET_ROLE_TO_DELETE",id:G}),y()},[]),y=()=>W(G=>!G),u=(0,e.useCallback)(G=>{$(`/settings/roles/${G}`)},[$]),m=(0,e.useCallback)((G,ce)=>{G.preventDefault(),G.stopPropagation(),ce.usersCount?ee({type:"info",message:{id:"Roles.ListPage.notification.delete-not-allowed"}}):h(ce.id)},[ee,h]),Y=(0,e.useCallback)((G,ce)=>{G.preventDefault(),G.stopPropagation(),f(ce.id)},[f]),le=(0,e.useCallback)(G=>[...ae?[{onClick:ce=>Y(ce,G),label:se({id:"app.utils.duplicate",defaultMessage:"Duplicate"}),icon:e.createElement(Ve(),null)}]:[],...fe?[{onClick:()=>u(G.id),label:se({id:"app.utils.edit",defaultMessage:"Edit"}),icon:e.createElement(j(),null)}]:[],...x?[{onClick:ce=>m(ce,G),label:se({id:"global.delete",defaultMessage:"Delete"}),icon:e.createElement(Le(),null)}]:[]],[se,m,Y,u,ae,fe,x]);return{handleNewRoleClick:g,getIcons:le,selectedRoles:te,isWarningDeleteAllOpened:ie,showModalConfirmButtonLoading:xe,handleToggleModal:y,handleDeleteData:et}},He=()=>{const{formatMessage:L}=(0,Ee.useIntl)(),{isLoadingForPermissions:ae,canCreate:x,canRead:fe,canDelete:se,canUpdate:ee,isLoading:ie,getData:W,sortedRoles:$}=Ke(),{handleNewRoleClick:te,getIcons:xe,isWarningDeleteAllOpened:$e,showModalConfirmButtonLoading:je,handleToggleModal:et,handleDeleteData:f}=Be({getData:W,canCreate:x,canDelete:se,canUpdate:ee}),g=$.length+1,h=6;if(ae)return e.createElement(Q.Main,null,e.createElement(E.LoadingIndicatorPage,null));const y=L({id:"global.roles",defaultMessage:"roles"});return e.createElement(Q.Main,null,e.createElement(E.SettingsPageTitle,{name:"Roles"}),e.createElement(he.HeaderLayout,{primaryAction:x?e.createElement(S.Button,{onClick:te,startIcon:e.createElement(X(),null),size:"L"},L({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})):null,title:y,subtitle:L({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),as:"h2"}),fe&&e.createElement(he.ActionLayout,{startActions:e.createElement(E.SearchURLQuery,{label:L({id:"app.component.search.label",defaultMessage:"Search for {target}"},{target:y})})}),fe&&e.createElement(he.ContentLayout,null,e.createElement(J.Table,{colCount:h,rowCount:g,footer:x?e.createElement(J.TFooter,{onClick:te,icon:e.createElement(X(),null)},L({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})):null},e.createElement(J.Thead,null,e.createElement(J.Tr,null,e.createElement(J.Th,null,e.createElement(Je.Typography,{variant:"sigma",textColor:"neutral600"},L({id:"global.name",defaultMessage:"Name"}))),e.createElement(J.Th,null,e.createElement(Je.Typography,{variant:"sigma",textColor:"neutral600"},L({id:"global.description",defaultMessage:"Description"}))),e.createElement(J.Th,null,e.createElement(Je.Typography,{variant:"sigma",textColor:"neutral600"},L({id:"global.users",defaultMessage:"Users"}))),e.createElement(J.Th,null,e.createElement(ge.VisuallyHidden,null,L({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(J.Tbody,null,$==null?void 0:$.map(u=>e.createElement(Fe.Z,{key:u.id,id:u.id,name:u.name,description:u.description,usersCount:u.usersCount,icons:xe(u)})))),!g&&!ie&&e.createElement(Ge.Z,null)),e.createElement(E.ConfirmDialog,{isOpen:$e,onConfirm:f,isConfirmButtonLoading:je,onToggleDialog:et}))},re=()=>e.createElement(E.CheckPagePermissions,{permissions:s.Z.settings.roles.main},e.createElement(He,null))},49475:(ne,R,a)=>{a.d(R,{Z:()=>Z});var e=(X,De,Le)=>new Promise((me,Ve)=>{var z=he=>{try{S(Le.next(he))}catch(ge){Ve(ge)}},j=he=>{try{S(Le.throw(he))}catch(ge){Ve(ge)}},S=he=>he.done?me(he.value):Promise.resolve(he.value).then(z,j);S((Le=Le.apply(X,De)).next())});const Z=[...strapi.features.isEnabled(strapi.features.SSO)?[{Component:()=>e(void 0,null,function*(){return yield a.e(302).then(a.bind(a,6688))}),to:"/settings/single-sign-on",exact:!0}]:[]]},12285:(ne,R,a)=>{ne.exports=a.p+"c3de6118ef47086ad05c.png"},31652:(ne,R,a)=>{ne.exports=a.p+"bd81ba6c07827282255d.png"}}]);
