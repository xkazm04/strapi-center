"use strict";(self.webpackChunkstrapi=self.webpackChunkstrapi||[]).push([[5895],{34759:(ae,D,a)=>{a.r(D),a.d(D,{SettingsPage:()=>je,default:()=>et});var e=a(53547),E=a(68547),s=a(49656),U=a(35395),X=a(97132),De=a(15482),Le=a(32104),de=a(58836),Ue=a(80117),z=a(94117),k=a(39272),P=a(33483),ge=a(9524),pe=a(56156),q=a(74657),_=a.n(q);const Je=()=>{const{formatMessage:f}=(0,X.useIntl)();(0,E.useFocusWhenNavigate)();const g=(0,E.useAppInfos)(),{shouldUpdateStrapi:h,latestStrapiReleaseTag:C,strapiVersion:u}=g,d=g.communityEdition?"app.components.UpgradePlanModal.text-ce":"app.components.UpgradePlanModal.text-ee";return e.createElement(U.Layout,null,e.createElement(E.SettingsPageTitle,{name:"Application"}),e.createElement(Ue.Main,null,e.createElement(U.HeaderLayout,{title:f({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:f({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"})}),e.createElement(U.ContentLayout,null,e.createElement(z.Box,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:7,paddingBottom:7,paddingRight:6,paddingLeft:6},e.createElement(ge.Stack,{spacing:5},e.createElement(P.Typography,{variant:"delta",as:"h3"},f({id:"global.details",defaultMessage:"Details"})),e.createElement(k.Grid,{paddingTop:1},e.createElement(k.GridItem,{col:6,s:12},e.createElement(P.Typography,{variant:"sigma",textColor:"neutral600"},f({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})),e.createElement(P.Typography,{as:"p"},"v",u),e.createElement(pe.Link,{href:g.communityEdition?"https://discord.strapi.io":"https://support.strapi.io/support/home",endIcon:e.createElement(_(),null)},f({id:"Settings.application.get-help",defaultMessage:"Get help"}))),e.createElement(k.GridItem,{col:6,s:12},e.createElement(P.Typography,{variant:"sigma",textColor:"neutral600"},f({id:"Settings.application.edition-title",defaultMessage:"current plan"})),e.createElement(P.Typography,{as:"p"},f({id:d,defaultMessage:`${g.communityEdition?"Community Edition":"Enterprise Edition"}`})))),e.createElement(k.Grid,{paddingTop:1},e.createElement(k.GridItem,{col:6,s:12},h&&e.createElement(pe.Link,{href:`https://github.com/strapi/strapi/releases/tag/${C}`,endIcon:e.createElement(_(),null)},f({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"}))),e.createElement(k.GridItem,{col:6,s:12},e.createElement(pe.Link,{href:"https://strapi.io/pricing-self-hosted",endIcon:e.createElement(_(),null)},f({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})))),e.createElement(z.Box,{paddingTop:1},e.createElement(P.Typography,{variant:"sigma",textColor:"neutral600"},f({id:"Settings.application.node-version",defaultMessage:"node version"})),e.createElement(P.Typography,{as:"p"},g.nodeVersion)))))))};var ke=a(94654),ve=a.n(ke);const Xe=f=>ve()(f,h=>h.links).map(h=>(0,de.ot)(h.Component,h.to,h.exact||!1)),We=f=>f.filter(g=>!g.links.every(h=>h.isDisplayed===!1));var Fe=a(42982),re=a(71002),Z=a(15861);function F(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */F=function(){return f};var f={},g=Object.prototype,h=g.hasOwnProperty,C=typeof Symbol=="function"?Symbol:{},u=C.iterator||"@@iterator",d=C.asyncIterator||"@@asyncIterator",ee=C.toStringTag||"@@toStringTag";function te(y,p,T){return Object.defineProperty(y,p,{value:T,enumerable:!0,configurable:!0,writable:!0}),y[p]}try{te({},"")}catch(y){te=function(T,O,L){return T[O]=L}}function V(y,p,T,O){var L=p&&p.prototype instanceof yt?p:yt,j=Object.create(L.prototype),ie=new Et(O||[]);return j._invoke=function(ze,Pe,ne){var Te="suspendedStart";return function(Ye,At){if(Te==="executing")throw new Error("Generator is already running");if(Te==="completed"){if(Ye==="throw")throw At;return Pt()}for(ne.method=Ye,ne.arg=At;;){var Dt=ne.delegate;if(Dt){var nt=Ct(Dt,ne);if(nt){if(nt===G)continue;return nt}}if(ne.method==="next")ne.sent=ne._sent=ne.arg;else if(ne.method==="throw"){if(Te==="suspendedStart")throw Te="completed",ne.arg;ne.dispatchException(ne.arg)}else ne.method==="return"&&ne.abrupt("return",ne.arg);Te="executing";var gt=se(ze,Pe,ne);if(gt.type==="normal"){if(Te=ne.done?"completed":"suspendedYield",gt.arg===G)continue;return{value:gt.arg,done:ne.done}}gt.type==="throw"&&(Te="completed",ne.method="throw",ne.arg=gt.arg)}}}(y,T,ie),j}function se(y,p,T){try{return{type:"normal",arg:y.call(p,T)}}catch(O){return{type:"throw",arg:O}}}f.wrap=V;var G={};function yt(){}function ct(){}function tt(){}var ut={};te(ut,u,function(){return this});var dt=Object.getPrototypeOf,rt=dt&&dt(dt(bt([])));rt&&rt!==g&&h.call(rt,u)&&(ut=rt);var st=tt.prototype=yt.prototype=Object.create(ut);function pt(y){["next","throw","return"].forEach(function(p){te(y,p,function(T){return this._invoke(p,T)})})}function vt(y,p){function T(L,j,ie,ze){var Pe=se(y[L],y,j);if(Pe.type!=="throw"){var ne=Pe.arg,Te=ne.value;return Te&&(0,re.Z)(Te)=="object"&&h.call(Te,"__await")?p.resolve(Te.__await).then(function(Ye){T("next",Ye,ie,ze)},function(Ye){T("throw",Ye,ie,ze)}):p.resolve(Te).then(function(Ye){ne.value=Ye,ie(ne)},function(Ye){return T("throw",Ye,ie,ze)})}ze(Pe.arg)}var O;this._invoke=function(L,j){function ie(){return new p(function(ze,Pe){T(L,j,ze,Pe)})}return O=O?O.then(ie,ie):ie()}}function Ct(y,p){var T=y.iterator[p.method];if(T===void 0){if(p.delegate=null,p.method==="throw"){if(y.iterator.return&&(p.method="return",p.arg=void 0,Ct(y,p),p.method==="throw"))return G;p.method="throw",p.arg=new TypeError("The iterator does not provide a 'throw' method")}return G}var O=se(T,y.iterator,p.arg);if(O.type==="throw")return p.method="throw",p.arg=O.arg,p.delegate=null,G;var L=O.arg;return L?L.done?(p[y.resultName]=L.value,p.next=y.nextLoc,p.method!=="return"&&(p.method="next",p.arg=void 0),p.delegate=null,G):L:(p.method="throw",p.arg=new TypeError("iterator result is not an object"),p.delegate=null,G)}function Rt(y){var p={tryLoc:y[0]};1 in y&&(p.catchLoc=y[1]),2 in y&&(p.finallyLoc=y[2],p.afterLoc=y[3]),this.tryEntries.push(p)}function mt(y){var p=y.completion||{};p.type="normal",delete p.arg,y.completion=p}function Et(y){this.tryEntries=[{tryLoc:"root"}],y.forEach(Rt,this),this.reset(!0)}function bt(y){if(y){var p=y[u];if(p)return p.call(y);if(typeof y.next=="function")return y;if(!isNaN(y.length)){var T=-1,O=function L(){for(;++T<y.length;)if(h.call(y,T))return L.value=y[T],L.done=!1,L;return L.value=void 0,L.done=!0,L};return O.next=O}}return{next:Pt}}function Pt(){return{value:void 0,done:!0}}return ct.prototype=tt,te(st,"constructor",tt),te(tt,"constructor",ct),ct.displayName=te(tt,ee,"GeneratorFunction"),f.isGeneratorFunction=function(y){var p=typeof y=="function"&&y.constructor;return!!p&&(p===ct||(p.displayName||p.name)==="GeneratorFunction")},f.mark=function(y){return Object.setPrototypeOf?Object.setPrototypeOf(y,tt):(y.__proto__=tt,te(y,ee,"GeneratorFunction")),y.prototype=Object.create(st),y},f.awrap=function(y){return{__await:y}},pt(vt.prototype),te(vt.prototype,d,function(){return this}),f.AsyncIterator=vt,f.async=function(y,p,T,O,L){L===void 0&&(L=Promise);var j=new vt(V(y,p,T,O),L);return f.isGeneratorFunction(p)?j:j.next().then(function(ie){return ie.done?ie.value:j.next()})},pt(st),te(st,ee,"Generator"),te(st,u,function(){return this}),te(st,"toString",function(){return"[object Generator]"}),f.keys=function(y){var p=[];for(var T in y)p.push(T);return p.reverse(),function O(){for(;p.length;){var L=p.pop();if(L in y)return O.value=L,O.done=!1,O}return O.done=!0,O}},f.values=bt,Et.prototype={constructor:Et,reset:function(p){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(mt),!p)for(var T in this)T.charAt(0)==="t"&&h.call(this,T)&&!isNaN(+T.slice(1))&&(this[T]=void 0)},stop:function(){this.done=!0;var p=this.tryEntries[0].completion;if(p.type==="throw")throw p.arg;return this.rval},dispatchException:function(p){if(this.done)throw p;var T=this;function O(ne,Te){return ie.type="throw",ie.arg=p,T.next=ne,Te&&(T.method="next",T.arg=void 0),!!Te}for(var L=this.tryEntries.length-1;L>=0;--L){var j=this.tryEntries[L],ie=j.completion;if(j.tryLoc==="root")return O("end");if(j.tryLoc<=this.prev){var ze=h.call(j,"catchLoc"),Pe=h.call(j,"finallyLoc");if(ze&&Pe){if(this.prev<j.catchLoc)return O(j.catchLoc,!0);if(this.prev<j.finallyLoc)return O(j.finallyLoc)}else if(ze){if(this.prev<j.catchLoc)return O(j.catchLoc,!0)}else{if(!Pe)throw new Error("try statement without catch or finally");if(this.prev<j.finallyLoc)return O(j.finallyLoc)}}}},abrupt:function(p,T){for(var O=this.tryEntries.length-1;O>=0;--O){var L=this.tryEntries[O];if(L.tryLoc<=this.prev&&h.call(L,"finallyLoc")&&this.prev<L.finallyLoc){var j=L;break}}j&&(p==="break"||p==="continue")&&j.tryLoc<=T&&T<=j.finallyLoc&&(j=null);var ie=j?j.completion:{};return ie.type=p,ie.arg=T,j?(this.method="next",this.next=j.finallyLoc,G):this.complete(ie)},complete:function(p,T){if(p.type==="throw")throw p.arg;return p.type==="break"||p.type==="continue"?this.next=p.arg:p.type==="return"?(this.rval=this.arg=p.arg,this.method="return",this.next="end"):p.type==="normal"&&T&&(this.next=T),G},finish:function(p){for(var T=this.tryEntries.length-1;T>=0;--T){var O=this.tryEntries[T];if(O.finallyLoc===p)return this.complete(O.completion,O.afterLoc),mt(O),G}},catch:function(p){for(var T=this.tryEntries.length-1;T>=0;--T){var O=this.tryEntries[T];if(O.tryLoc===p){var L=O.completion;if(L.type==="throw"){var j=L.arg;mt(O)}return j}}throw new Error("illegal catch attempt")},delegateYield:function(p,T,O){return this.delegate={iterator:bt(p),resultName:T,nextLoc:O},this.method==="next"&&(this.arg=void 0),G}},f}var xe=function(){return window&&window.strapi&&window.strapi.isEE?a(18290).Z:a(56368).Z}(),qe=function(){return window&&window.strapi&&window.strapi.isEE?a(28099).Z:a(73044).Z}(),Ke=[{Component:function(){return{default:qe}},to:"/settings/roles",exact:!0},{Component:function(){return{default:xe}},to:"/settings/roles/duplicate/:id",exact:!0},{Component:function(){return{default:xe}},to:"/settings/roles/new",exact:!0},{Component:function(){var f=(0,Z.Z)(F().mark(function h(){var C;return F().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,a.e(2544).then(a.bind(a,50287));case 2:return C=d.sent,d.abrupt("return",C);case 4:case"end":return d.stop()}},h)}));function g(){return f.apply(this,arguments)}return g}(),to:"/settings/roles/:id",exact:!0},{Component:function(){var f=(0,Z.Z)(F().mark(function h(){var C;return F().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,a.e(5199).then(a.bind(a,61322));case 2:return C=d.sent,d.abrupt("return",C);case 4:case"end":return d.stop()}},h)}));function g(){return f.apply(this,arguments)}return g}(),to:"/settings/users",exact:!0},{Component:function(){var f=(0,Z.Z)(F().mark(function h(){var C;return F().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,a.e(4263).then(a.bind(a,86294));case 2:return C=d.sent,d.abrupt("return",C);case 4:case"end":return d.stop()}},h)}));function g(){return f.apply(this,arguments)}return g}(),to:"/settings/users/:id",exact:!0},{Component:function(){var f=(0,Z.Z)(F().mark(function h(){var C;return F().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Promise.all([a.e(8252),a.e(5162)]).then(a.bind(a,2937));case 2:return C=d.sent,d.abrupt("return",C);case 4:case"end":return d.stop()}},h)}));function g(){return f.apply(this,arguments)}return g}(),to:"/settings/webhooks/create",exact:!0},{Component:function(){var f=(0,Z.Z)(F().mark(function h(){var C;return F().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Promise.all([a.e(8252),a.e(5162)]).then(a.bind(a,27103));case 2:return C=d.sent,d.abrupt("return",C);case 4:case"end":return d.stop()}},h)}));function g(){return f.apply(this,arguments)}return g}(),to:"/settings/webhooks/:id",exact:!0},{Component:function(){var f=(0,Z.Z)(F().mark(function h(){var C;return F().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,a.e(4121).then(a.bind(a,77967));case 2:return C=d.sent,d.abrupt("return",C);case 4:case"end":return d.stop()}},h)}));function g(){return f.apply(this,arguments)}return g}(),to:"/settings/webhooks",exact:!0},{Component:function(){var f=(0,Z.Z)(F().mark(function h(){var C;return F().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,a.e(8056).then(a.bind(a,81666));case 2:return C=d.sent,d.abrupt("return",C);case 4:case"end":return d.stop()}},h)}));function g(){return f.apply(this,arguments)}return g}(),to:"/settings/api-tokens",exact:!0},{Component:function(){var f=(0,Z.Z)(F().mark(function h(){var C;return F().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,a.e(4299).then(a.bind(a,1424));case 2:return C=d.sent,d.abrupt("return",C);case 4:case"end":return d.stop()}},h)}));function g(){return f.apply(this,arguments)}return g}(),to:"/settings/api-tokens/create",exact:!0},{Component:function(){var f=(0,Z.Z)(F().mark(function h(){var C;return F().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,a.e(92).then(a.bind(a,51037));case 2:return C=d.sent,d.abrupt("return",C);case 4:case"end":return d.stop()}},h)}));function g(){return f.apply(this,arguments)}return g}(),to:"/settings/api-tokens/:id",exact:!0}];const Be=Ke;var $e=function(){return window&&window.strapi&&window.strapi.isEE?a(49475).Z:a(73258).Z}();const He=[].concat((0,Fe.Z)($e),(0,Fe.Z)(Be));var Ze=a(29491),_e=a(45697),A=a.n(_e),me=Object.defineProperty,W=Object.defineProperties,$=Object.getOwnPropertyDescriptors,ce=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,Q=(f,g,h)=>g in f?me(f,g,{enumerable:!0,configurable:!0,writable:!0,value:h}):f[g]=h,w=(f,g)=>{for(var h in g||(g={}))Y.call(g,h)&&Q(f,h,g[h]);if(ce)for(var h of ce(g))fe.call(g,h)&&Q(f,h,g[h]);return f},J=(f,g)=>W(f,$(g));const be=({menu:f})=>{const{formatMessage:g}=(0,X.useIntl)(),C=We(f).map(d=>J(w({},d),{title:d.intlLabel,links:d.links.map(ee=>J(w({},ee),{title:ee.intlLabel,name:ee.id}))})),u=g({id:"global.settings",defaultMessage:"Settings"});return e.createElement(Ze.SubNav,{ariaLabel:u},e.createElement(Ze.SubNavHeader,{label:u}),e.createElement(Ze.SubNavSections,null,C.map(d=>e.createElement(Ze.SubNavSection,{key:d.id,label:g(d.intlLabel)},d.links.map(ee=>e.createElement(Ze.SubNavLink,{withBullet:ee.hasNotification,to:ee.to,key:ee.id},g(ee.intlLabel)))))))};be.propTypes={menu:A().array.isRequired};const Ve=be;function je(){const{settingId:f}=(0,s.useParams)(),{settings:g}=(0,E.useStrapiApp)(),{formatMessage:h}=(0,X.useIntl)(),{isLoading:C,menu:u}=(0,Le.Te)(),d=(0,e.useMemo)(()=>(0,de.WW)(He.map(({to:V,Component:se,exact:G})=>(0,de.ot)(se,V,G))),[]),ee=Xe(g);if(C)return e.createElement(E.LoadingIndicatorPage,null);if(!f)return e.createElement(s.Redirect,{to:"/settings/application-infos"});const te=h({id:"global.settings",defaultMessage:"Settings"});return e.createElement(U.Layout,{sideNav:e.createElement(Ve,{menu:u})},e.createElement(De.Helmet,{title:te}),e.createElement(s.Switch,null,e.createElement(s.Route,{path:"/settings/application-infos",component:Je,exact:!0}),d,ee))}const et=(0,e.memo)(je)},56368:(ae,D,a)=>{a.d(D,{Z:()=>U});var e=a(53547),E=a(49656);const U=()=>e.createElement(E.Redirect,{to:"/404"})},14934:(ae,D,a)=>{a.d(D,{Z:()=>E});const E=!0},48496:(ae,D,a)=>{a.d(D,{Z:()=>E});const E=!0},93485:(ae,D,a)=>{a.d(D,{Z:()=>E});const E=!0},55632:(ae,D,a)=>{a.d(D,{Z:()=>E});const E=!0},39672:(ae,D,a)=>{a.d(D,{Z:()=>E});const E=!0},79160:(ae,D,a)=>{a.d(D,{Z:()=>Xa});var e=a(53547),E=a(45697),s=a.n(E),U=a(68547),X=a(1738),De=a(18721),Le=a.n(De),de=a(41609),Ue=a.n(de),z=a(97132),k=a(94117),P=a(16384),ge=a(89734),pe=a.n(ge),q=a(70885),_=a(32080),Qe=a.n(_),Je=a(80499),ke=a.n(Je),ve=a(46458),H=a(40264),Xe=a(27361),Ce=a.n(Xe),We=a(57557),Fe=a.n(We),re=a(32104),Z=a(17581),F=a.n(Z),xe=a(64459);const qe=P.default.div`
  position: relative;

  ${({hasConditions:o,disabled:t,theme:n})=>o&&`
    &:before {
      content: '';
      position: absolute;
      top: -3px;
      left: -10px;
      width: 6px;
      height: 6px;
      border-radius: ${20/16}rem;;
      background: ${t?n.colors.neutral100:n.colors.primary600};
    }
  `}
`,Ke=({onClick:o,className:t,hasConditions:n,variant:r})=>{const{formatMessage:i}=(0,z.useIntl)();return e.createElement(qe,{hasConditions:n,className:t},e.createElement(xe.Button,{variant:r,startIcon:e.createElement(F(),null),onClick:o},i({id:"global.settings",defaultMessage:"Settings"})))};Ke.defaultProps={className:null,hasConditions:!1,variant:"tertiary"},Ke.propTypes={onClick:s().func.isRequired,className:s().string,hasConditions:s().bool,variant:s().string};const Be=(0,P.default)(Ke)``;var $e=a(97833),He=a(9524),Ze=a(68991),_e=a(44981),A=a(33483),me=a(8041),W=a(7739),$=a.n(W),ce=a(11700),Y=a.n(ce),fe=a(4942),Q=a(42982),w=a(2632);const J=`${120/16}rem`,be=`${200/16}rem`,Ve=`${53/16}rem`;function je(o,t){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),n.push.apply(n,r)}return n}function et(o){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?je(Object(n),!0).forEach(function(r){(0,fe.Z)(o,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(n,r))})}return o}var f=function(){return window&&window.strapi&&window.strapi.isEE?a(15272).Z:a(14934).Z}(),g=(0,P.default)(H.Flex).withConfig({displayName:"ActionRow__FlexWrapper",componentId:"sc-1bqpgdl-0"})(["height:",";"],Ve),h=function(t){var n=t.arrayOfOptionsGroupedByCategory,r=t.isFormDisabled,i=t.isGrey,l=t.label,c=t.name,m=t.onChange,v=t.value,b=(0,z.useIntl)(),S=b.formatMessage,x=n.reduce(function(M,B){var R=(0,q.Z)(B,2),I=R[0],K=R[1],le={label:Y()(I),children:K.map(function(Se){return{label:Se.displayName,value:Se.id}})};return[].concat((0,Q.Z)(M),[le])},[]),N=Object.values(v).map(function(M){return Object.entries(M).filter(function(B){var R=(0,q.Z)(B,2),I=R[1];return I}).map(function(B){var R=(0,q.Z)(B,1),I=R[0];return I})}).flat(),oe=function(B){var R=(0,q.Z)(n,1),I=(0,q.Z)(R[0],2),K=I[1],le=K.reduce(function(Se,he){return et((0,fe.Z)({},he.id,B.includes(he.id)),Se)},{});m(c,le)};return e.createElement(g,{as:"li",background:i?"neutral100":"neutral0"},e.createElement(H.Flex,{paddingLeft:6,style:{width:180}},e.createElement(A.Typography,{variant:"sigma",textColor:"neutral600"},S({id:"Settings.permissions.conditions.can",defaultMessage:"Can"}),"\xA0"),e.createElement(A.Typography,{variant:"sigma",title:l,textColor:"primary600",ellipsis:!0},S({id:"Settings.roles.form.permissions.".concat(l.toLowerCase()),defaultMessage:l})),e.createElement(A.Typography,{variant:"sigma",textColor:"neutral600"},"\xA0",S({id:"Settings.permissions.conditions.when",defaultMessage:"When"}))),e.createElement(k.Box,{style:{maxWidth:430,width:"100%"}},e.createElement(w.MultiSelectNested,{id:c,customizeContent:function(B){return"".concat(B.length," currently selected")},onChange:oe,value:N,options:x,disabled:r||f})))};h.propTypes={arrayOfOptionsGroupedByCategory:s().array.isRequired,isFormDisabled:s().bool.isRequired,isGrey:s().bool.isRequired,label:s().string.isRequired,name:s().string.isRequired,value:s().object.isRequired,onChange:s().func.isRequired};const C=h;var u=a(96486);const d=(o,t)=>o.reduce((n,r)=>(n[r.id]=(0,u.get)(t,r.id,!1),n),{}),ee=(o,t)=>o.reduce((n,r)=>{const[i,l]=r,c=d(l,t);return n[i]=c,n},{}),V=(o,t,n)=>o.reduce((r,i)=>{const l=(0,u.get)(t,[...i.pathToConditionsObject,"conditions"],{}),c=ee(n,l);return r[i.pathToConditionsObject.join("..")]=c,r},{});var se=Object.defineProperty,G=Object.getOwnPropertySymbols,yt=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable,tt=(o,t,n)=>t in o?se(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,ut=(o,t)=>{for(var n in t||(t={}))yt.call(t,n)&&tt(o,n,t[n]);if(G)for(var n of G(t))ct.call(t,n)&&tt(o,n,t[n]);return o};const dt=({actions:o,headerBreadCrumbs:t,isFormDisabled:n,onClosed:r,onToggle:i})=>{const{formatMessage:l}=(0,z.useIntl)(),{availableConditions:c,modifiedData:m,onChangeConditions:v}=(0,re.$_)(),b=(0,e.useMemo)(()=>Object.entries($()(c,"category")),[c]),S=o.filter(({isDisplayed:R,hasSomeActionsSelected:I,hasAllActionsSelected:K})=>R&&(I||K)),x=(0,e.useMemo)(()=>V(S,m,b),[S,m,b]),[N,oe]=(0,e.useState)(x),M=(R,I)=>{oe((0,me.default)(K=>{K[R]||(K[R]={}),K[R].default||(K[R].default={}),K[R].default=I}))},B=()=>{const R=Object.entries(N).reduce((I,K)=>{const[le,Se]=K,he=Object.values(Se).reduce((Ae,Ie)=>ut(ut({},Ae),Ie),{});return I[le]=he,I},{});v(R),i()};return e.createElement(Ze.ModalLayout,{labelledBy:"condition-modal-breadcrumbs",onClose:r},e.createElement(Ze.ModalHeader,null,e.createElement(_e.Breadcrumbs,{id:"condition-modal-breadcrumbs",label:t.join(", ")},t.map(R=>e.createElement(_e.Crumb,{key:R},Y()(l({id:R,defaultMessage:R})))))),e.createElement(k.Box,{padding:8},e.createElement(He.Stack,{spacing:6},e.createElement(A.Typography,{variant:"beta",as:"h2"},l({id:"Settings.permissions.conditions.define-conditions",defaultMessage:"Define conditions"})),e.createElement(k.Box,null,e.createElement($e.Divider,null)),e.createElement(k.Box,null,S.length===0&&e.createElement(A.Typography,null,l({id:"Settings.permissions.conditions.no-actions",defaultMessage:"You first need to select actions (create, read, update, ...) before defining conditions on them."})),e.createElement("ul",null,S.map(({actionId:R,label:I,pathToConditionsObject:K},le)=>{const Se=K.join("..");return e.createElement(C,{key:R,arrayOfOptionsGroupedByCategory:b,label:I,isFormDisabled:n,isGrey:le%2===0,name:Se,onChange:M,value:Ce()(N,Se,{})})}))))),e.createElement(Ze.ModalFooter,{startActions:e.createElement(xe.Button,{variant:"tertiary",onClick:i},l({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(xe.Button,{onClick:B},l({id:"Settings.permissions.conditions.apply",defaultMessage:"Apply"}))}))};dt.propTypes={actions:s().arrayOf(s().shape({actionId:s().string.isRequired,checkboxName:s().string,hasSomeActionsSelected:s().bool.isRequired,hasAllActionsSelected:s().bool,isDisplayed:s().bool.isRequired,label:s().string})).isRequired,headerBreadCrumbs:s().arrayOf(s().string).isRequired,isFormDisabled:s().bool.isRequired,onClosed:s().func.isRequired,onToggle:s().func.isRequired};const rt=dt,pt=P.default.div`
  width: ${J};
`,Ct=(0,P.default)(H.Flex)`
  padding-right: ${({theme:o})=>o.spaces[2]};
  overflow: hidden;
  flex: 1;
  ${({isCollapsable:o})=>o&&"cursor: pointer;"}
`;var Rt=Object.defineProperty,mt=Object.getOwnPropertySymbols,Et=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,Pt=(o,t,n)=>t in o?Rt(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,y=(o,t)=>{for(var n in t||(t={}))Et.call(t,n)&&Pt(o,n,t[n]);if(mt)for(var n of mt(t))bt.call(t,n)&&Pt(o,n,t[n]);return o};const p=({children:o,isCollapsable:t,isActive:n,isFormDisabled:r,label:i,onChange:l,onClick:c,checkboxName:m,someChecked:v,value:b})=>{const{formatMessage:S}=(0,z.useIntl)();return e.createElement(H.Flex,{alignItems:"center",paddingLeft:6,style:{width:be,flexShrink:0}},e.createElement(k.Box,{paddingRight:2},e.createElement(ve.BaseCheckbox,{name:m,"aria-label":S({id:"Settings.permissions.select-all-by-permission",defaultMessage:"Select all {label} permissions"},{label:i}),disabled:r,onValueChange:x=>l({target:{name:m,value:x}}),indeterminate:v,value:b})),e.createElement(Ct,y({title:i,alignItems:"center",isCollapsable:t},t&&{onClick:c,"aria-expanded":n,onKeyDown:({key:x})=>(x==="Enter"||x===" ")&&c(),tabIndex:0,role:"button"}),e.createElement(A.Typography,{fontWeight:n?"bold":"",textColor:n?"primary600":"neutral800",ellipsis:!0},Y()(i)),o))};p.defaultProps={children:null,checkboxName:"",onChange:()=>{},value:!1,someChecked:!1,isCollapsable:!1},p.propTypes={checkboxName:s().string,children:s().node,label:s().string.isRequired,isCollapsable:s().bool,isFormDisabled:s().bool.isRequired,onChange:s().func,onClick:s().func.isRequired,someChecked:s().bool,value:s().bool,isActive:s().bool.isRequired};const T=(0,e.memo)(p),O=o=>(0,u.isObject)(o)?(0,u.flattenDeep)(Object.values(o).map(t=>(0,u.isObject)(t)?O(t):t)):[],L=O,ie=o=>o?Object.keys(o).reduce((t,n)=>(n!=="conditions"&&(t[n]=o[n]),t),{}):null,Pe=o=>{const t=ie(o),n=L(t);if(!n.length)return{hasAllActionsSelected:!1,hasSomeActionsSelected:!1};const r=n.every(l=>l),i=n.some(l=>l)&&!r;return{hasAllActionsSelected:r,hasSomeActionsSelected:i}},Te=(o,t,n)=>o.map(({actionId:r,isDisplayed:i,applyToProperties:l,label:c})=>{if(!i)return{actionId:r,hasSomeActionsSelected:!1,isDisplayed:i};const m=[...n.split(".."),r],v=(0,u.isEmpty)(l)?[...m,"properties","enabled"]:m,b=v.join(".."),S=(0,u.get)(t,[...m,"conditions"],null),x=L(S).some(B=>B);if((0,u.isEmpty)(l)){const B=(0,u.get)(t,v,!1);return{actionId:r,checkboxName:b,hasAllActionsSelected:B,hasConditions:x,hasSomeActionsSelected:B,isDisplayed:i,isParentCheckbox:!1,label:c,pathToConditionsObject:m}}const N=(0,u.get)(t,v,null),{hasAllActionsSelected:oe,hasSomeActionsSelected:M}=Pe(N);return{actionId:r,checkboxName:b,hasAllActionsSelected:oe,hasConditions:x,hasSomeActionsSelected:M,isDisplayed:i,isParentCheckbox:!0,label:c,pathToConditionsObject:m}});var Ye=a(40413),At=a.n(Ye);const nt=(0,P.default)(At())`
  display: none;
  width: ${10/16}rem;
  transform: rotate(${({$isActive:o})=>o?"180":"0"}deg);
  margin-left: ${({theme:o})=>o.spaces[2]};
`,Tt=o=>`
  ${A.Typography} {
    color: ${o.colors.primary600};
    font-weight: ${o.fontWeights.bold}
  }
  ${nt} {
    display: block;
    path {
      fill: ${o.colors.primary600}
    };
  }
`;var Gt=function(){return window&&window.strapi&&window.strapi.isEE?a(43549).Z:a(55632).Z}(),Ut=function o(t,n){return`
  `.concat(Kt,` {
    background-color: `).concat(t.colors.primary100,`;
    color: `).concat(t.colors.primary600,`;
    border-radius: `).concat(n?"2px 2px 0 0":"2px",`;
  }
  `).concat(Xt,` {
    display: flex;
  }
  `).concat(Be,` {
    display: block;
  }
  &:hover {
   `).concat(Tt(t),`
  }

  &:focus-within {
    `).concat(function(r){var i=r.theme,l=r.isActive;return o(i,l)},`
  }
  
`)},Kt=P.default.div.withConfig({displayName:"Collapse__Wrapper",componentId:"sc-132fji1-0"})(["flex:1;display:flex;align-items:center;height:",";background-color:",";border:1px solid transparent;"],Ve,function(o){var t=o.isGrey,n=o.theme;return t?n.colors.neutral100:n.colors.neutral0}),Yn=P.default.div.withConfig({displayName:"Collapse__BoxWrapper",componentId:"sc-132fji1-1"})(["display:inline-flex;min-width:100%;","{display:none;}"," &:hover{","}"],Be,function(o){var t=o.isActive,n=o.theme;return t&&Ut(n,t)},function(o){var t=o.theme,n=o.isActive;return Ut(t,n)}),Ht=(0,P.default)(H.Flex).withConfig({displayName:"Collapse__Cell",componentId:"sc-132fji1-2"})(["width:",";position:relative;"],J),Xt=(0,P.default)(k.Box).withConfig({displayName:"Collapse__Chevron",componentId:"sc-132fji1-3"})(["display:none;svg{width:11px;}*{fill:",";}"],function(o){var t=o.theme;return t.colors.primary600}),zt=P.default.span.withConfig({displayName:"Collapse__TinyDot",componentId:"sc-132fji1-4"})(["position:absolute;top:-6px;left:37px;width:6px;height:6px;border-radius:20px;background:",";"],function(o){var t=o.theme;return t.colors.primary600}),Qn=(0,P.default)(k.Box).withConfig({displayName:"Collapse__AbsoluteBox",componentId:"sc-132fji1-5"})(["position:absolute;right:9px;transform:translateY(10px);"]),Yt=function(t){var n=t.availableActions,r=t.isActive,i=t.isGrey,l=t.isFormDisabled,c=t.label,m=t.onClickToggle,v=t.pathToData,b=(0,e.useState)(!1),S=(0,q.Z)(b,2),x=S[0],N=S[1],oe=(0,z.useIntl)(),M=oe.formatMessage,B=(0,re.$_)(),R=B.modifiedData,I=B.onChangeParentCheckbox,K=B.onChangeSimpleCheckbox,le=function(){N(function(Ee){return!Ee})},Se=function(){N(!1)},he=Ce()(R,v.split(".."),{}),Ae=(0,e.useMemo)(function(){return Object.keys(he).reduce(function(ue,Ee){return ue[Ee]=Fe()(he[Ee],"conditions"),ue},{})},[he]),Ie=Pe(Ae),Re=Ie.hasAllActionsSelected,it=Ie.hasSomeActionsSelected,ye=(0,e.useMemo)(function(){return Te(n,R,v)},[n,R,v]),Me=ye.some(function(ue){var Ee=ue.hasConditions;return Ee});return e.createElement(Yn,{isActive:r},e.createElement(Kt,{isGrey:i},e.createElement(T,{isCollapsable:!0,isFormDisabled:l,label:c,checkboxName:v,onChange:I,onClick:m,someChecked:it,value:Re,isActive:r},e.createElement(Xt,{paddingLeft:2},r?e.createElement(ke(),null):e.createElement(Qe(),null))),e.createElement(H.Flex,{style:{flex:1}},ye.map(function(ue){var Ee=ue.actionId,Oe=ue.hasConditions,we=ue.hasAllActionsSelected,Ne=ue.hasSomeActionsSelected,at=ue.isDisplayed,Ge=ue.isParentCheckbox,ot=ue.checkboxName,ft=ue.label;return at?Ge?e.createElement(Ht,{key:Ee,justifyContent:"center",alignItems:"center"},Oe&&e.createElement(zt,null),e.createElement(ve.BaseCheckbox,{disabled:l||Gt,name:ot,"aria-label":M({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(ft," ").concat(c)}),onValueChange:function(lt){I({target:{name:ot,value:lt}})},indeterminate:Ne,value:we})):e.createElement(Ht,{key:Ee,justifyContent:"center",alignItems:"center"},Oe&&e.createElement(zt,null),e.createElement(ve.BaseCheckbox,{disabled:l||Gt,indeterminate:Oe,name:ot,onValueChange:function(lt){K({target:{name:ot,value:lt}})},value:we})):e.createElement(pt,{key:Ee})})),x&&e.createElement(rt,{headerBreadCrumbs:[c,"app.components.LeftMenuLinkContainer.settings"],actions:ye,isFormDisabled:l,onClosed:Se,onToggle:le})),e.createElement(Qn,null,e.createElement(Be,{onClick:le,hasConditions:Me})))};Yt.propTypes={availableActions:s().array.isRequired,isActive:s().bool.isRequired,isGrey:s().bool.isRequired,isFormDisabled:s().bool.isRequired,label:s().string.isRequired,onClickToggle:s().func.isRequired,pathToData:s().string.isRequired};const Jn=Yt,qn=(o,t)=>o.map(n=>{const r=Array.isArray(n.applyToProperties)&&n.applyToProperties.indexOf(t)!==-1&&n.isDisplayed;return{label:n.label,actionId:n.actionId,isActionRelatedToCurrentProperty:r}}),Qt=(0,P.default)(H.Flex)`
  width: ${J};
  flex-shrink: 0;
`,_n=(0,P.default)(H.Flex)`
  width: ${be};
  height: ${Ve};
  flex-shrink: 0;
`,Jt=({headers:o,label:t})=>{const{formatMessage:n}=(0,z.useIntl)(),r=n({id:"Settings.roles.form.permission.property-label",defaultMessage:"{label} permissions"},{label:t});return e.createElement(H.Flex,null,e.createElement(_n,{alignItems:"center",paddingLeft:6},e.createElement(A.Typography,{variant:"sigma",textColor:"neutral500"},r)),o.map(i=>i.isActionRelatedToCurrentProperty?e.createElement(Qt,{justifyContent:"center",key:i.label},e.createElement(A.Typography,{variant:"sigma",textColor:"neutral500"},n({id:`Settings.roles.form.permissions.${i.label.toLowerCase()}`,defaultMessage:i.label}))):e.createElement(Qt,{key:i.label})))};Jt.propTypes={headers:s().arrayOf(s().shape({label:s().string.isRequired,isActionRelatedToCurrentProperty:s().bool.isRequired})).isRequired,label:s().string.isRequired};const eo=Jt,to=P.default.span`
  color: ${({theme:o})=>o.colors.danger700};
  padding-left: ${({theme:o})=>o.spaces[1]}px;
`,qt=()=>e.createElement(to,null,"*");var no=Object.defineProperty,oo=Object.defineProperties,ao=Object.getOwnPropertyDescriptors,_t=Object.getOwnPropertySymbols,ro=Object.prototype.hasOwnProperty,so=Object.prototype.propertyIsEnumerable,en=(o,t,n)=>t in o?no(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,io=(o,t)=>{for(var n in t||(t={}))ro.call(t,n)&&en(o,n,t[n]);if(_t)for(var n of _t(t))so.call(t,n)&&en(o,n,t[n]);return o},lo=(o,t)=>oo(o,ao(t));const co=(o,t)=>o.map(n=>{const r=Array.isArray(n.subjects)&&n.subjects.indexOf(t)!==-1;return lo(io({},n),{isDisplayed:r})});var uo=a(87462),po=Object.defineProperty,tn=Object.getOwnPropertySymbols,mo=Object.prototype.hasOwnProperty,go=Object.prototype.propertyIsEnumerable,nn=(o,t,n)=>t in o?po(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,fo=(o,t)=>{for(var n in t||(t={}))mo.call(t,n)&&nn(o,n,t[n]);if(tn)for(var n of tn(t))go.call(t,n)&&nn(o,n,t[n]);return o};const ho=(0,P.default)(k.Box)`
  transform: translate(-4px, -12px);

  &:before {
    content: '';
    width: ${4/16}rem;
    height: ${12/16}rem;
    background: ${({theme:o})=>o.colors.primary200};
    display: block;
  }
`,yo=P.default.svg`
  position: relative;
  flex-shrink: 0;
  transform: translate(-0.5px, -1px);

  * {
    fill: ${({theme:o,color:t})=>o.colors[t]};
  }
`,Lt=o=>e.createElement(ho,null,e.createElement(yo,fo({width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.02477 14.7513C8.65865 17.0594 11.6046 18.6059 17.5596 18.8856C18.6836 18.9384 19.5976 19.8435 19.5976 20.9688V20.9688C19.5976 22.0941 18.6841 23.0125 17.5599 22.9643C10.9409 22.6805 6.454 20.9387 3.75496 17.1258C0.937988 13.1464 0.486328 7.39309 0.486328 0.593262H4.50974C4.50974 7.54693 5.06394 11.9813 7.02477 14.7513Z",fill:"#D9D8FF"})));Lt.defaultProps={fill:"primary200"},Lt.propTypes={fill:s().string};const vo=(0,e.memo)(Lt);var on=function(){return window&&window.strapi&&window.strapi.isEE?a(73071).Z:a(93485).Z}(),an=(0,P.default)(H.Flex).withConfig({displayName:"SubActionRow__Cell",componentId:"sc-7y8yzq-0"})(["width:",";position:relative;"],J),Co=(0,P.default)(H.Flex).withConfig({displayName:"SubActionRow__RowWrapper",componentId:"sc-7y8yzq-1"})(["height:",";"],Ve),Eo=(0,P.default)(k.Box).withConfig({displayName:"SubActionRow__Wrapper",componentId:"sc-7y8yzq-2"})(["padding-left:","rem;"],31/16),bo=(0,P.default)(k.Box).withConfig({displayName:"SubActionRow__LeftBorderTimeline",componentId:"sc-7y8yzq-3"})(["border-left:",";"],function(o){var t=o.isVisible,n=o.theme;return t?"4px solid ".concat(n.colors.primary200):"4px solid transparent"}),Po=(0,P.default)(H.Flex).withConfig({displayName:"SubActionRow__RowStyle",componentId:"sc-7y8yzq-4"})(["padding-left:",";width:","px;"," ",";"],function(o){var t=o.theme;return t.spaces[4]},function(o){var t=o.level;return 145-t*36},function(o){var t=o.isCollapsable,n=o.theme;return t&&`
      `.concat(nt,` {
        display: block;
        color: `).concat(n.colors.neutral100,`;
      }
      &:hover {
        `).concat(Tt(n),`
      }
  `)},function(o){var t=o.isActive,n=o.theme;return t&&Tt(n)}),To=P.default.div.withConfig({displayName:"SubActionRow__TopTimeline",componentId:"sc-7y8yzq-5"})(["padding-top:",";margin-top:",";width:","rem;background-color:",";border-top-left-radius:2px;border-top-right-radius:2px;"],function(o){var t=o.theme;return t.spaces[2]},function(o){var t=o.theme;return t.spaces[2]},4/16,function(o){var t=o.theme;return t.colors.primary200}),rn=function o(t){var n=t.childrenForm,r=t.isFormDisabled,i=t.recursiveLevel,l=t.pathToDataFromActionRow,c=t.propertyActions,m=t.parentName,v=t.propertyName,b=(0,z.useIntl)(),S=b.formatMessage,x=(0,re.$_)(),N=x.modifiedData,oe=x.onChangeParentCheckbox,M=x.onChangeSimpleCheckbox,B=(0,e.useState)(null),R=(0,q.Z)(B,2),I=R[0],K=R[1],le=function(Ae){K(function(Ie){return Ie===Ae?null:Ae})},Se=(0,e.useMemo)(function(){return I?n.find(function(he){var Ae=he.value;return Ae===I}):null},[I,n]);return e.createElement(Eo,null,e.createElement(To,null),n.map(function(he,Ae){var Ie=he.label,Re=he.value,it=he.required,ye=he.children,Me=Ae+1<n.length,ue=Array.isArray(ye),Ee=I===Re;return e.createElement(bo,{key:Re,isVisible:Me},e.createElement(Co,null,e.createElement(vo,{color:"primary200"}),e.createElement(H.Flex,{style:{flex:1}},e.createElement(Po,{level:i,isActive:Ee,isCollapsable:ue},e.createElement(Ct,(0,uo.Z)({alignItems:"center",isCollapsable:ue},ue&&{onClick:function(){return le(Re)},"aria-expanded":Ee,onKeyDown:function(we){var Ne=we.key;return(Ne==="Enter"||Ne===" ")&&le(Re)},tabIndex:0,role:"button"},{title:Ie}),e.createElement(A.Typography,{ellipsis:!0},Y()(Ie)),it&&e.createElement(qt,null),e.createElement(nt,{$isActive:Ee}))),e.createElement(H.Flex,{style:{flex:1}},c.map(function(Oe){var we=Oe.actionId,Ne=Oe.label,at=Oe.isActionRelatedToCurrentProperty;if(!at)return e.createElement(pt,{key:we});var Ge=[].concat((0,Q.Z)(l.split("..")),[we,"properties",v],(0,Q.Z)(m.split("..")),[Re]),ot=Ce()(N,Ge,!1);if(!ye)return e.createElement(an,{key:Ne,justifyContent:"center",alignItems:"center"},e.createElement(ve.BaseCheckbox,{disabled:r||on,name:Ge.join(".."),"aria-label":S({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(m," ").concat(Ie," ").concat(Ne)}),onValueChange:function(St){M({target:{name:Ge.join(".."),value:St}})},value:ot}));var ft=Pe(ot),ht=ft.hasAllActionsSelected,lt=ft.hasSomeActionsSelected;return e.createElement(an,{key:Ne,justifyContent:"center",alignItems:"center"},e.createElement(ve.BaseCheckbox,{key:Ne,disabled:r||on,name:Ge.join(".."),"aria-label":S({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(m," ").concat(Ie," ").concat(Ne)}),onValueChange:function(St){oe({target:{name:Ge.join(".."),value:St}})},value:ht,indeterminate:lt}))})))),Se&&Ee&&e.createElement(k.Box,{paddingBottom:2},e.createElement(o,{isFormDisabled:r,parentName:"".concat(m,"..").concat(Re),pathToDataFromActionRow:l,propertyActions:c,propertyName:v,recursiveLevel:i+1,childrenForm:Se.children})))}))};rn.propTypes={childrenForm:s().array.isRequired,isFormDisabled:s().bool.isRequired,parentName:s().string.isRequired,pathToDataFromActionRow:s().string.isRequired,propertyActions:s().array.isRequired,propertyName:s().string.isRequired,recursiveLevel:s().number.isRequired};const So=(0,e.memo)(rn),Ao=o=>o.reduce((n,r)=>(r.isActionRelatedToCurrentProperty&&n.push(r.actionId),n),[]),Oo=(o,t,n,r,i)=>{const c=Ao(o).reduce((m,v)=>{const b=[...n.split(".."),v,"properties",r,i],S=(0,u.get)(t,b,!1);return m[v]=S,m},{});return Pe(c)};var sn=function(){return window&&window.strapi&&window.strapi.isEE?a(57779).Z:a(48496).Z}(),ln=(0,P.default)(H.Flex).withConfig({displayName:"ActionRow__Cell",componentId:"sc-4agenc-0"})(["width:",";position:relative;"],J),Ro=(0,P.default)(H.Flex).withConfig({displayName:"ActionRow__Wrapper",componentId:"sc-4agenc-1"})(["height:",";flex:1;"," ",";"],Ve,function(o){var t=o.isCollapsable,n=o.theme;return t&&`
      `.concat(nt,` {
        display: block;
        color: `).concat(n.colors.neutral100,`;
      }
      &:hover {
        `).concat(Tt(n),`
      }
  `)},function(o){var t=o.isActive,n=o.theme;return t&&Tt(n)}),xt=function(t){var n=t.childrenForm,r=t.label,i=t.isFormDisabled,l=t.name,c=t.required,m=t.pathToData,v=t.propertyActions,b=t.propertyName,S=t.isOdd,x=(0,z.useIntl)(),N=x.formatMessage,oe=(0,e.useState)(null),M=(0,q.Z)(oe,2),B=M[0],R=M[1],I=(0,re.$_)(),K=I.modifiedData,le=I.onChangeCollectionTypeLeftActionRowCheckbox,Se=I.onChangeParentCheckbox,he=I.onChangeSimpleCheckbox,Ae=B===l,Ie=(0,e.useMemo)(function(){return Array.isArray(n)?n:[]},[n]),Re=Ie.length>0,it=(0,e.useCallback)(function(){Re&&R(function(Oe){return Oe===l?null:l})},[Re,l]),ye=function(we){var Ne=we.target.value;le(m,b,l,Ne)},Me=(0,e.useMemo)(function(){return Oo(v,K,m,b,l)},[v,K,m,b,l]),ue=Me.hasAllActionsSelected,Ee=Me.hasSomeActionsSelected;return e.createElement(e.Fragment,null,e.createElement(Ro,{alignItems:"center",isCollapsable:Re,isActive:Ae,background:S?"neutral100":"neutral0"},e.createElement(H.Flex,null,e.createElement(T,{onChange:ye,onClick:it,isCollapsable:Re,isFormDisabled:i,label:r,someChecked:Ee,value:ue,isActive:Ae},c&&e.createElement(qt,null),e.createElement(nt,{$isActive:Ae})),e.createElement(H.Flex,null,v.map(function(Oe){var we=Oe.label,Ne=Oe.isActionRelatedToCurrentProperty,at=Oe.actionId;if(!Ne)return e.createElement(pt,{key:we});var Ge=[].concat((0,Q.Z)(m.split("..")),[at,"properties",b,l]);if(!Re){var ot=Ce()(K,Ge,!1);return e.createElement(ln,{key:at,justifyContent:"center",alignItems:"center"},e.createElement(ve.BaseCheckbox,{disabled:i||sn,name:Ge.join(".."),"aria-label":N({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(l," ").concat(we)}),onValueChange:function(Vt){he({target:{name:Ge.join(".."),value:Vt}})},value:ot}))}var ft=Ce()(K,Ge,{}),ht=Pe(ft),lt=ht.hasAllActionsSelected,Zt=ht.hasSomeActionsSelected;return e.createElement(ln,{key:we,justifyContent:"center",alignItems:"center"},e.createElement(ve.BaseCheckbox,{disabled:i||sn,name:Ge.join(".."),onValueChange:function(Vt){Se({target:{name:Ge.join(".."),value:Vt}})},"aria-label":N({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(l," ").concat(we)}),value:lt,indeterminate:Zt}))})))),Ae&&e.createElement(So,{childrenForm:Ie,isFormDisabled:i,parentName:l,pathToDataFromActionRow:m,propertyName:b,propertyActions:v,recursiveLevel:0}))};xt.defaultProps={childrenForm:[],required:!1},xt.propTypes={childrenForm:s().array,label:s().string.isRequired,isFormDisabled:s().bool.isRequired,name:s().string.isRequired,pathToData:s().string.isRequired,propertyActions:s().array.isRequired,propertyName:s().string.isRequired,required:s().bool,isOdd:s().bool.isRequired};const Do=(0,e.memo)(xt),Lo=P.default.div`
  display: inline-flex;
  flex-direction: column;
  min-width: 0;
`,cn=({availableActions:o,childrenForm:t,isFormDisabled:n,label:r,pathToData:i,propertyName:l})=>{const c=(0,e.useMemo)(()=>qn(o,l),[o,l]);return e.createElement(Lo,null,e.createElement(eo,{label:r,headers:c}),e.createElement(k.Box,null,t.map(({children:m,label:v,value:b,required:S},x)=>e.createElement(Do,{childrenForm:m,key:b,label:v,isFormDisabled:n,name:b,required:S,propertyActions:c,pathToData:i,propertyName:l,isOdd:x%2===0}))))};cn.propTypes={childrenForm:s().array.isRequired,availableActions:s().array.isRequired,isFormDisabled:s().bool.isRequired,label:s().string.isRequired,pathToData:s().string.isRequired,propertyName:s().string.isRequired};const xo=cn,Io=P.default.div`
  flex-direction: column;
  display: inline-flex;
  min-width: 100%;
  ${({theme:o,isActive:t})=>t&&`border: 1px solid ${o.colors.primary600};`}
`,un=({allActions:o,contentTypeName:t,label:n,index:r,isActive:i,isFormDisabled:l,onClickToggleCollapse:c,pathToData:m,properties:v})=>{const b=(0,e.useCallback)(()=>{c(t)},[t,c]),S=(0,e.useMemo)(()=>co(o,t),[o,t]);return e.createElement(Io,{isActive:i},e.createElement(Jn,{availableActions:S,isActive:i,isGrey:r%2===0,isFormDisabled:l,label:n,onClickToggle:b,pathToData:m}),i&&v.map(({label:x,value:N,children:oe})=>e.createElement(xo,{availableActions:S,childrenForm:oe,isFormDisabled:l,label:x,pathToData:m,propertyName:N,key:N})))};un.propTypes={allActions:s().array.isRequired,contentTypeName:s().string.isRequired,index:s().number.isRequired,isActive:s().bool.isRequired,isFormDisabled:s().bool.isRequired,label:s().string.isRequired,onClickToggleCollapse:s().func.isRequired,pathToData:s().string.isRequired,properties:s().array.isRequired};const Mo=un,It=({actions:o,isFormDisabled:t,pathToData:n,subjects:r})=>{const[i,l]=(0,e.useState)(null),c=m=>{l(i===m?null:m)};return r.map(({uid:m,label:v,properties:b},S)=>e.createElement(Mo,{allActions:o,key:m,contentTypeName:m,label:v,isActive:i===m,isFormDisabled:t,index:S,onClickToggleCollapse:c,pathToData:`${n}..${m}`,properties:b}))};It.defaultProps={actions:[],subjects:[]},It.propTypes={actions:s().array.isRequired,isFormDisabled:s().bool.isRequired,pathToData:s().string.isRequired,subjects:s().arrayOf(s().shape({uid:s().string.isRequired,label:s().string.isRequired,properties:s().array.isRequired}))};const wo=(0,e.memo)(It),Fo=o=>o.filter(({subjects:t})=>t&&t.length);var Bo=Object.defineProperty,dn=Object.getOwnPropertySymbols,jo=Object.prototype.hasOwnProperty,No=Object.prototype.propertyIsEnumerable,pn=(o,t,n)=>t in o?Bo(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,mn=(o,t)=>{for(var n in t||(t={}))jo.call(t,n)&&pn(o,n,t[n]);if(dn)for(var n of dn(t))No.call(t,n)&&pn(o,n,t[n]);return o};const ko=o=>o.map(({actionId:t})=>t),Wo=(o,t)=>o.reduce((n,r)=>(Object.keys(t).forEach(i=>{const l=(0,u.get)(t,[i,r],{}),c={[i]:ie(l)};n[r]?n[r]=mn(mn({},n[r]),c):n[r]=c}),n),{}),$o=(o,t)=>{const n=ko(o),r=Wo(n,t);return Object.keys(r).reduce((l,c)=>(l[c]=Pe(r[c]),l),{})};var Zo=function(){return window&&window.strapi&&window.strapi.isEE?a(26107).Z:a(39672).Z}(),Vo=(0,P.default)(He.Stack).withConfig({displayName:"GlobalActions__CenteredStack",componentId:"sc-1vxwsjr-0"})(["align-items:center;justify-content:center;width:",";flex-shrink:0;"],J),Mt=function(t){var n=t.actions,r=t.isFormDisabled,i=t.kind,l=(0,z.useIntl)(),c=l.formatMessage,m=(0,re.$_)(),v=m.modifiedData,b=m.onChangeCollectionTypeGlobalActionCheckbox,S=(0,e.useMemo)(function(){return Fo(n)},[n]),x=(0,e.useMemo)(function(){return $o(S,v[i])},[v,S,i]);return e.createElement(k.Box,{paddingBottom:4,paddingTop:6,style:{paddingLeft:be}},e.createElement(He.Stack,{horizontal:!0,spacing:0},S.map(function(N){var oe=N.label,M=N.actionId;return e.createElement(Vo,{key:M,spacing:3},e.createElement(A.Typography,{variant:"sigma",textColor:"neutral500"},c({id:"Settings.roles.form.permissions.".concat(oe.toLowerCase()),defaultMessage:oe})),e.createElement(ve.BaseCheckbox,{disabled:r||Zo,onValueChange:function(R){b(i,M,R)},name:M,"aria-label":c({id:"Settings.permissions.select-all-by-permission",defaultMessage:"Select all {label} permissions"},{label:c({id:"Settings.roles.form.permissions.".concat(oe.toLowerCase()),defaultMessage:oe})}),value:Ce()(x,[M,"hasAllActionsSelected"],!1),indeterminate:Ce()(x,[M,"hasSomeActionsSelected"],!1)}))})))};Mt.defaultProps={actions:[]},Mt.propTypes={actions:s().arrayOf(s().shape({label:s().string.isRequired,actionId:s().string.isRequired,subjects:s().array.isRequired})),isFormDisabled:s().bool.isRequired,kind:s().string.isRequired};const Go=(0,e.memo)(Mt),Uo=(0,P.default)(k.Box)`
  overflow-x: auto;
`,gn=({isFormDisabled:o,kind:t,layout:{actions:n,subjects:r}})=>{const i=pe()([...r],"label");return e.createElement(Uo,{background:"neutral0"},e.createElement(Go,{actions:n,kind:t,isFormDisabled:o}),e.createElement(wo,{actions:n,isFormDisabled:o,pathToData:t,subjects:i}))};gn.propTypes={isFormDisabled:s().bool.isRequired,kind:s().string.isRequired,layout:s().shape({actions:s().array,subjects:s().arrayOf(s().shape({uid:s().string.isRequired,label:s().string.isRequired,properties:s().array.isRequired}))}).isRequired};const fn=(0,e.memo)(gn);var Ko=a(40448);const hn=({children:o,value:t})=>e.createElement(Ko.$l.Provider,{value:t},o);hn.propTypes={children:s().node.isRequired,value:s().exact({availableConditions:s().array.isRequired,modifiedData:s().object.isRequired,onChangeCollectionTypeLeftActionRowCheckbox:s().func.isRequired,onChangeConditions:s().func.isRequired,onChangeSimpleCheckbox:s().func.isRequired,onChangeParentCheckbox:s().func.isRequired,onChangeCollectionTypeGlobalActionCheckbox:s().func.isRequired}).isRequired};const Ho=hn;var wt=a(47949),yn=a(39272),vn=a(43499),Xo=Object.defineProperty,zo=Object.defineProperties,Yo=Object.getOwnPropertyDescriptors,Cn=Object.getOwnPropertySymbols,Qo=Object.prototype.hasOwnProperty,Jo=Object.prototype.propertyIsEnumerable,En=(o,t,n)=>t in o?Xo(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,qo=(o,t)=>{for(var n in t||(t={}))Qo.call(t,n)&&En(o,n,t[n]);if(Cn)for(var n of Cn(t))Jo.call(t,n)&&En(o,n,t[n]);return o},_o=(o,t)=>zo(o,Yo(t));const ea=(o,t,n)=>o.map(r=>{const i=[...n,r.action,"properties","enabled"],l=(0,u.get)(t,i,!1),c=(0,u.get)(t,[...n,r.action,"conditions"],{}),m=L(c).some(v=>v);return _o(qo({},r),{isDisplayed:l,checkboxName:i.join(".."),hasSomeActionsSelected:l,value:l,hasConditions:m,label:r.displayName,actionId:r.action,pathToConditionsObject:[...n,r.action]})}),ta=o=>{const t=Object.entries(o).reduce((r,i)=>{const[l,{conditions:c}]=i;return r[l]=c,r},{});return L(t).some(r=>r)};var Ft=function(){return window&&window.strapi&&window.strapi.isEE?a(45667).Z:a(99399).Z}(),na=P.default.div.withConfig({displayName:"SubCategory__Border",componentId:"sc-akgczm-0"})(["flex:1;align-self:center;border-top:1px solid ",";"],function(o){var t=o.theme;return t.colors.neutral150}),oa=P.default.div.withConfig({displayName:"SubCategory__CheckboxWrapper",componentId:"sc-akgczm-1"})(["position:relative;word-break:keep-all;",""],function(o){var t=o.hasConditions,n=o.disabled,r=o.theme;return t&&`
    &:before {
      content: '';
      position: absolute;
      top: `.concat(-4/16,`rem;
      left: `).concat(-8/16,`rem;
      width: `).concat(6/16,`rem;
      height: `).concat(6/16,`rem;
      border-radius: `).concat(20/16,`rem;
      background: `).concat(n?r.colors.neutral100:r.colors.primary600,`;
    }
  `)}),bn=function(t){var n=t.categoryName,r=t.isFormDisabled,i=t.subCategoryName,l=t.actions,c=t.pathToData,m=(0,e.useState)(!1),v=(0,q.Z)(m,2),b=v[0],S=v[1],x=(0,re.$_)(),N=x.modifiedData,oe=x.onChangeParentCheckbox,M=x.onChangeSimpleCheckbox,B=(0,z.useIntl)(),R=B.formatMessage,I=Ce()(N,c,{}),K=(0,e.useMemo)(function(){return Object.keys(I).reduce(function(ye,Me){return ye[Me]=ie(I[Me]),ye},{})},[I]),le=Pe(K),Se=le.hasAllActionsSelected,he=le.hasSomeActionsSelected,Ae=function(){S(function(Me){return!Me})},Ie=function(){S(!1)},Re=ea(l,N,c),it=ta(Ce()(N,(0,Q.Z)(c),{}));return e.createElement(e.Fragment,null,e.createElement(k.Box,null,e.createElement(H.Flex,{justifyContent:"space-between",alignItems:"center"},e.createElement(k.Box,{paddingRight:4},e.createElement(A.Typography,{variant:"sigma",textColor:"neutral600"},i)),e.createElement(na,null),e.createElement(k.Box,{paddingLeft:4},e.createElement(vn.Checkbox,{name:c.join(".."),disabled:r||Ft,onValueChange:function(Me){oe({target:{name:c.join(".."),value:Me}})},indeterminate:he,value:Se},R({id:"app.utils.select-all",defaultMessage:"Select all"})))),e.createElement(H.Flex,{paddingTop:6,paddingBottom:6},e.createElement(yn.Grid,{gap:2,style:{flex:1}},Re.map(function(ye){var Me=ye.checkboxName,ue=ye.value,Ee=ye.action,Oe=ye.displayName,we=ye.hasConditions;return e.createElement(yn.GridItem,{col:3,key:Ee},e.createElement(oa,{disabled:r||Ft,hasConditions:we},e.createElement(vn.Checkbox,{name:Me,disabled:r||Ft,onValueChange:function(at){M({target:{name:Me,value:at}})},value:ue},Oe)))})),e.createElement(Be,{hasConditions:it,onClick:Ae}))),b&&e.createElement(rt,{headerBreadCrumbs:[n,i],actions:Re,isFormDisabled:r,onClosed:Ie,onToggle:Ae}))};bn.propTypes={actions:s().array.isRequired,categoryName:s().string.isRequired,isFormDisabled:s().bool.isRequired,subCategoryName:s().string.isRequired,pathToData:s().array.isRequired};const aa=bn,Bt=({childrenForm:o,kind:t,name:n,isOpen:r,isFormDisabled:i,isWhite:l,onOpenCategory:c,pathToData:m})=>{const{formatMessage:v}=(0,z.useIntl)(),b=()=>{c(n)},S=(0,e.useMemo)(()=>n.split("::").pop(),[n]);return e.createElement(wt.Accordion,{expanded:r,onToggle:b,id:`accordion-${n}`,variant:l?"primary":"secondary"},e.createElement(wt.AccordionToggle,{title:Y()(S),description:`${v({id:"Settings.permissions.category"},{category:S})} ${t==="plugins"?"plugin":t}`}),e.createElement(wt.AccordionContent,null,e.createElement(k.Box,{padding:6},o.map(({actions:x,subCategoryName:N,subCategoryId:oe})=>e.createElement(aa,{key:N,actions:x,categoryName:S,isFormDisabled:i,subCategoryName:N,pathToData:[...m,oe]})))))};Bt.defaultProps={},Bt.propTypes={childrenForm:s().array.isRequired,isOpen:s().bool.isRequired,isFormDisabled:s().bool.isRequired,isWhite:s().bool.isRequired,kind:s().string.isRequired,name:s().string.isRequired,onOpenCategory:s().func.isRequired,pathToData:s().array.isRequired};const ra=Bt,Pn=({isFormDisabled:o,kind:t,layout:n})=>{const[r,i]=(0,e.useState)(null),l=c=>{i(c===r?null:c)};return e.createElement(k.Box,{padding:6,background:"neutral0"},n.map(({category:c,categoryId:m,childrenForm:v},b)=>e.createElement(ra,{key:c,childrenForm:v,kind:t,isFormDisabled:o,isOpen:r===c,isWhite:b%2===1,name:c,onOpenCategory:l,pathToData:[t,m]})))};Pn.propTypes={isFormDisabled:s().bool.isRequired,kind:s().string.isRequired,layout:s().arrayOf(s().shape({category:s().string.isRequired,categoryId:s().string.isRequired,childrenForm:s().arrayOf(s().shape({actions:s().array.isRequired})).isRequired}).isRequired).isRequired};const Tn=Pn,Sn=(o,t,n)=>o.find(r=>r.action===t&&r.subject===n);var sa=Object.defineProperty,ia=Object.defineProperties,la=Object.getOwnPropertyDescriptors,An=Object.getOwnPropertySymbols,ca=Object.prototype.hasOwnProperty,ua=Object.prototype.propertyIsEnumerable,On=(o,t,n)=>t in o?sa(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,Rn=(o,t)=>{for(var n in t||(t={}))ca.call(t,n)&&On(o,n,t[n]);if(An)for(var n of An(t))ua.call(t,n)&&On(o,n,t[n]);return o},Dn=(o,t)=>ia(o,la(t));const Ln=(o,t=[])=>o.reduce((n,r)=>(n[r.id]=t.indexOf(r.id)!==-1,n),{}),xn=({children:o},t,n="")=>o.reduce((r,i)=>{if(i.children)return Dn(Rn({},r),{[i.value]:xn(i,t,`${n}${i.value}.`)});const l=t.indexOf(`${n}${i.value}`)!==-1;return r[i.value]=l,r},{}),da=(o,t,n)=>o.reduce((r,i)=>{const l=t.properties.find(({value:c})=>c===i);if(l){const c=(0,u.get)(n,["properties",l.value],[]),m=xn(l,c);r.properties[i]=m}return r},{properties:{}}),pa=(o,t)=>t.reduce((n,r)=>{const i=o.find(({uid:l})=>l===r)||null;return i&&(n[r]=i),n},{}),In=({subjects:o},t,n,r=[])=>t.reduce((i,l)=>{const c=l.subjects,m=pa(o,c);if((0,u.isEmpty)(m))return i;const v=Object.keys(m).reduce((b,S)=>{const{actionId:x,applyToProperties:N}=l,B=m[S].properties.map(({value:le})=>le).every(le=>(N||[]).indexOf(le)===-1),R=Sn(r,x,S),I=Ln(n,(0,u.get)(R,"conditions",[]));if((0,u.isEmpty)(N)||B)return(0,u.set)(b,[S,x],{properties:{enabled:R!==void 0},conditions:I}),b;const K=da(N,m[S],R);return(0,u.set)(b,[S,x],Dn(Rn({},K),{conditions:I})),b},{});return(0,u.merge)(i,v)},{}),ma=(o,t,n)=>o.reduce((r,i)=>{const l=Sn(n,i.action,null);return r[i.action]={properties:{enabled:l!==void 0},conditions:Ln(t,(0,u.get)(l,"conditions",[]))},r},{}),ga=(o,t,n)=>o.reduce((r,i)=>(r[i.subCategoryId]=ma(i.actions,t,n),r),{}),Mn=(o,t,n=[])=>o.reduce((r,{categoryId:i,childrenForm:l})=>{const c=ga(l,t,n);return r[i]=c,r},{}),wn=o=>o.split(" ").join("-"),Fn=(o,t)=>(0,u.chain)(o).groupBy(t).map((n,r)=>({category:r,categoryId:wn(r),childrenForm:(0,u.chain)(n).groupBy("subCategory").map((i,l)=>({subCategoryName:l,subCategoryId:wn(l),actions:i})).value()})).value(),fa=(o,t)=>{const{conditions:n,sections:{collectionTypes:r,singleTypes:i,plugins:l,settings:c}}=o,m={collectionTypes:r,singleTypes:i,plugins:Fn(l,"plugin"),settings:Fn(c,"category")},v={collectionTypes:In(r,r.actions||[],n,t),singleTypes:In(i,i.actions||[],n,t),plugins:Mn(m.plugins,n,t),settings:Mn(m.settings,n,t)};return{initialData:v,modifiedData:v,layouts:m}};var ha=Object.defineProperty,ya=Object.defineProperties,va=Object.getOwnPropertyDescriptors,Bn=Object.getOwnPropertySymbols,Ca=Object.prototype.hasOwnProperty,Ea=Object.prototype.propertyIsEnumerable,jn=(o,t,n)=>t in o?ha(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,jt=(o,t)=>{for(var n in t||(t={}))Ca.call(t,n)&&jn(o,n,t[n]);if(Bn)for(var n of Bn(t))Ea.call(t,n)&&jn(o,n,t[n]);return o},Nt=(o,t)=>ya(o,va(t));const Nn=o=>Object.keys(o).reduce((t,n)=>{const r=o[n];if((0,u.isObject)(r)&&!(0,u.has)(r,"conditions"))return Nt(jt({},t),{[n]:Nn(r)});if((0,u.isObject)(r)&&(0,u.has)(r,"conditions")&&!L((0,u.omit)(r,"conditions")).some(l=>l)){const l=Object.keys(r.conditions).reduce((c,m)=>(c[m]=!1,c),{});return Nt(jt({},t),{[n]:Nt(jt({},r),{conditions:l})})}return t[n]=r,t},{}),kt=Nn;var ba=Object.defineProperty,Pa=Object.defineProperties,Ta=Object.getOwnPropertyDescriptors,kn=Object.getOwnPropertySymbols,Sa=Object.prototype.hasOwnProperty,Aa=Object.prototype.propertyIsEnumerable,Wn=(o,t,n)=>t in o?ba(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,Oa=(o,t)=>{for(var n in t||(t={}))Sa.call(t,n)&&Wn(o,n,t[n]);if(kn)for(var n of kn(t))Aa.call(t,n)&&Wn(o,n,t[n]);return o},Ra=(o,t)=>Pa(o,Ta(t));const $n=(o,t)=>Object.keys(o).reduce((n,r)=>{const i=o[r];return r==="conditions"?(n[r]=i,n):(0,u.isObject)(i)?Ra(Oa({},n),{[r]:$n(i,t)}):(n[r]=t,n)},{}),Ot=$n;var Da=Object.defineProperty,La=Object.defineProperties,xa=Object.getOwnPropertyDescriptors,Zn=Object.getOwnPropertySymbols,Ia=Object.prototype.hasOwnProperty,Ma=Object.prototype.propertyIsEnumerable,Vn=(o,t,n)=>t in o?Da(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,wa=(o,t)=>{for(var n in t||(t={}))Ia.call(t,n)&&Vn(o,n,t[n]);if(Zn)for(var n of Zn(t))Ma.call(t,n)&&Vn(o,n,t[n]);return o},Fa=(o,t)=>La(o,xa(t));const Ba={initialData:{},modifiedData:{},layouts:{}},ja=(o,t)=>(0,me.default)(o,n=>{switch(t.type){case"ON_CHANGE_COLLECTION_TYPE_GLOBAL_ACTION_CHECKBOX":{const{collectionTypeKind:r,actionId:i,value:l}=t,c=["modifiedData",r];Object.keys((0,u.get)(o,c)).forEach(m=>{const v=(0,u.get)(o,[...c,m,i],void 0);if(v){let b=Ot(v,l);if(!l&&b.conditions){const S=Ot(b.conditions,!1);b=Fa(wa({},b),{conditions:S})}(0,u.set)(n,[...c,m,i],b)}});break}case"ON_CHANGE_COLLECTION_TYPE_ROW_LEFT_CHECKBOX":{const{pathToCollectionType:r,propertyName:i,rowName:l,value:c}=t;let m=(0,u.cloneDeep)(o.modifiedData);const v=r.split(".."),b=(0,u.get)(m,v,{});Object.keys(b).forEach(S=>{if((0,u.has)(b[S],`properties.${i}`)){const x=(0,u.get)(b,[S,"properties",i,l]),N=[...v,S,"properties",i,l];if(!(0,u.isObject)(x))(0,u.set)(m,N,c);else{const oe=Ot(x,c);(0,u.set)(m,N,oe)}}}),c||(m=kt(m)),(0,u.set)(n,"modifiedData",m);break}case"ON_CHANGE_CONDITIONS":{Object.entries(t.conditions).forEach(r=>{const[i,l]=r;(0,u.set)(n,["modifiedData",...i.split(".."),"conditions"],l)});break}case"ON_CHANGE_SIMPLE_CHECKBOX":{let r=(0,u.cloneDeep)(o.modifiedData);(0,u.set)(r,[...t.keys.split("..")],t.value),t.value||(r=kt(r)),(0,u.set)(n,"modifiedData",r);break}case"ON_CHANGE_TOGGLE_PARENT_CHECKBOX":{const{keys:r,value:i}=t,l=[...r.split("..")];let c=(0,u.cloneDeep)(o.modifiedData);const m=(0,u.get)(c,l,{}),v=Ot(m,i);(0,u.set)(c,l,v),i||(c=kt(c)),(0,u.set)(n,["modifiedData"],c);break}case"RESET_FORM":{n.modifiedData=o.initialData;break}case"SET_FORM_AFTER_SUBMIT":{n.initialData=o.modifiedData;break}default:return n}}),Wt=o=>Object.entries(o).filter(([,t])=>t).map(([t])=>t),Na=o=>{const[t,{conditions:n}]=o;return{action:t,subject:null,conditions:Wt(n),properties:{}}},ka=o=>Object.values(o).reduce((t,n)=>{const r=Object.entries(n).reduce((i,l)=>{const[,{properties:{enabled:c}}]=l;if(!c)return i;const m=Na(l);return i.push(m),i},[]);return[...t,...r]},[]),Gn=o=>Object.values(o).reduce((t,n)=>{const r=ka(n);return[...t,...r]},[]),Un=(o,t="")=>Object.entries(o).reduce((n,r)=>{const[i,l]=r;return(0,u.isObject)(l)?[...n,...Un(l,`${t}${i}.`)]:(l&&!(0,u.isObject)(l)&&n.push(`${t}${i}`),n)},[]),Wa=(o,t,{conditions:n,properties:r})=>Object.entries(r).reduce((i,l)=>{const[c,m]=l;return i.properties[c]=Un(m),i},{action:o,subject:t,conditions:Wt(n),properties:{}}),$a=(o,t,{conditions:n})=>({action:o,subject:t,properties:{},conditions:Wt(n)}),Za=(o,t)=>Object.entries(t).reduce((r,i)=>{const[l,c]=i;if(!L(c).some(b=>b))return r;if(!(0,u.has)(c,"properties.enabled")){const b=Wa(l,o,c);return[...r,b]}if(!c.properties.enabled)return r;const v=$a(l,o,c);return r.push(v),r},[]),Kn=o=>Object.entries(o).reduce((n,r)=>{const[i,l]=r,c=Za(i,l);return[...n,...c]},[]),Va=o=>{const t=Gn(o.plugins),n=Gn(o.settings),r=Kn(o.collectionTypes),i=Kn(o.singleTypes);return[...t,...n,...r,...i]},Ga=[{labelId:"app.components.LeftMenuLinkContainer.collectionTypes",defaultMessage:"Collection Types",id:"collectionTypes"},{labelId:"app.components.LeftMenuLinkContainer.singleTypes",id:"singleTypes",defaultMessage:"Single Types"},{labelId:"app.components.LeftMenuLinkContainer.plugins",defaultMessage:"Plugins",id:"plugins"},{labelId:"app.components.LeftMenuLinkContainer.settings",defaultMessage:"Settings",id:"settings"}];var Ua=Object.defineProperty,Hn=Object.getOwnPropertySymbols,Ka=Object.prototype.hasOwnProperty,Ha=Object.prototype.propertyIsEnumerable,Xn=(o,t,n)=>t in o?Ua(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,zn=(o,t)=>{for(var n in t||(t={}))Ka.call(t,n)&&Xn(o,n,t[n]);if(Hn)for(var n of Hn(t))Ha.call(t,n)&&Xn(o,n,t[n]);return o};const $t=(0,e.forwardRef)(({layout:o,isFormDisabled:t,permissions:n},r)=>{const[{initialData:i,layouts:l,modifiedData:c},m]=(0,e.useReducer)(ja,Ba,()=>fa(o,n)),{formatMessage:v}=(0,z.useIntl)();(0,e.useImperativeHandle)(r,()=>({getPermissions:()=>{const M=(0,U.difference)(i.collectionTypes,c.collectionTypes),B=(0,U.difference)(i.singleTypes,c.singleTypes),R=zn(zn({},M),B);let I;return Ue()(R)?I=!1:I=Object.values(R).some(K=>Object.values(K).some(le=>Le()(le,"conditions"))),{permissionsToSend:Va(c),didUpdateConditions:I}},resetForm:()=>{m({type:"RESET_FORM"})},setFormAfterSubmit:()=>{m({type:"SET_FORM_AFTER_SUBMIT"})}}));const b=(M,B,R,I)=>{m({type:"ON_CHANGE_COLLECTION_TYPE_ROW_LEFT_CHECKBOX",pathToCollectionType:M,propertyName:B,rowName:R,value:I})},S=(M,B,R)=>{m({type:"ON_CHANGE_COLLECTION_TYPE_GLOBAL_ACTION_CHECKBOX",collectionTypeKind:M,actionId:B,value:R})},x=M=>{m({type:"ON_CHANGE_CONDITIONS",conditions:M})},N=(0,e.useCallback)(({target:{name:M,value:B}})=>{m({type:"ON_CHANGE_SIMPLE_CHECKBOX",keys:M,value:B})},[]),oe=(0,e.useCallback)(({target:{name:M,value:B}})=>{m({type:"ON_CHANGE_TOGGLE_PARENT_CHECKBOX",keys:M,value:B})},[]);return e.createElement(Ho,{value:{availableConditions:o.conditions,modifiedData:c,onChangeConditions:x,onChangeSimpleCheckbox:N,onChangeParentCheckbox:oe,onChangeCollectionTypeLeftActionRowCheckbox:b,onChangeCollectionTypeGlobalActionCheckbox:S}},e.createElement(X.TabGroup,{id:"tabs",label:v({id:"Settings.permissions.users.tabs.label",defaultMessage:"Tabs Permissions"})},e.createElement(X.Tabs,null,Ga.map(M=>e.createElement(X.Tab,{key:M.id},v({id:M.labelId,defaultMessage:M.defaultMessage})))),e.createElement(X.TabPanels,{style:{position:"relative"}},e.createElement(X.TabPanel,null,e.createElement(fn,{layout:l.collectionTypes,kind:"collectionTypes",isFormDisabled:t})),e.createElement(X.TabPanel,null,e.createElement(fn,{layout:l.singleTypes,kind:"singleTypes",isFormDisabled:t})),e.createElement(X.TabPanel,null,e.createElement(Tn,{layout:l.plugins,kind:"plugins",isFormDisabled:t})),e.createElement(X.TabPanel,null,e.createElement(Tn,{layout:l.settings,kind:"settings",isFormDisabled:t})))))});$t.defaultProps={permissions:[],layout:{conditions:[],sections:{collectionTypes:{},singleTypes:{actions:[]},settings:[],plugins:[]}}},$t.propTypes={layout:s().object,isFormDisabled:s().bool.isRequired,permissions:s().array};const Xa=(0,e.memo)($t)},99399:(ae,D,a)=>{a.d(D,{Z:()=>E});const E=!0},75365:(ae,D,a)=>{a.d(D,{Z:()=>e});const e=()=>"todo empty role"},56894:(ae,D,a)=>{a.d(D,{Z:()=>Fe});var e=a(53547),E=a(45697),s=a.n(E),U=a(94117),X=a.n(U),De=a(40264),Le=a.n(De),de=a(43546),Ue=a.n(de),z=a(33483),k=a.n(z),P=a(49549),ge=a.n(P),pe=a(68547),q=a.n(pe),_=a(97132),Qe=a.n(_),Je=Object.defineProperty,ke=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,Xe=(re,Z,F)=>Z in re?Je(re,Z,{enumerable:!0,configurable:!0,writable:!0,value:F}):re[Z]=F,Ce=(re,Z)=>{for(var F in Z||(Z={}))ve.call(Z,F)&&Xe(re,F,Z[F]);if(ke)for(var F of ke(Z))H.call(Z,F)&&Xe(re,F,Z[F]);return re};const We=({id:re,name:Z,description:F,usersCount:xe,icons:qe})=>{const{formatMessage:Ke}=(0,_.useIntl)(),Be=Ke({id:"Roles.RoleRow.user-count",defaultMessage:"{number, plural, =0 {#  user} one {#  user} other {# users}}"},{number:xe});return e.createElement(de.Tr,Ce({key:re},(0,pe.onRowClick)({fn:qe[1].onClick})),e.createElement(de.Td,{maxWidth:(0,pe.pxToRem)(130)},e.createElement(z.Typography,{ellipsis:!0,textColor:"neutral800"},Z)),e.createElement(de.Td,{maxWidth:(0,pe.pxToRem)(250)},e.createElement(z.Typography,{ellipsis:!0,textColor:"neutral800"},F)),e.createElement(de.Td,null,e.createElement(z.Typography,{textColor:"neutral800"},Be)),e.createElement(de.Td,null,e.createElement(De.Flex,Ce({justifyContent:"flex-end"},pe.stopPropagation),qe.map(($e,He)=>$e?e.createElement(U.Box,{key:$e.label,paddingLeft:He===0?0:1},e.createElement(P.IconButton,{onClick:$e.onClick,label:$e.label,noBorder:!0,icon:$e.icon})):null))))};We.propTypes={id:s().number.isRequired,name:s().string.isRequired,description:s().string.isRequired,usersCount:s().number.isRequired,icons:s().array.isRequired};const Fe=We},73044:(ae,D,a)=>{a.d(D,{Z:()=>f});var e=a(53547),E=a(68547),s=a(92699),U=a(63852),X=a(89326),De=a.n(X),Le=a(62982),de=a.n(Le),Ue=a(56204),z=a.n(Ue),k=a(54279),P=a.n(k),ge=a(64459),pe=a(35395),q=a(43546),_=a(33483),Qe=a(80117),Je=a(19631),ke=a(97132),ve=a(49656),H=a(56894),Xe=a(75365),Ce=a(45697),We=a.n(Ce),Fe=a(16384),re=a(54451),Z=a(15577),F=a(49549),xe=a(31512),qe=a(94117),Ke=a(40264),Be=a(9524),$e=a(74657),He=a.n($e),Ze=a(7228),_e=a.n(Ze),A=a(12285),me=a(31652);const W=Fe.default.div`
  position: absolute;
  z-index: 3;
  inset: 0;
  background: ${({theme:g})=>(0,E.setHexOpacity)(g.colors.neutral800,.2)};
  padding: 0 ${({theme:g})=>g.spaces[8]};
`,$=(0,Fe.default)(Ke.Flex)`
  position: relative;
  max-width: ${830/16}rem;
  height: ${415/16}rem;
  margin: 0 auto;
  overflow: hidden;
  margin-top: 10%;
  padding-left: ${64/16}rem;

  img:first-of-type {
    position: absolute;
    right: 0;
    top: 0;
    max-width: ${360/16}rem;
  }

  img:not(:first-of-type) {
    width: ${130/16}rem;
    margin-left: 12%;
    margin-right: ${20/16}rem;
    z-index: 0;
  }
`,ce=(0,Fe.default)(Be.Stack)`
  align-items: flex-start;
  max-width: ${400/16}rem;
  z-index: 0;
`,Y=(0,Fe.default)(qe.Box)`
  position: absolute;
  right: ${({theme:g})=>g.spaces[4]};
  top: ${({theme:g})=>g.spaces[4]};
`,fe=({onClose:g,isOpen:h})=>{(0,E.useLockScroll)(h);const{formatMessage:C}=(0,ke.useIntl)();return h?e.createElement(re.Portal,null,e.createElement(W,{onClick:g},e.createElement(Z.FocusTrap,{onEscape:g},e.createElement($,{onClick:u=>u.stopPropagation(),"aria-labelledby":"upgrade-plan",background:"neutral0",hasRadius:!0},e.createElement("img",{src:A,alt:"air-balloon"}),e.createElement(Y,null,e.createElement(F.IconButton,{onClick:g,"aria-label":"Close",icon:e.createElement(_e(),null)})),e.createElement(ce,{spacing:6},e.createElement(_.Typography,{fontWeight:"bold",textColor:"primary600"},C({id:"app.components.UpgradePlanModal.text-ce",defaultMessage:"COMMUNITY EDITION"})),e.createElement(Be.Stack,{spacing:2},e.createElement(_.Typography,{variant:"alpha",as:"h2",id:"upgrade-plan"},C({id:"app.components.UpgradePlanModal.limit-reached",defaultMessage:"You have reached the limit"})),e.createElement(_.Typography,null,C({id:"app.components.UpgradePlanModal.text-power",defaultMessage:"Unlock the full power of Strapi by upgrading your plan to the Enterprise Edition"}))),e.createElement(xe.LinkButton,{href:"https://strapi.io/pricing-self-hosted",endIcon:e.createElement(He(),null)},C({id:"app.components.UpgradePlanModal.button",defaultMessage:"Learn more"}))),e.createElement("img",{src:me,alt:"upgrade-arrow"}))))):null};fe.propTypes={onClose:We().func.isRequired,isOpen:We().bool.isRequired};const Q=fe;var w=a(32104);const J=()=>{const{roles:g,isLoading:h}=(0,w.bF)(),C=(0,E.useQuery)(),u=decodeURIComponent(C.get("_q")||""),d=(0,U.ZP)(g,u,{keys:["name","description"]});return{isLoading:h,sortedRoles:d}},be=()=>{const{formatMessage:g}=(0,ke.useIntl)(),[h,C]=(0,e.useState)(!1),{trackUsage:u}=(0,E.useTracking)(),{push:d}=(0,ve.useHistory)(),ee=(0,e.useCallback)(G=>{d(`/settings/roles/${G}`)},[d]),te=(0,e.useCallback)(()=>{C(G=>!G)},[]),V=(0,e.useCallback)(()=>{u("didShowRBACUpgradeModal"),C(!0)},[u]),se=(0,e.useCallback)(G=>[{onClick:te,label:g({id:"app.utils.duplicate",defaultMessage:"Duplicate"}),icon:e.createElement(P(),null)},{onClick:()=>ee(G.id),label:g({id:"app.utils.edit",defaultMessage:"Edit"}),icon:e.createElement(z(),null)},{onClick:te,label:g({id:"global.delete",defaultMessage:"Delete"}),icon:e.createElement(de(),null)}],[g,te,ee]);return{isModalOpen:h,handleToggleModalForCreatingRole:V,handleToggle:te,getIcons:se}},je=()=>{const{formatMessage:g}=(0,ke.useIntl)();(0,E.useFocusWhenNavigate)();const{sortedRoles:h,isLoading:C}=J(),{isModalOpen:u,handleToggle:d,handleToggleModalForCreatingRole:ee,getIcons:te}=be(),V=h.length+1,se=5;return e.createElement(Qe.Main,null,e.createElement(E.SettingsPageTitle,{name:"Roles"}),e.createElement(pe.HeaderLayout,{primaryAction:e.createElement(ge.Button,{onClick:ee,startIcon:e.createElement(De(),null),size:"L"},g({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})),title:g({id:"global.roles",defaultMessage:"roles"}),subtitle:g({id:"Settings.roles.list.description",defaultMessage:"List of roles"})}),e.createElement(pe.ContentLayout,null,e.createElement(q.Table,{colCount:se,rowCount:V,footer:e.createElement(q.TFooter,{onClick:ee,icon:e.createElement(De(),null)},g({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"}))},e.createElement(q.Thead,null,e.createElement(q.Tr,null,e.createElement(q.Th,null,e.createElement(_.Typography,{variant:"sigma",textColor:"neutral600"},g({id:"global.name",defaultMessage:"Name"}))),e.createElement(q.Th,null,e.createElement(_.Typography,{variant:"sigma",textColor:"neutral600"},g({id:"global.description",defaultMessage:"Description"}))),e.createElement(q.Th,null,e.createElement(_.Typography,{variant:"sigma",textColor:"neutral600"},g({id:"global.users",defaultMessage:"Users"}))),e.createElement(q.Th,null,e.createElement(Je.VisuallyHidden,null,g({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(q.Tbody,null,h==null?void 0:h.map(G=>e.createElement(H.Z,{key:G.id,id:G.id,name:G.name,description:G.description,usersCount:G.usersCount,icons:te(G)})))),!V&&!C&&e.createElement(Xe.Z,null)),e.createElement(Q,{isOpen:u,onClose:d}))},f=()=>e.createElement(E.CheckPagePermissions,{permissions:s.Z.settings.roles.main},e.createElement(je,null))},73258:(ae,D,a)=>{a.d(D,{Z:()=>E});const E=[]},18290:(ae,D,a)=>{a.d(D,{Z:()=>_e});var e=a(53547),E=a(30381),s=a.n(E),U=a(68547),X=a(94117),De=a(64459),Le=a(35395),de=a(39272),Ue=a(80117),z=a(56156),k=a(40264),P=a(9524),ge=a(33483),pe=a(99136),q=a(78607),_=a(87760),Qe=a.n(_),Je=a(80831),ke=a(27361),ve=a.n(ke),H=a(41609),Xe=a.n(H),Ce=a(97132),We=a(49656),Fe=a(16384),re=a(79160),Z=a(32104),F=a(92699),xe=a(63600);const Ke=xe.Ry().shape({name:xe.Z_().required(U.translatedErrors.required),description:xe.Z_().required(U.translatedErrors.required)});var Be=a(25108),$e=(A,me,W)=>new Promise(($,ce)=>{var Y=w=>{try{Q(W.next(w))}catch(J){ce(J)}},fe=w=>{try{Q(W.throw(w))}catch(J){ce(J)}},Q=w=>w.done?$(w.value):Promise.resolve(w.value).then(Y,fe);Q((W=W.apply(A,me)).next())});const He=Fe.default.div`
  border: 1px solid ${({theme:A})=>A.colors.primary200};
  background: ${({theme:A})=>A.colors.primary100};
  padding: ${({theme:A})=>`${A.spaces[2]} ${A.spaces[4]}`};
  color: ${({theme:A})=>A.colors.primary600};
  border-radius: ${({theme:A})=>A.borderRadius};
  font-size: ${12/16}rem;
  font-width: bold;
`,Ze=()=>{const A=(0,U.useNotification)(),{lockApp:me,unlockApp:W}=(0,U.useOverlayBlocker)(),{formatMessage:$}=(0,Ce.useIntl)(),[ce,Y]=(0,e.useState)(!1),{replace:fe}=(0,We.useHistory)(),Q=(0,e.useRef)(),{trackUsage:w}=(0,U.useTracking)(),J=(0,We.useRouteMatch)("/settings/roles/duplicate/:id"),be=ve()(J,"params.id",null),{isLoading:Ve,data:je}=(0,Z.U_)(),{permissions:et,isLoading:f}=(0,Z.Dq)(be),g=C=>{me(),Y(!0),w(be?"willDuplicateRole":"willCreateNewRole"),Promise.resolve((0,U.request)("/admin/roles",{method:"POST",body:C})).then(u=>$e(void 0,null,function*(){const{permissionsToSend:d}=Q.current.getPermissions();return w(be?"didDuplicateRole":"didCreateNewRole"),u.data.id&&!Xe()(d)&&(yield(0,U.request)(`/admin/roles/${u.data.id}/permissions`,{method:"PUT",body:{permissions:d}})),u})).then(u=>{Y(!1),A({type:"success",message:{id:"Settings.roles.created",defaultMessage:"created"}}),fe(`/settings/roles/${u.data.id}`)}).catch(u=>{Be.error(u),Y(!1),A({type:"warning",message:{id:"notification.error"}})}).finally(()=>{W()})},h=`${$({id:"Settings.roles.form.created",defaultMessage:"Created"})} ${s()().format("LL")}`;return e.createElement(Ue.Main,null,e.createElement(U.SettingsPageTitle,{name:"Roles"}),e.createElement(Je.Formik,{initialValues:{name:"",description:h},onSubmit:g,validationSchema:Ke,validateOnChange:!1},({handleSubmit:C,values:u,errors:d,handleReset:ee,handleChange:te})=>e.createElement(U.Form,{noValidate:!0},e.createElement(e.Fragment,null,e.createElement(Le.HeaderLayout,{primaryAction:e.createElement(P.Stack,{horizontal:!0,spacing:2},e.createElement(De.Button,{variant:"secondary",onClick:()=>{ee(),Q.current.resetForm()},size:"L"},$({id:"app.components.Button.reset",defaultMessage:"Reset"})),e.createElement(De.Button,{onClick:C,loading:ce,size:"L"},$({id:"global.save",defaultMessage:"Save"}))),title:$({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:$({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"}),navigationAction:e.createElement(z.Link,{startIcon:e.createElement(Qe(),null),to:"/settings/roles"},$({id:"global.back",defaultMessage:"Back"}))}),e.createElement(Le.ContentLayout,null,e.createElement(P.Stack,{spacing:6},e.createElement(X.Box,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(P.Stack,{spacing:4},e.createElement(k.Flex,{justifyContent:"space-between"},e.createElement(X.Box,null,e.createElement(X.Box,null,e.createElement(ge.Typography,{fontWeight:"bold"},$({id:"global.details",defaultMessage:"Details"}))),e.createElement(X.Box,null,e.createElement(ge.Typography,{variant:"pi",textColor:"neutral600"},$({id:"Settings.roles.form.description",defaultMessage:"Name and description of the role"})))),e.createElement(He,null,$({id:"Settings.roles.form.button.users-with-role",defaultMessage:"{number, plural, =0 {# users} one {# user} other {# users}} with this role"},{number:0}))),e.createElement(de.Grid,{gap:4},e.createElement(de.GridItem,{col:6},e.createElement(pe.TextInput,{name:"name",error:d.name&&$({id:d.name}),label:$({id:"global.name",defaultMessage:"Name"}),onChange:te,value:u.name})),e.createElement(de.GridItem,{col:6},e.createElement(q.Textarea,{label:$({id:"global.description",defaultMessage:"Description"}),name:"description",error:d.description&&$({id:d.description}),onChange:te},u.description))))),!Ve&&!f?e.createElement(X.Box,{shadow:"filterShadow",hasRadius:!0},e.createElement(re.Z,{isFormDisabled:!1,ref:Q,permissions:et,layout:je})):e.createElement(X.Box,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(U.LoadingIndicatorPage,null))))))))},_e=()=>e.createElement(U.CheckPagePermissions,{permissions:F.Z.settings.roles.create},e.createElement(Ze,null))},15272:(ae,D,a)=>{a.d(D,{Z:()=>E});const E=!1},57779:(ae,D,a)=>{a.d(D,{Z:()=>E});const E=!1},73071:(ae,D,a)=>{a.d(D,{Z:()=>E});const E=!1},43549:(ae,D,a)=>{a.d(D,{Z:()=>E});const E=!1},26107:(ae,D,a)=>{a.d(D,{Z:()=>E});const E=!1},45667:(ae,D,a)=>{a.d(D,{Z:()=>E});const E=!1},28099:(ae,D,a)=>{a.d(D,{Z:()=>_e});var e=a(53547),E=a(68547),s=a(92699),U=a(89326),X=a.n(U),De=a(62982),Le=a.n(De),de=a(54279),Ue=a.n(de),z=a(56204),k=a.n(z),P=a(64459),ge=a(35395),pe=a(19631),q=a(80117),_=a(43546),Qe=a(33483),Je=a(96486),ke=a(63852),ve=a(97132),H=a(49656),Xe=a(63955),Ce=a(32104),We=a(75365),Fe=a(56894),re=a(8041);const Z={roleToDelete:null,showModalConfirmButtonLoading:!1,shouldRefetchData:!1},xe=(A,me)=>(0,re.default)(A,W=>{switch(me.type){case"ON_REMOVE_ROLES":{W.showModalConfirmButtonLoading=!0;break}case"ON_REMOVE_ROLES_SUCCEEDED":{W.shouldRefetchData=!0,W.roleToDelete=null;break}case"RESET_DATA_TO_DELETE":{W.shouldRefetchData=!1,W.roleToDelete=null,W.showModalConfirmButtonLoading=!1;break}case"SET_ROLE_TO_DELETE":{W.roleToDelete=me.id;break}default:return W}});var qe=(A,me,W)=>new Promise(($,ce)=>{var Y=w=>{try{Q(W.next(w))}catch(J){ce(J)}},fe=w=>{try{Q(W.throw(w))}catch(J){ce(J)}},Q=w=>w.done?$(w.value):Promise.resolve(w.value).then(Y,fe);Q((W=W.apply(A,me)).next())});const Ke=()=>{(0,E.useFocusWhenNavigate)();const{isLoading:A,allowedActions:{canCreate:me,canDelete:W,canRead:$,canUpdate:ce}}=(0,E.useRBAC)(s.Z.settings.roles),{getData:Y,roles:fe,isLoading:Q}=(0,Ce.bF)(!1),[{query:w}]=(0,E.useQueryParams)(),J=(w==null?void 0:w._q)||"",be=(0,ke.ZP)(fe,J,{keys:["name","description"]});return(0,e.useEffect)(()=>{!A&&$&&Y()},[A,$,Y]),{isLoadingForPermissions:A,canCreate:me,canDelete:W,canRead:$,canUpdate:ce,isLoading:Q,getData:Y,sortedRoles:be,roles:fe}},Be=({getData:A,canCreate:me,canDelete:W,canUpdate:$})=>{const{formatMessage:ce}=(0,ve.useIntl)(),Y=(0,E.useNotification)(),[fe,Q]=(0,e.useState)(!1),{push:w}=(0,H.useHistory)(),[{selectedRoles:J,showModalConfirmButtonLoading:be,roleToDelete:Ve},je]=(0,e.useReducer)(xe,Z),et=()=>qe(void 0,null,function*(){try{je({type:"ON_REMOVE_ROLES"}),yield Xe.be.post("/admin/roles/batch-delete",{ids:[Ve]}),yield A(),je({type:"RESET_DATA_TO_DELETE"})}catch(V){const se=(0,Je.get)(V,["response","payload","data","ids"],null);if(se&&Array.isArray(se)){const G=se.join(`
`);Y({type:"warning",message:G})}else Y({type:"warning",message:{id:"notification.error"}})}C()}),f=(0,e.useCallback)(V=>{w(`/settings/roles/duplicate/${V}`)},[w]),g=()=>w("/settings/roles/new"),h=(0,e.useCallback)(V=>{je({type:"SET_ROLE_TO_DELETE",id:V}),C()},[]),C=()=>Q(V=>!V),u=(0,e.useCallback)(V=>{w(`/settings/roles/${V}`)},[w]),d=(0,e.useCallback)((V,se)=>{V.preventDefault(),V.stopPropagation(),se.usersCount?Y({type:"info",message:{id:"Roles.ListPage.notification.delete-not-allowed"}}):h(se.id)},[Y,h]),ee=(0,e.useCallback)((V,se)=>{V.preventDefault(),V.stopPropagation(),f(se.id)},[f]),te=(0,e.useCallback)(V=>[...me?[{onClick:se=>ee(se,V),label:ce({id:"app.utils.duplicate",defaultMessage:"Duplicate"}),icon:e.createElement(Ue(),null)}]:[],...$?[{onClick:()=>u(V.id),label:ce({id:"app.utils.edit",defaultMessage:"Edit"}),icon:e.createElement(k(),null)}]:[],...W?[{onClick:se=>d(se,V),label:ce({id:"global.delete",defaultMessage:"Delete"}),icon:e.createElement(Le(),null)}]:[]],[ce,d,ee,u,me,$,W]);return{handleNewRoleClick:g,getIcons:te,selectedRoles:J,isWarningDeleteAllOpened:fe,showModalConfirmButtonLoading:be,handleToggleModal:C,handleDeleteData:et}},He=()=>{const{formatMessage:A}=(0,ve.useIntl)(),{isLoadingForPermissions:me,canCreate:W,canRead:$,canDelete:ce,canUpdate:Y,isLoading:fe,getData:Q,sortedRoles:w}=Ke(),{handleNewRoleClick:J,getIcons:be,isWarningDeleteAllOpened:Ve,showModalConfirmButtonLoading:je,handleToggleModal:et,handleDeleteData:f}=Be({getData:Q,canCreate:W,canDelete:ce,canUpdate:Y}),g=w.length+1,h=6;if(me)return e.createElement(q.Main,null,e.createElement(E.LoadingIndicatorPage,null));const C=A({id:"global.roles",defaultMessage:"roles"});return e.createElement(q.Main,null,e.createElement(E.SettingsPageTitle,{name:"Roles"}),e.createElement(ge.HeaderLayout,{primaryAction:W?e.createElement(P.Button,{onClick:J,startIcon:e.createElement(X(),null),size:"L"},A({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})):null,title:C,subtitle:A({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),as:"h2"}),$&&e.createElement(ge.ActionLayout,{startActions:e.createElement(E.SearchURLQuery,{label:A({id:"app.component.search.label",defaultMessage:"Search for {target}"},{target:C})})}),$&&e.createElement(ge.ContentLayout,null,e.createElement(_.Table,{colCount:h,rowCount:g,footer:W?e.createElement(_.TFooter,{onClick:J,icon:e.createElement(X(),null)},A({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})):null},e.createElement(_.Thead,null,e.createElement(_.Tr,null,e.createElement(_.Th,null,e.createElement(Qe.Typography,{variant:"sigma",textColor:"neutral600"},A({id:"global.name",defaultMessage:"Name"}))),e.createElement(_.Th,null,e.createElement(Qe.Typography,{variant:"sigma",textColor:"neutral600"},A({id:"global.description",defaultMessage:"Description"}))),e.createElement(_.Th,null,e.createElement(Qe.Typography,{variant:"sigma",textColor:"neutral600"},A({id:"global.users",defaultMessage:"Users"}))),e.createElement(_.Th,null,e.createElement(pe.VisuallyHidden,null,A({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(_.Tbody,null,w==null?void 0:w.map(u=>e.createElement(Fe.Z,{key:u.id,id:u.id,name:u.name,description:u.description,usersCount:u.usersCount,icons:be(u)})))),!g&&!fe&&e.createElement(We.Z,null)),e.createElement(E.ConfirmDialog,{isOpen:Ve,onConfirm:f,isConfirmButtonLoading:je,onToggleDialog:et}))},_e=()=>e.createElement(E.CheckPagePermissions,{permissions:s.Z.settings.roles.main},e.createElement(He,null))},49475:(ae,D,a)=>{a.d(D,{Z:()=>U});var e=(X,De,Le)=>new Promise((de,Ue)=>{var z=ge=>{try{P(Le.next(ge))}catch(pe){Ue(pe)}},k=ge=>{try{P(Le.throw(ge))}catch(pe){Ue(pe)}},P=ge=>ge.done?de(ge.value):Promise.resolve(ge.value).then(z,k);P((Le=Le.apply(X,De)).next())});const U=[...strapi.features.isEnabled(strapi.features.SSO)?[{Component:()=>e(void 0,null,function*(){return yield a.e(302).then(a.bind(a,6688))}),to:"/settings/single-sign-on",exact:!0}]:[]]},12285:(ae,D,a)=>{ae.exports=a.p+"c3de6118ef47086ad05c.png"},31652:(ae,D,a)=>{ae.exports=a.p+"bd81ba6c07827282255d.png"}}]);
