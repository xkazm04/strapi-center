(self.webpackChunkstrapi=self.webpackChunkstrapi||[]).push([[8853],{56156:(G,Z,u)=>{"use strict";G.exports=u(44709)},44709:function(G,Z,u){(function(n,A){G.exports=A(u(53547),u(16384),u(39711),u(74657))})(this,function(n,A,b,S){return function(s){var g={};function a(c){if(g[c])return g[c].exports;var i=g[c]={i:c,l:!1,exports:{}};return s[c].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=s,a.c=g,a.d=function(c,i,R){a.o(c,i)||Object.defineProperty(c,i,{enumerable:!0,get:R})},a.r=function(c){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},a.t=function(c,i){if(1&i&&(c=a(c)),8&i||4&i&&typeof c=="object"&&c&&c.__esModule)return c;var R=Object.create(null);if(a.r(R),Object.defineProperty(R,"default",{enumerable:!0,value:c}),2&i&&typeof c!="string")for(var p in c)a.d(R,p,function(x){return c[x]}.bind(null,p));return R},a.n=function(c){var i=c&&c.__esModule?function(){return c.default}:function(){return c};return a.d(i,"a",i),i},a.o=function(c,i){return Object.prototype.hasOwnProperty.call(c,i)},a.p="",a(a.s=115)}({0:function(s,g,a){s.exports=a(19)()},1:function(s,g){s.exports=n},10:function(s,g,a){var c=a(25),i=a(26),R=a(22),p=a(27);s.exports=function(x,T){return c(x)||i(x,T)||R(x,T)||p()},s.exports.default=s.exports,s.exports.__esModule=!0},115:function(s,g,a){"use strict";a.r(g),a.d(g,"Link",function(){return ee});var c,i,R=a(5),p=a.n(R),x=a(4),T=a.n(x),D=a(3),w=a.n(D),_=a(1),f=a.n(_),L=a(0),I=a.n(L),N=a(2),F=a.n(N),z=a(83),o=a.n(z),d=a(37),P=a(8),q=a(6),oe=a(16),me=["href","to","children","disabled","startIcon","endIcon"],fe=F.a.a(c||(c=w()([`
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  pointer-events: `,`;
  svg path {
    fill: `,`;
  }
  svg {
    font-size: `,`rem;
  }
  &:hover,
  &:active {
    color: `,`;
  }
  `,`;
`])),function(j){return j.disabled?"none":void 0},function(j){var K=j.disabled,J=j.theme;return K?J.colors.neutral600:J.colors.primary600},.625,function(j){return j.theme.colors.primary800},oe.a),se=F()(q.Box)(i||(i=w()([`
  display: flex;
`]))),ee=function(j){var K=j.href,J=j.to,le=j.children,Y=j.disabled,ce=j.startIcon,ae=j.endIcon,Ee=T()(j,me),ge=K?"_blank":void 0,be=K?"noreferrer noopener":void 0;return f.a.createElement(fe,p()({as:J&&!Y?d.NavLink:"a",target:ge,rel:be,to:Y?void 0:J,href:Y?"#":K,disabled:Y},Ee),ce&&f.a.createElement(se,{as:"span","aria-hidden":!0,paddingRight:2},ce),f.a.createElement(P.Typography,{variant:"pi",textColor:Y?"neutral600":"primary600"},le),ae&&!K&&f.a.createElement(se,{as:"span","aria-hidden":!0,paddingLeft:2},ae),K&&f.a.createElement(se,{as:"span","aria-hidden":!0,paddingLeft:2},f.a.createElement(o.a,null)))};ee.displayName="Link",ee.defaultProps={href:void 0,to:void 0,disabled:!1},ee.propTypes={children:I.a.node.isRequired,disabled:I.a.bool,endIcon:I.a.element,href:function(j){if(!j.disabled&&!j.to&&!j.href)return new Error("href must be defined")},startIcon:I.a.element,to:function(j){if(!j.disabled&&!j.href&&!j.to)return new Error("to must be defined")}}},13:function(s,g){function a(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?(s.exports=a=function(i){return typeof i},s.exports.default=s.exports,s.exports.__esModule=!0):(s.exports=a=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},s.exports.default=s.exports,s.exports.__esModule=!0),a(c)}s.exports=a,s.exports.default=s.exports,s.exports.__esModule=!0},16:function(s,g,a){"use strict";a.d(g,"b",function(){return c}),a.d(g,"c",function(){return i}),a.d(g,"a",function(){return R});var c=function(p){return function(x){var T=x.theme,D=x.size;return T.sizes[p][D]}},i=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"&";return function(x){var T=x.theme,D=x.hasError;return`
      outline: none;
      box-shadow: 0;
      transition-property: border-color, box-shadow, fill;
      transition-duration: 0.2s;

      `.concat(p,`:focus-within {
        border: 1px solid `).concat(D?T.colors.danger600:T.colors.primary600,`;
        box-shadow: `).concat(D?T.colors.danger600:T.colors.primary600,` 0px 0px 0px 2px;
      }
    `)}},R=function(p){var x=p.theme;return`
  position: relative;
  outline: none;
  
  &:after {
    transition-property: all;
    transition-duration: 0.2s;
    border-radius: 8px;
    content: '';
    position: absolute;
    top: -4px;
    bottom: -4px;
    left: -4px;
    right: -4px;
    border: 2px solid transparent;
  }

  &:focus-visible {
    outline: none;
    &:after {
      border-radius: 8px;
      content: '';
      position: absolute;
      top: -5px;
      bottom: -5px;
      left: -5px;
      right: -5px;
      border: 2px solid `.concat(x.colors.primary600,`;
    }
  }
`)}},19:function(s,g,a){"use strict";var c=a(20);function i(){}function R(){}R.resetWarningCache=i,s.exports=function(){function p(D,w,_,f,L,I){if(I!==c){var N=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw N.name="Invariant Violation",N}}function x(){return p}p.isRequired=p;var T={array:p,bool:p,func:p,number:p,object:p,string:p,symbol:p,any:p,arrayOf:x,element:p,elementType:p,instanceOf:x,node:p,objectOf:x,oneOf:x,oneOfType:x,shape:x,exact:x,checkPropTypes:R,resetWarningCache:i};return T.PropTypes=T,T}},2:function(s,g){s.exports=A},20:function(s,g,a){"use strict";s.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},21:function(s,g){s.exports=function(a,c){(c==null||c>a.length)&&(c=a.length);for(var i=0,R=new Array(c);i<c;i++)R[i]=a[i];return R},s.exports.default=s.exports,s.exports.__esModule=!0},22:function(s,g,a){var c=a(21);s.exports=function(i,R){if(i){if(typeof i=="string")return c(i,R);var p=Object.prototype.toString.call(i).slice(8,-1);return p==="Object"&&i.constructor&&(p=i.constructor.name),p==="Map"||p==="Set"?Array.from(i):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?c(i,R):void 0}},s.exports.default=s.exports,s.exports.__esModule=!0},24:function(s,g){s.exports=function(a,c){if(a==null)return{};var i,R,p={},x=Object.keys(a);for(R=0;R<x.length;R++)i=x[R],c.indexOf(i)>=0||(p[i]=a[i]);return p},s.exports.default=s.exports,s.exports.__esModule=!0},25:function(s,g){s.exports=function(a){if(Array.isArray(a))return a},s.exports.default=s.exports,s.exports.__esModule=!0},26:function(s,g){s.exports=function(a,c){var i=a==null?null:typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(i!=null){var R,p,x=[],T=!0,D=!1;try{for(i=i.call(a);!(T=(R=i.next()).done)&&(x.push(R.value),!c||x.length!==c);T=!0);}catch(w){D=!0,p=w}finally{try{T||i.return==null||i.return()}finally{if(D)throw p}}return x}},s.exports.default=s.exports,s.exports.__esModule=!0},27:function(s,g){s.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},s.exports.default=s.exports,s.exports.__esModule=!0},3:function(s,g){s.exports=function(a,c){return c||(c=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(c)}}))},s.exports.default=s.exports,s.exports.__esModule=!0},37:function(s,g){s.exports=b},4:function(s,g,a){var c=a(24);s.exports=function(i,R){if(i==null)return{};var p,x,T=c(i,R);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(i);for(x=0;x<D.length;x++)p=D[x],R.indexOf(p)>=0||Object.prototype.propertyIsEnumerable.call(i,p)&&(T[p]=i[p])}return T},s.exports.default=s.exports,s.exports.__esModule=!0},5:function(s,g){function a(){return s.exports=a=Object.assign||function(c){for(var i=1;i<arguments.length;i++){var R=arguments[i];for(var p in R)Object.prototype.hasOwnProperty.call(R,p)&&(c[p]=R[p])}return c},s.exports.default=s.exports,s.exports.__esModule=!0,a.apply(this,arguments)}s.exports=a,s.exports.default=s.exports,s.exports.__esModule=!0},6:function(s,g,a){"use strict";a.r(g),a.d(g,"Box",function(){return z});var c,i=a(3),R=a.n(i),p=a(2),x=a.n(p),T=a(7),D=a(1),w=a.n(D),_=a(0),f=a.n(_),L=function(o){return w.a.createElement("div",o)},I={background:void 0,borderColor:void 0,color:void 0,hiddenS:!1,hiddenXS:!1,padding:void 0,paddingTop:void 0,paddingRight:void 0,paddingBottom:void 0,paddingLeft:void 0,hasRadius:!1,shadow:void 0,children:null,shrink:void 0,grow:void 0,basis:void 0,flex:void 0,_hover:function(){}},N={_hover:f.a.func,background:f.a.string,basis:f.a.oneOfType([f.a.string,f.a.string]),borderColor:f.a.string,children:f.a.oneOfType([f.a.node,f.a.string]),color:f.a.string,flex:f.a.oneOfType([f.a.string,f.a.string]),grow:f.a.oneOfType([f.a.string,f.a.string]),hasRadius:f.a.bool,hiddenS:f.a.bool,hiddenXS:f.a.bool,padding:f.a.oneOfType([f.a.number,f.a.arrayOf(f.a.number)]),paddingBottom:f.a.oneOfType([f.a.number,f.a.arrayOf(f.a.number)]),paddingLeft:f.a.oneOfType([f.a.number,f.a.arrayOf(f.a.number)]),paddingRight:f.a.oneOfType([f.a.number,f.a.arrayOf(f.a.number)]),paddingTop:f.a.oneOfType([f.a.number,f.a.arrayOf(f.a.number)]),shadow:f.a.string,shrink:f.a.oneOfType([f.a.string,f.a.string])};L.defaultProps=I,L.propTypes=N;var F={color:!0},z=x.a.div.withConfig({shouldForwardProp:function(o,d){return!F[o]&&d(o)}})(c||(c=R()([`
  // Font
  font-size: `,`;

  // Colors
  background: `,`;
  color: `,`;

  // Spaces
  `,`
  `,`
  `,`
  `,`
  `,`
  `,`
  `,`
  `,`
  `,`

  // Responsive hiding
  `,`
  `,`
  

  // Borders
  border-radius: `,`;
  border-style: `,`;
  border-width: `,`;
  border-color: `,`;
  border: `,`;

  // Shadows
  box-shadow: `,`;

  // Handlers
  pointer-events: `,`;
  &:hover {
    `,`
  }

  // Display
  display: `,`;

  // Position
  position: `,`;
  left: `,`;
  right: `,`;
  top: `,`;
  bottom: `,`;
  z-index: `,`;
  overflow: `,`;
  cursor: `,`;

  // Size
  width: `,`;
  max-width: `,`;
  min-width: `,`;
  height: `,`;
  max-height: `,`;
  min-height: `,`;

  // Animation
  transition: `,`;
  transform: `,`;
  animation: `,`;

  //Flexbox children props
  flex-shrink: `,`;
  flex-grow: `,`;
  flex-basis: `,`;
  flex: `,`;

  // Text
  text-align: `,`;
  text-transform: `,`;
  line-height: `,`;

  // Cursor
  cursor: `,`;
`])),function(o){var d=o.fontSize;return o.theme.fontSizes[d]||d},function(o){var d=o.theme,P=o.background;return d.colors[P]},function(o){var d=o.theme,P=o.color;return d.colors[P]},function(o){var d=o.theme,P=o.padding;return Object(T.a)("padding",P,d)},function(o){var d=o.theme,P=o.paddingTop;return Object(T.a)("padding-top",P,d)},function(o){var d=o.theme,P=o.paddingRight;return Object(T.a)("padding-right",P,d)},function(o){var d=o.theme,P=o.paddingBottom;return Object(T.a)("padding-bottom",P,d)},function(o){var d=o.theme,P=o.paddingLeft;return Object(T.a)("padding-left",P,d)},function(o){var d=o.theme,P=o.marginLeft;return Object(T.a)("margin-left",P,d)},function(o){var d=o.theme,P=o.marginRight;return Object(T.a)("margin-right",P,d)},function(o){var d=o.theme,P=o.marginTop;return Object(T.a)("margin-top",P,d)},function(o){var d=o.theme,P=o.marginBottom;return Object(T.a)("margin-bottom",P,d)},function(o){var d=o.theme;return o.hiddenS?"".concat(d.mediaQueries.tablet," { display: none; }"):void 0},function(o){var d=o.theme;return o.hiddenXS?"".concat(d.mediaQueries.mobile," { display: none; }"):void 0},function(o){var d=o.theme,P=o.hasRadius,q=o.borderRadius;return P?d.borderRadius:q},function(o){return o.borderStyle},function(o){return o.borderWidth},function(o){var d=o.borderColor;return o.theme.colors[d]},function(o){var d=o.theme,P=o.borderColor,q=o.borderStyle,oe=o.borderWidth;if(P&&!q&&!oe)return"1px solid ".concat(d.colors[P])},function(o){var d=o.theme,P=o.shadow;return d.shadows[P]},function(o){return o.pointerEvents},function(o){var d=o._hover,P=o.theme;return d?d(P):void 0},function(o){return o.display},function(o){return o.position},function(o){var d=o.left;return o.theme.spaces[d]||d},function(o){var d=o.right;return o.theme.spaces[d]||d},function(o){var d=o.top;return o.theme.spaces[d]||d},function(o){var d=o.bottom;return o.theme.spaces[d]||d},function(o){return o.zIndex},function(o){return o.overflow},function(o){return o.cursor},function(o){var d=o.width;return o.theme.spaces[d]||d},function(o){var d=o.maxWidth;return o.theme.spaces[d]||d},function(o){var d=o.minWidth;return o.theme.spaces[d]||d},function(o){var d=o.height;return o.theme.spaces[d]||d},function(o){var d=o.maxHeight;return o.theme.spaces[d]||d},function(o){var d=o.minHeight;return o.theme.spaces[d]||d},function(o){return o.transition},function(o){return o.transform},function(o){return o.animation},function(o){return o.shrink},function(o){return o.grow},function(o){return o.basis},function(o){return o.flex},function(o){return o.textAlign},function(o){return o.textTransform},function(o){return o.lineHeight},function(o){return o.cursor});z.defaultProps=I,z.propTypes=N},7:function(s,g,a){"use strict";var c=a(10),i=a.n(c),R=a(13),p=a.n(R);g.a=function(x,T,D){var w=T;if(Array.isArray(T)||p()(T)!=="object"||(w=[T==null?void 0:T.desktop,T==null?void 0:T.tablet,T==null?void 0:T.mobile]),w!==void 0){if(Array.isArray(w)){var _=w,f=i()(_,3),L=f[0],I=f[1],N=f[2],F="".concat(x,": ").concat(D.spaces[L],";");return I!==void 0&&(F+="".concat(D.mediaQueries.tablet,`{
          `).concat(x,": ").concat(D.spaces[I],`;
        }`)),N!==void 0&&(F+="".concat(D.mediaQueries.mobile,`{
          `).concat(x,": ").concat(D.spaces[N],`;
        }`)),F}var z=D.spaces[w]||w;return"".concat(x,": ").concat(z,";")}}},8:function(s,g,a){"use strict";a.r(g),a.d(g,"Typography",function(){return z});var c,i=a(3),R=a.n(i),p=a(2),x=a.n(p),T=["alpha","beta","delta","epsilon","omega","pi","sigma"],D=a(1),w=a.n(D),_=a(0),f=a.n(_),L=function(o){return w.a.createElement("div",o)},I={ellipsis:!1,fontWeight:void 0,fontSize:void 0,lineHeight:void 0,textColor:void 0,textTransform:void 0,variant:"omega"},N={ellipsis:f.a.bool,fontSize:f.a.oneOfType([f.a.number,f.a.string]),fontWeight:f.a.string,lineHeight:f.a.oneOfType([f.a.number,f.a.string]),textColor:f.a.string,textTransform:f.a.string,variant:f.a.oneOf(T)};L.defaultProps=I,L.propTypes=N;var F={fontSize:!0,fontWeight:!0},z=x.a.span.withConfig({shouldForwardProp:function(o,d){return!F[o]&&d(o)}})(c||(c=R()([`
  font-weight: `,`;
  font-size: `,`;
  line-height: `,`;
  color: `,`;
  text-transform: `,`;
  `,`
  `,`
`])),function(o){var d=o.theme,P=o.fontWeight;return d.fontWeights[P]},function(o){var d=o.theme,P=o.fontSize;return d.fontSizes[P]},function(o){var d=o.theme,P=o.lineHeight;return d.lineHeights[P]},function(o){var d=o.theme,P=o.textColor;return d.colors[P||"neutral800"]},function(o){return o.textTransform},function(o){return o.ellipsis&&`
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `},function(o){var d=o.variant,P=o.theme;switch(d){case"alpha":return`
        font-weight: `.concat(P.fontWeights.bold,`;
        font-size: `).concat(P.fontSizes[5],`;
        line-height: `).concat(P.lineHeights[2],`;
      `);case"beta":return`
        font-weight: `.concat(P.fontWeights.bold,`;
        font-size: `).concat(P.fontSizes[4],`;
        line-height: `).concat(P.lineHeights[1],`;
      `);case"delta":return`
        font-weight: `.concat(P.fontWeights.semiBold,`;
        font-size: `).concat(P.fontSizes[3],`;
        line-height: `).concat(P.lineHeights[2],`;
      `);case"epsilon":return`
        font-size: `.concat(P.fontSizes[3],`;
        line-height: `).concat(P.lineHeights[6],`;
      `);case"omega":return`
        font-size: `.concat(P.fontSizes[2],`;
        line-height: `).concat(P.lineHeights[4],`;
      `);case"pi":return`
        font-size: `.concat(P.fontSizes[1],`;
        line-height: `).concat(P.lineHeights[3],`;
      `);case"sigma":return`
        font-weight: `.concat(P.fontWeights.bold,`;
        font-size: `).concat(P.fontSizes[0],`;
        line-height: `).concat(P.lineHeights[5],`;
        text-transform: uppercase;
      `);default:return`
        font-size: `.concat(P.fontSizes[2],`;
      `)}});z.defaultProps=I,z.propTypes=N},83:function(s,g){s.exports=S}})})},87760:function(G,Z,u){(function(n,A){G.exports=A(u(53547))})(this,function(n){return function(A){var b={};function S(s){if(b[s])return b[s].exports;var g=b[s]={i:s,l:!1,exports:{}};return A[s].call(g.exports,g,g.exports,S),g.l=!0,g.exports}return S.m=A,S.c=b,S.d=function(s,g,a){S.o(s,g)||Object.defineProperty(s,g,{enumerable:!0,get:a})},S.r=function(s){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},S.t=function(s,g){if(1&g&&(s=S(s)),8&g||4&g&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(S.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),2&g&&typeof s!="string")for(var c in s)S.d(a,c,function(i){return s[i]}.bind(null,c));return a},S.n=function(s){var g=s&&s.__esModule?function(){return s.default}:function(){return s};return S.d(g,"a",g),g},S.o=function(s,g){return Object.prototype.hasOwnProperty.call(s,g)},S.p="",S(S.s=5)}({0:function(A,b){A.exports=n},5:function(A,b,S){"use strict";S.r(b);var s=S(0);function g(){return(g=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var i=arguments[c];for(var R in i)Object.prototype.hasOwnProperty.call(i,R)&&(a[R]=i[R])}return a}).apply(this,arguments)}b.default=function(a){return s.createElement("svg",g({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a),s.createElement("path",{d:"M24 13.3a.2.2 0 01-.2.2H5.74l8.239 8.239a.2.2 0 010 .282L12.14 23.86a.2.2 0 01-.282 0L.14 12.14a.2.2 0 010-.282L11.86.14a.2.2 0 01.282 0L13.98 1.98a.2.2 0 010 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6z",fill:"#212134"}))}}})})},19417:(G,Z,u)=>{"use strict";u.r(Z),u.d(Z,{default:()=>wn});var n=u(53547),A=u(49656),b=u(74898),S=u(83086),s=u(51725),g=u(64459),a=u(35395),c=u(80117),i=u(43546),R=u(19631),p=u(33483),x=u(67422),T=u(89326),D=u.n(T),w=u(97132),_=u(23724),f=u(63852),L=u(42722),I=(r,e,t)=>new Promise((h,E)=>{var v=l=>{try{m(t.next(l))}catch(y){E(y)}},O=l=>{try{m(t.throw(l))}catch(y){E(y)}},m=l=>l.done?h(l.value):Promise.resolve(l.value).then(v,O);m((t=t.apply(r,e)).next())});const N=(r,e)=>I(void 0,null,function*(){try{const{data:t}=yield L.be.get((0,L.Gc)("roles"));return e("The roles have loaded successfully"),t}catch(t){throw r({type:"warning",message:{id:"notification.error"}}),new Error("error")}}),F=(r,e)=>I(void 0,null,function*(){try{yield L.be.delete(`${(0,L.Gc)("roles")}/${r}`)}catch(t){e({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}});var z=u(45697),o=u.n(z),d=u(49549),P=u(40264),q=u(56204),oe=u.n(q),me=u(62982),fe=u.n(me),se=Object.defineProperty,ee=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,J=(r,e,t)=>e in r?se(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,le=(r,e)=>{for(var t in e||(e={}))j.call(e,t)&&J(r,t,e[t]);if(ee)for(var t of ee(e))K.call(e,t)&&J(r,t,e[t]);return r};const Y=({sortedRoles:r,canDelete:e,permissions:t,setRoleToDelete:h,onDelete:E})=>{const{formatMessage:v}=(0,w.useIntl)(),{push:O}=(0,A.useHistory)(),[m,l]=E,y=C=>e&&!["public","authenticated"].includes(C.type),M=C=>{h(C),l(!m)},U=C=>{O(`/settings/${S.Z}/roles/${C}`)};return n.createElement(i.Tbody,null,r==null?void 0:r.map(C=>n.createElement(i.Tr,le({key:C.name},(0,b.onRowClick)({fn:()=>U(C.id)})),n.createElement(i.Td,{width:"20%"},n.createElement(p.Typography,null,C.name)),n.createElement(i.Td,{width:"50%"},n.createElement(p.Typography,null,C.description)),n.createElement(i.Td,{width:"30%"},n.createElement(p.Typography,null,`${C.nb_users} ${v({id:(0,L.OB)("Roles.users"),defaultMessage:"users"}).toLowerCase()}`)),n.createElement(i.Td,null,n.createElement(P.Flex,le({justifyContent:"end"},b.stopPropagation),n.createElement(b.CheckPermissions,{permissions:t.updateRole},n.createElement(d.IconButton,{onClick:()=>U(C.id),noBorder:!0,icon:n.createElement(oe(),null),label:v({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:`${C.name}`})})),y(C)&&n.createElement(b.CheckPermissions,{permissions:t.deleteRole},n.createElement(d.IconButton,{onClick:()=>M(C.id),noBorder:!0,icon:n.createElement(fe(),null),label:v({id:"app.component.table.delete",defaultMessage:"Delete {target}"},{target:`${C.name}`})})))))))},ce=Y;Y.defaultProps={canDelete:!1},Y.propTypes={onDelete:o().array.isRequired,permissions:o().object.isRequired,setRoleToDelete:o().func.isRequired,sortedRoles:o().array.isRequired,canDelete:o().bool};var ae=(r,e,t)=>new Promise((h,E)=>{var v=l=>{try{m(t.next(l))}catch(y){E(y)}},O=l=>{try{m(t.throw(l))}catch(y){E(y)}},m=l=>l.done?h(l.value):Promise.resolve(l.value).then(v,O);m((t=t.apply(r,e)).next())});const ge=()=>{const{trackUsage:r}=(0,b.useTracking)(),{formatMessage:e}=(0,w.useIntl)(),{push:t}=(0,A.useHistory)(),h=(0,b.useNotification)(),{notifyStatus:E}=(0,x.useNotifyAT)(),[{query:v}]=(0,b.useQueryParams)(),O=(v==null?void 0:v._q)||"",[m,l]=(0,n.useState)(!1),[y,M]=(0,n.useState)(!1),[U,C]=(0,n.useState)();(0,b.useFocusWhenNavigate)();const k=(0,_.useQueryClient)(),B=(0,n.useMemo)(()=>({create:s.Z.createRole,read:s.Z.readRoles,update:s.Z.updateRole,delete:s.Z.deleteRole}),[]),{isLoading:W,allowedActions:{canRead:V,canDelete:ne}}=(0,b.useRBAC)(B),{isLoading:Dn,data:{roles:Pe},isFetching:An}=(0,_.useQuery)("get-roles",()=>N(h,E),{initialData:{},enabled:V}),dt=Dn||An,Ln=()=>{r("willCreateRole"),t(`/settings/${S.Z}/roles/new`)},jn=()=>{l(!m)},Mn={roles:{id:(0,L.OB)("Roles.empty"),defaultMessage:"You don't have any roles yet."},search:{id:(0,L.OB)("Roles.empty.search"),defaultMessage:"No roles match the search."}},_n=e({id:(0,L.OB)("HeaderNav.link.roles"),defaultMessage:"Roles"}),In=(0,_.useMutation)(zn=>F(zn,h),{onSuccess:()=>ae(void 0,null,function*(){yield k.invalidateQueries("get-roles")})}),Un=()=>ae(void 0,null,function*(){M(!0),yield In.mutateAsync(U),l(!m),M(!1)}),ie=(0,f.ZP)(Pe||[],O,{keys:["name","description"]}),Bn=O&&!ie.length?"search":"roles",Nn=4,kn=((Pe==null?void 0:Pe.length)||0)+1;return n.createElement(a.Layout,null,n.createElement(b.SettingsPageTitle,{name:_n}),n.createElement(c.Main,{"aria-busy":dt},n.createElement(a.HeaderLayout,{title:e({id:"Settings.roles.title",defaultMessage:"Roles"}),subtitle:e({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),primaryAction:n.createElement(b.CheckPermissions,{permissions:s.Z.createRole},n.createElement(g.Button,{onClick:Ln,startIcon:n.createElement(D(),null),size:"L"},e({id:(0,L.OB)("List.button.roles"),defaultMessage:"Add new role"})))}),n.createElement(a.ActionLayout,{startActions:n.createElement(b.SearchURLQuery,{label:e({id:"app.component.search.label",defaultMessage:"Search"})})}),n.createElement(a.ContentLayout,null,!V&&n.createElement(b.NoPermissions,null),(dt||W)&&n.createElement(b.LoadingIndicatorPage,null),V&&ie&&(ie==null?void 0:ie.length)?n.createElement(i.Table,{colCount:Nn,rowCount:kn},n.createElement(i.Thead,null,n.createElement(i.Tr,null,n.createElement(i.Th,null,n.createElement(p.Typography,{variant:"sigma",textColor:"neutral600"},e({id:(0,L.OB)("Roles.name"),defaultMessage:"Name"}))),n.createElement(i.Th,null,n.createElement(p.Typography,{variant:"sigma",textColor:"neutral600"},e({id:(0,L.OB)("Roles.description"),defaultMessage:"Description"}))),n.createElement(i.Th,null,n.createElement(p.Typography,{variant:"sigma",textColor:"neutral600"},e({id:(0,L.OB)("Roles.users"),defaultMessage:"Users"}))),n.createElement(i.Th,null,n.createElement(R.VisuallyHidden,null,e({id:"components.TableHeader.actions-label",defaultMessage:"Actions"}))))),n.createElement(ce,{sortedRoles:ie,canDelete:ne,permissions:s.Z,setRoleToDelete:C,onDelete:[m,l]})):n.createElement(b.EmptyStateLayout,{content:Mn[Bn]})),n.createElement(b.ConfirmDialog,{isConfirmButtonLoading:y,onConfirm:Un,onToggleDialog:jn,isOpen:m})))},pt=()=>n.createElement(b.CheckPagePermissions,{permissions:s.Z.accessRoles},n.createElement(ge,null));var $=u(9524),Q=u(94117),Oe=u(99136),Re=u(78607),mt=u(87760),ft=u.n(mt),gt=u(22754),xe=u.n(gt),ht=u(56156),H=u(39272),Te=u(80831),te=u(97961),X=u(96486);const Ce=(0,n.createContext)({}),Se=({children:r,value:e})=>n.createElement(Ce.Provider,{value:e},r),he=()=>(0,n.useContext)(Ce);Se.propTypes={children:o().node.isRequired,value:o().object.isRequired};var ue=u(16384),vt=u(35161),yt=u.n(vt),Pt=u(13217),Et=u.n(Pt);const bt=r=>{switch(r){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}},Ot=(0,ue.default)(Q.Box)`
  margin: -1px;
  border-radius: ${({theme:r})=>r.spaces[1]} 0 0 ${({theme:r})=>r.spaces[1]};
`;function ve({route:r}){const{formatMessage:e}=(0,w.useIntl)(),{method:t,handler:h,path:E}=r,v=E?Et()(E.split("/")):[],[O="",m=""]=h?h.split("."):[],l=bt(r.method);return n.createElement($.Stack,{size:2},n.createElement(p.Typography,{variant:"delta",as:"h3"},e({id:"users-permissions.BoundRoute.title",defaultMessage:"Bound route to"}),"\xA0",n.createElement("span",null,O),n.createElement(p.Typography,{variant:"delta",textColor:"primary600"},".",m)),n.createElement($.Stack,{horizontal:!0,hasRadius:!0,background:"neutral0",borderColor:"neutral200",size:0},n.createElement(Ot,{background:l.background,borderColor:l.border,padding:2},n.createElement(p.Typography,{fontWeight:"bold",textColor:l.text},t)),n.createElement(Q.Box,{paddingLeft:2,paddingRight:2},yt()(v,y=>n.createElement(p.Typography,{key:y,textColor:y.includes(":")?"neutral600":"neutral900"},"/",y)))))}ve.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},ve.propTypes={route:o().shape({handler:o().string,method:o().string,path:o().string})};const Rt=ve,xt=()=>{const{formatMessage:r}=(0,w.useIntl)(),{selectedAction:e,routes:t}=he(),h=(0,X.without)(e.split("."),"controllers"),E=(0,X.get)(t,h[0]),v=h.slice(1).join("."),O=(0,X.isEmpty)(E)?[]:E.filter(m=>m.handler.endsWith(v));return n.createElement(H.GridItem,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"}},e?n.createElement($.Stack,{size:2},O.map((m,l)=>n.createElement(Rt,{key:l,route:m}))):n.createElement($.Stack,{size:2},n.createElement(p.Typography,{variant:"delta",as:"h3"},r({id:"users-permissions.Policies.header.title",defaultMessage:"Advanced settings"})),n.createElement(p.Typography,{as:"p",textColor:"neutral600"},r({id:"users-permissions.Policies.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"}))))};var ye=u(47949),Tt=u(11700),Ct=u.n(Tt);function St(r){switch(r){case"application":return"Application";case"plugin::content-manager":return"Content manager";case"plugin::content-type-builder":return"Content types builder";case"plugin::documentation":return"Documentation";case"plugin::email":return"Email";case"plugin::i18n":return"i18n";case"plugin::upload":return"Upload";case"plugin::users-permissions":return"Users-permissions";default:return Ct()(r.replace("api::","").replace("plugin::",""))}}const wt=St;var Dt=u(89734),we=u.n(Dt),De=u(43499),At=u(17581),Lt=u.n(At);const Ae=ue.css`
  background: ${r=>r.theme.colors.primary100};
  svg {
    opacity: 1;
  }
`,jt=(0,ue.default)(Q.Box)`
  display: flex;
  justify-content: space-between;
  align-items: center;

  svg {
    opacity: 0;
    path {
      fill: ${r=>r.theme.colors.primary600};
    }
  }

  /* Show active style both on hover and when the action is selected */
  ${r=>r.isActive&&Ae}
  &:hover {
    ${Ae}
  }
`,Mt=ue.default.div`
  flex: 1;
  align-self: center;
  border-top: 1px solid ${({theme:r})=>r.colors.neutral150};
`,Le=({subCategory:r})=>{const{formatMessage:e}=(0,w.useIntl)(),{onChange:t,onChangeSelectAll:h,onSelectedAction:E,selectedAction:v,modifiedData:O}=he(),m=(0,n.useMemo)(()=>(0,X.get)(O,r.name,{}),[O,r]),l=(0,n.useMemo)(()=>Object.values(m).every(C=>C.enabled===!0),[m]),y=(0,n.useMemo)(()=>Object.values(m).some(C=>C.enabled===!0)&&!l,[m,l]),M=(0,n.useCallback)(({target:{name:C}})=>{h({target:{name:C,value:!l}})},[l,h]),U=(0,n.useCallback)(C=>v===C,[v]);return n.createElement(Q.Box,null,n.createElement(P.Flex,{justifyContent:"space-between",alignItems:"center"},n.createElement(Q.Box,{paddingRight:4},n.createElement(p.Typography,{variant:"sigma",textColor:"neutral600"},r.label)),n.createElement(Mt,null),n.createElement(Q.Box,{paddingLeft:4},n.createElement(De.Checkbox,{name:r.name,value:l,onValueChange:C=>M({target:{name:r.name,value:C}}),indeterminate:y},e({id:"app.utils.select-all",defaultMessage:"Select all"})))),n.createElement(P.Flex,{paddingTop:6,paddingBottom:6},n.createElement(H.Grid,{gap:2,style:{flex:1}},r.actions.map(C=>{const k=`${C.name}.enabled`;return n.createElement(H.GridItem,{col:6,key:C.name},n.createElement(jt,{isActive:U(C.name),padding:2,hasRadius:!0},n.createElement(De.Checkbox,{value:(0,X.get)(O,k,!1),name:k,onValueChange:B=>t({target:{name:k,value:B}})},C.label),n.createElement("button",{type:"button","data-testid":"action-cog",onClick:()=>E(C.name),style:{display:"inline-flex",alignItems:"center"}},n.createElement(Lt(),null))))}))))};Le.propTypes={subCategory:o().object.isRequired};const _t=Le;var It=Object.defineProperty,Ut=Object.defineProperties,Bt=Object.getOwnPropertyDescriptors,je=Object.getOwnPropertySymbols,Nt=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable,Me=(r,e,t)=>e in r?It(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,zt=(r,e)=>{for(var t in e||(e={}))Nt.call(e,t)&&Me(r,t,e[t]);if(je)for(var t of je(e))kt.call(e,t)&&Me(r,t,e[t]);return r},Gt=(r,e)=>Ut(r,Bt(e));const _e=({name:r,permissions:e})=>{const t=(0,n.useMemo)(()=>we()(Object.values(e.controllers).reduce((h,E,v)=>{const O=`${r}.controllers.${Object.keys(e.controllers)[v]}`,m=we()(Object.keys(E).reduce((l,y)=>[...l,Gt(zt({},E[y]),{label:y,name:`${O}.${y}`})],[]),"label");return[...h,{actions:m,label:Object.keys(e.controllers)[v],name:O}]},[]),"label"),[r,e]);return n.createElement(Q.Box,{padding:6},t.map(h=>n.createElement(_t,{key:h.name,subCategory:h})))};_e.propTypes={name:o().string.isRequired,permissions:o().object.isRequired};const Ft=_e;var Zt=Object.defineProperty,$t=Object.defineProperties,Ht=Object.getOwnPropertyDescriptors,Ie=Object.getOwnPropertySymbols,Wt=Object.prototype.hasOwnProperty,Vt=Object.prototype.propertyIsEnumerable,Ue=(r,e,t)=>e in r?Zt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Qt=(r,e)=>{for(var t in e||(e={}))Wt.call(e,t)&&Ue(r,t,e[t]);if(Ie)for(var t of Ie(e))Vt.call(e,t)&&Ue(r,t,e[t]);return r},Xt=(r,e)=>$t(r,Ht(e));const Kt=(r,e)=>{const t=Object.keys(e).sort().map(h=>({name:h,isOpen:!1}));return Xt(Qt({},r),{collapses:t})};var de=u(8041),Yt=Object.defineProperty,Jt=Object.defineProperties,qt=Object.getOwnPropertyDescriptors,Be=Object.getOwnPropertySymbols,er=Object.prototype.hasOwnProperty,tr=Object.prototype.propertyIsEnumerable,Ne=(r,e,t)=>e in r?Yt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ke=(r,e)=>{for(var t in e||(e={}))er.call(e,t)&&Ne(r,t,e[t]);if(Be)for(var t of Be(e))tr.call(e,t)&&Ne(r,t,e[t]);return r},ze=(r,e)=>Jt(r,qt(e));const rr={collapses:[]},nr=(r,e)=>(0,de.default)(r,t=>{switch(e.type){case"TOGGLE_COLLAPSE":{t.collapses=r.collapses.map((h,E)=>E===e.index?ze(ke({},h),{isOpen:!h.isOpen}):ze(ke({},h),{isOpen:!1}));break}default:return t}}),or=()=>{const{modifiedData:r}=he(),{formatMessage:e}=(0,w.useIntl)(),[{collapses:t},h]=(0,n.useReducer)(nr,rr,v=>Kt(v,r)),E=v=>h({type:"TOGGLE_COLLAPSE",index:v});return n.createElement($.Stack,{size:1},t.map((v,O)=>n.createElement(ye.Accordion,{expanded:v.isOpen,toggle:()=>E(O),key:v.name,variant:O%2===0?"secondary":void 0},n.createElement(ye.AccordionToggle,{title:wt(v.name),description:e({id:"users-permissions.Plugin.permissions.plugins.description",defaultMessage:"Define all allowed actions for the {name} plugin."},{name:v.name}),variant:O%2?"primary":"secondary"}),n.createElement(ye.AccordionContent,null,n.createElement(Q.Box,null,n.createElement(Ft,{permissions:r[v.name],name:v.name}))))))};var sr=Object.defineProperty,ar=Object.defineProperties,ir=Object.getOwnPropertyDescriptors,Ge=Object.getOwnPropertySymbols,lr=Object.prototype.hasOwnProperty,cr=Object.prototype.propertyIsEnumerable,Fe=(r,e,t)=>e in r?sr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ur=(r,e)=>{for(var t in e||(e={}))lr.call(e,t)&&Fe(r,t,e[t]);if(Ge)for(var t of Ge(e))cr.call(e,t)&&Fe(r,t,e[t]);return r},dr=(r,e)=>ar(r,ir(e));const pr={initialData:{},modifiedData:{},routes:{},selectedAction:"",policies:[]},mr=(r,e)=>(0,de.default)(r,t=>{switch(e.type){case"ON_CHANGE":{const h=e.keys.length,E=e.keys[h-1]==="enabled";if(e.value&&E){const v=(0,X.take)(e.keys,h-1).join(".");t.selectedAction=v}(0,X.set)(t,["modifiedData",...e.keys],e.value);break}case"ON_CHANGE_SELECT_ALL":{const h=["modifiedData",...e.keys],E=(0,X.get)(r,h,{}),v=Object.keys(E).reduce((O,m)=>(O[m]=dr(ur({},E[m]),{enabled:e.value}),O),{});(0,X.set)(t,h,v);break}case"ON_RESET":{t.modifiedData=r.initialData;break}case"ON_SUBMIT_SUCCEEDED":{t.initialData=r.modifiedData;break}case"SELECT_ACTION":{const{actionToSelect:h}=e;t.selectedAction=h===r.selectedAction?"":h;break}default:return t}});var fr=Object.defineProperty,gr=Object.defineProperties,hr=Object.getOwnPropertyDescriptors,Ze=Object.getOwnPropertySymbols,vr=Object.prototype.hasOwnProperty,yr=Object.prototype.propertyIsEnumerable,$e=(r,e,t)=>e in r?fr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Pr=(r,e)=>{for(var t in e||(e={}))vr.call(e,t)&&$e(r,t,e[t]);if(Ze)for(var t of Ze(e))yr.call(e,t)&&$e(r,t,e[t]);return r},Er=(r,e)=>gr(r,hr(e));const br=(r,e,t)=>Er(Pr({},r),{initialData:e,modifiedData:e,routes:t});var Or=Object.defineProperty,Rr=Object.defineProperties,xr=Object.getOwnPropertyDescriptors,He=Object.getOwnPropertySymbols,Tr=Object.prototype.hasOwnProperty,Cr=Object.prototype.propertyIsEnumerable,We=(r,e,t)=>e in r?Or(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Sr=(r,e)=>{for(var t in e||(e={}))Tr.call(e,t)&&We(r,t,e[t]);if(He)for(var t of He(e))Cr.call(e,t)&&We(r,t,e[t]);return r},wr=(r,e)=>Rr(r,xr(e));const Ve=(0,n.forwardRef)(({permissions:r,routes:e},t)=>{const{formatMessage:h}=(0,w.useIntl)(),[E,v]=(0,n.useReducer)(mr,pr,M=>br(M,r,e));(0,n.useImperativeHandle)(t,()=>({getPermissions:()=>({permissions:E.modifiedData}),resetForm:()=>{v({type:"ON_RESET"})},setFormAfterSubmit:()=>{v({type:"ON_SUBMIT_SUCCEEDED"})}}));const O=({target:{name:M,value:U}})=>v({type:"ON_CHANGE",keys:M.split("."),value:U==="empty__string_value"?"":U}),m=({target:{name:M,value:U}})=>v({type:"ON_CHANGE_SELECT_ALL",keys:M.split("."),value:U}),l=M=>v({type:"SELECT_ACTION",actionToSelect:M}),y=wr(Sr({},E),{onChange:O,onChangeSelectAll:m,onSelectedAction:l});return n.createElement(Se,{value:y},n.createElement(H.Grid,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0"},n.createElement(H.GridItem,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},n.createElement($.Stack,{size:6},n.createElement($.Stack,{size:2},n.createElement(p.Typography,{variant:"delta",as:"h2"},h({id:(0,te.Z)("Plugins.header.title"),defaultMessage:"Permissions"})),n.createElement(p.Typography,{as:"p",textColor:"neutral600"},h({id:(0,te.Z)("Plugins.header.description"),defaultMessage:"Only actions bound by a route are listed below."}))),n.createElement(or,null))),n.createElement(xt,null)))});Ve.propTypes={permissions:o().object.isRequired,routes:o().object.isRequired};const Qe=(0,n.memo)(Ve),Qn={isLoading:!0,modifiedData:{}},Xn=(r,e)=>produce(r,t=>{switch(e.type){case"GET_DATA":{t.isLoading=!0,t.modifiedData={};break}case"GET_DATA_SUCCEEDED":{t.isLoading=!1,t.modifiedData=e.data;break}case"GET_DATA_ERROR":{t.isLoading=!0;break}case"ON_SUBMIT_SUCCEEDED":{t.modifiedData=e.data;break}default:return t}}),Kn=null;var Dr=u(25108),Ar=(r,e,t)=>new Promise((h,E)=>{var v=l=>{try{m(t.next(l))}catch(y){E(y)}},O=l=>{try{m(t.throw(l))}catch(y){E(y)}},m=l=>l.done?h(l.value):Promise.resolve(l.value).then(v,O);m((t=t.apply(r,e)).next())});const Yn=(r,e)=>{const{isLoading:t,allowedActions:h}=useRBAC(e),[{isLoading:E,modifiedData:v},O]=useReducer(reducer,initialState),m=useNotification(),l=useRef(!0),y=new AbortController,{signal:M}=y;useEffect(()=>(t||(()=>Ar(void 0,null,function*(){try{O({type:"GET_DATA"});const k=yield request(getRequestURL(r),{method:"GET",signal:M});O({type:"GET_DATA_SUCCEEDED",data:k})}catch(k){l.current&&(O({type:"GET_DATA_ERROR"}),Dr.error(k),m({type:"warning",message:{id:"notification.error"}}))}}))(),()=>{y.abort(),l.current=!1}),[t,r]);const U=useCallback(C=>{O({type:"ON_SUBMIT_SUCCEEDED",data:C})},[]);return{allowedActions:h,dispatchSubmitSucceeded:U,isLoading:E,isLoadingForPermissions:t,modifiedData:v}},Jn=null;var Lr=Object.defineProperty,jr=Object.defineProperties,Mr=Object.getOwnPropertyDescriptors,Xe=Object.getOwnPropertySymbols,_r=Object.prototype.hasOwnProperty,Ir=Object.prototype.propertyIsEnumerable,Ke=(r,e,t)=>e in r?Lr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ur=(r,e)=>{for(var t in e||(e={}))_r.call(e,t)&&Ke(r,t,e[t]);if(Xe)for(var t of Xe(e))Ir.call(e,t)&&Ke(r,t,e[t]);return r},Br=(r,e)=>jr(r,Mr(e));const qn=(r,e)=>Br(Ur({},r),{isLoading:e}),eo=null,to={roles:[],isLoading:!0},ro=(r,e)=>produce(r,t=>{switch(e.type){case"GET_DATA":{t.isLoading=!0,t.roles=[];break}case"GET_DATA_SUCCEEDED":{t.roles=e.data,t.isLoading=!1;break}case"GET_DATA_ERROR":{t.isLoading=!1;break}default:return t}}),no=null;var Nr=(r,e,t)=>new Promise((h,E)=>{var v=l=>{try{m(t.next(l))}catch(y){E(y)}},O=l=>{try{m(t.throw(l))}catch(y){E(y)}},m=l=>l.done?h(l.value):Promise.resolve(l.value).then(v,O);m((t=t.apply(r,e)).next())});const oo=(r=!0)=>{const[{roles:e,isLoading:t},h]=useReducer(reducer,initialState,()=>init(initialState,r)),E=useNotification(),v=useRef(!0),O=new AbortController,{signal:m}=O;useEffect(()=>(r&&l(),()=>{O.abort(),v.current=!1}),[r]);const l=()=>Nr(void 0,null,function*(){try{h({type:"GET_DATA"});const{roles:y}=yield request(`/${pluginId}/roles`,{method:"GET",signal:m});h({type:"GET_DATA_SUCCEEDED",data:y})}catch(y){const M=get(y,["response","payload","message"],"An error occured");v.current&&(h({type:"GET_DATA_ERROR"}),M!=="Forbidden"&&E({type:"warning",message:M}))}});return{roles:e,isLoading:t,getData:l}},so=null;var kr=Object.defineProperty,zr=Object.defineProperties,Gr=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,Fr=Object.prototype.hasOwnProperty,Zr=Object.prototype.propertyIsEnumerable,Je=(r,e,t)=>e in r?kr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,$r=(r,e)=>{for(var t in e||(e={}))Fr.call(e,t)&&Je(r,t,e[t]);if(Ye)for(var t of Ye(e))Zr.call(e,t)&&Je(r,t,e[t]);return r},Hr=(r,e)=>zr(r,Gr(e));const Wr=(r,e)=>Hr($r({},r),{isLoading:e});var pe=u(65772);const qe={permissions:{},routes:{},isLoading:!0},Vr=(r,e)=>(0,de.default)(r,t=>{switch(e.type){case"GET_DATA":{t.isLoading=!0,t.permissions={},t.routes={};break}case"GET_DATA_SUCCEEDED":{t.permissions=e.permissions,t.routes=e.routes,t.isLoading=!1;break}case"GET_DATA_ERROR":{t.isLoading=!1;break}default:return t}});var et=(r,e,t)=>new Promise((h,E)=>{var v=l=>{try{m(t.next(l))}catch(y){E(y)}},O=l=>{try{m(t.throw(l))}catch(y){E(y)}},m=l=>l.done?h(l.value):Promise.resolve(l.value).then(v,O);m((t=t.apply(r,e)).next())});const tt=(r=!0)=>{const e=(0,b.useNotification)(),[{permissions:t,routes:h,isLoading:E},v]=(0,n.useReducer)(Vr,qe,()=>Wr(qe,r)),O=(0,n.useCallback)(()=>et(void 0,null,function*(){try{v({type:"GET_DATA"});const[{permissions:m},{routes:l}]=yield Promise.all([`/${S.Z}/permissions`,`/${S.Z}/routes`].map(y=>et(this,null,function*(){return(yield pe.Z.get(y)).data})));v({type:"GET_DATA_SUCCEEDED",permissions:(0,L.YX)(m),routes:l})}catch(m){const l=(0,X.get)(m,["response","payload","message"],"An error occured");v({type:"GET_DATA_ERROR"}),l!=="Forbidden"&&e({type:"warning",message:l})}}),[e]);return(0,n.useEffect)(()=>{r&&O()},[O,r]),{permissions:t,routes:h,getData:O,isLoading:E}},Qr={role:{},isLoading:!0},Xr=(r,e)=>(0,de.default)(r,t=>{switch(e.type){case"GET_DATA_SUCCEEDED":{t.role=e.role,t.isLoading=!1;break}case"GET_DATA_ERROR":{t.isLoading=!1;break}case"ON_SUBMIT_SUCCEEDED":{t.role.name=e.name,t.role.description=e.description;break}default:return t}});var Kr=u(25108),Yr=Object.defineProperty,Jr=Object.defineProperties,qr=Object.getOwnPropertyDescriptors,rt=Object.getOwnPropertySymbols,en=Object.prototype.hasOwnProperty,tn=Object.prototype.propertyIsEnumerable,nt=(r,e,t)=>e in r?Yr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ot=(r,e)=>{for(var t in e||(e={}))en.call(e,t)&&nt(r,t,e[t]);if(rt)for(var t of rt(e))tn.call(e,t)&&nt(r,t,e[t]);return r},rn=(r,e)=>Jr(r,qr(e)),nn=(r,e,t)=>new Promise((h,E)=>{var v=l=>{try{m(t.next(l))}catch(y){E(y)}},O=l=>{try{m(t.throw(l))}catch(y){E(y)}},m=l=>l.done?h(l.value):Promise.resolve(l.value).then(v,O);m((t=t.apply(r,e)).next())});const on=r=>{const[e,t]=(0,n.useReducer)(Xr,Qr),h=(0,b.useNotification)(),E=(0,n.useRef)(null);(0,n.useEffect)(()=>(E.current=!0,r?v(r):t({type:"GET_DATA_SUCCEEDED",role:{}}),()=>E.current=!1),[r]);const v=m=>nn(void 0,null,function*(){try{const{data:{role:l}}=yield pe.Z.get(`/${S.Z}/roles/${m}`);E.current&&t({type:"GET_DATA_SUCCEEDED",role:l})}catch(l){Kr.error(l),t({type:"GET_DATA_ERROR"}),h({type:"warning",message:{id:"notification.error"}})}}),O=(0,n.useCallback)(m=>{t(ot({type:"ON_SUBMIT_SUCCEEDED"},m))},[]);return rn(ot({},e),{onSubmitSucceeded:O})};var re=u(53209);const sn=re.Ry().shape({name:re.Z_().required(b.translatedErrors.required),description:re.Z_().required(b.translatedErrors.required)});var an=u(25108),ln=Object.defineProperty,cn=Object.defineProperties,un=Object.getOwnPropertyDescriptors,st=Object.getOwnPropertySymbols,dn=Object.prototype.hasOwnProperty,pn=Object.prototype.propertyIsEnumerable,at=(r,e,t)=>e in r?ln(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,it=(r,e)=>{for(var t in e||(e={}))dn.call(e,t)&&at(r,t,e[t]);if(st)for(var t of st(e))pn.call(e,t)&&at(r,t,e[t]);return r},mn=(r,e)=>cn(r,un(e)),fn=(r,e,t)=>new Promise((h,E)=>{var v=l=>{try{m(t.next(l))}catch(y){E(y)}},O=l=>{try{m(t.throw(l))}catch(y){E(y)}},m=l=>l.done?h(l.value):Promise.resolve(l.value).then(v,O);m((t=t.apply(r,e)).next())});const gn=()=>{const{formatMessage:r}=(0,w.useIntl)(),[e,t]=(0,n.useState)(!1),h=(0,b.useNotification)(),{lockApp:E,unlockApp:v}=(0,b.useOverlayBlocker)(),{params:{id:O}}=(0,A.useRouteMatch)(`/settings/${S.Z}/roles/:id`),{isLoading:m,routes:l}=tt(),{role:y,onSubmitSucceeded:M,isLoading:U}=on(O),C=(0,n.useRef)(),k=B=>fn(void 0,null,function*(){E(),t(!0);try{const W=C.current.getPermissions();yield pe.Z.put(`/${S.Z}/roles/${O}`,mn(it(it({},B),W),{users:[]})),M({name:B.name,description:B.description}),h({type:"success",message:{id:(0,te.Z)("Settings.roles.edited"),defaultMessage:"Role edited"}})}catch(W){an.error(W),h({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}t(!1),v()});return U?n.createElement(b.LoadingIndicatorPage,null):n.createElement(c.Main,null,n.createElement(b.SettingsPageTitle,{name:"Roles"}),n.createElement(Te.Formik,{enableReinitialize:!0,initialValues:{name:y.name,description:y.description},onSubmit:k,validationSchema:sn},({handleSubmit:B,values:W,handleChange:V,errors:ne})=>n.createElement(b.Form,{noValidate:!0,onSubmit:B},n.createElement(a.HeaderLayout,{primaryAction:!m&&n.createElement(g.Button,{disabled:y.code==="strapi-super-admin",type:"submit",loading:e,startIcon:n.createElement(xe(),null)},r({id:"app.components.Button.save",defaultMessage:"Save"})),title:y.name,subtitle:y.description,navigationAction:n.createElement(ht.Link,{startIcon:n.createElement(ft(),null),to:"/settings/users-permissions/roles"},r({id:"app.components.go-back",defaultMessage:"Back"}))}),n.createElement(a.ContentLayout,null,n.createElement($.Stack,{size:7},n.createElement(Q.Box,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},n.createElement($.Stack,{size:4},n.createElement(p.Typography,{variant:"delta",as:"h2"},r({id:(0,te.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),n.createElement(H.Grid,{gap:4},n.createElement(H.GridItem,{col:6},n.createElement(Oe.TextInput,{name:"name",value:W.name||"",onChange:V,label:r({id:"Settings.roles.form.input.name",defaultMessage:"Name"}),error:ne.name?r({id:ne.name,defaultMessage:"Invalid value"}):null})),n.createElement(H.GridItem,{col:6},n.createElement(Re.Textarea,{name:"description",value:W.description||"",onChange:V,label:r({id:"Settings.roles.form.input.description",defaultMessage:"Description"}),error:ne.description?r({id:ne.description,defaultMessage:"Invalid value"}):null}))))),!m&&n.createElement(Qe,{ref:C,permissions:y.permissions,routes:l}))))))},hn=()=>n.createElement(b.CheckPagePermissions,{permissions:s.Z.updateRole},n.createElement(gn,null)),vn=re.Ry().shape({name:re.Z_().required(b.translatedErrors.required),description:re.Z_().required(b.translatedErrors.required)});var yn=u(25108),Pn=Object.defineProperty,En=Object.defineProperties,bn=Object.getOwnPropertyDescriptors,lt=Object.getOwnPropertySymbols,On=Object.prototype.hasOwnProperty,Rn=Object.prototype.propertyIsEnumerable,ct=(r,e,t)=>e in r?Pn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ut=(r,e)=>{for(var t in e||(e={}))On.call(e,t)&&ct(r,t,e[t]);if(lt)for(var t of lt(e))Rn.call(e,t)&&ct(r,t,e[t]);return r},xn=(r,e)=>En(r,bn(e)),Tn=(r,e,t)=>new Promise((h,E)=>{var v=l=>{try{m(t.next(l))}catch(y){E(y)}},O=l=>{try{m(t.throw(l))}catch(y){E(y)}},m=l=>l.done?h(l.value):Promise.resolve(l.value).then(v,O);m((t=t.apply(r,e)).next())});const Cn=()=>{const{formatMessage:r}=(0,w.useIntl)(),[e,t]=(0,n.useState)(!1),h=(0,b.useNotification)(),{goBack:E}=(0,A.useHistory)(),{lockApp:v,unlockApp:O}=(0,b.useOverlayBlocker)(),{isLoading:m,permissions:l,routes:y}=tt(),{trackUsage:M}=(0,b.useTracking)(),U=(0,n.useRef)(),C=k=>Tn(void 0,null,function*(){v(),t(!0);try{const B=U.current.getPermissions();yield pe.Z.post(`/${S.Z}/roles`,xn(ut(ut({},k),B),{users:[]})),M("didCreateRole"),h({type:"success",message:{id:(0,te.Z)("Settings.roles.created"),defaultMessage:"Role created"}}),E()}catch(B){yn.error(B),h({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}t(!1),O()});return n.createElement(c.Main,null,n.createElement(b.SettingsPageTitle,{name:"Roles"}),n.createElement(Te.Formik,{enableReinitialize:!0,initialValues:{name:"",description:""},onSubmit:C,validationSchema:vn},({handleSubmit:k,values:B,handleChange:W,errors:V})=>n.createElement(b.Form,{noValidate:!0,onSubmit:k},n.createElement(a.HeaderLayout,{primaryAction:!m&&n.createElement(g.Button,{type:"submit",loading:e,startIcon:n.createElement(xe(),null)},r({id:"app.components.Button.save",defaultMessage:"Save"})),title:r({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:r({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"})}),n.createElement(a.ContentLayout,null,n.createElement($.Stack,{size:7},n.createElement(Q.Box,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},n.createElement($.Stack,{size:4},n.createElement(p.Typography,{variant:"delta",as:"h2"},r({id:(0,te.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),n.createElement(H.Grid,{gap:4},n.createElement(H.GridItem,{col:6},n.createElement(Oe.TextInput,{name:"name",value:B.name||"",onChange:W,label:r({id:"Settings.roles.form.input.name",defaultMessage:"Name"}),error:V.name?r({id:V.name,defaultMessage:"Invalid value"}):null})),n.createElement(H.GridItem,{col:6},n.createElement(Re.Textarea,{name:"description",value:B.description||"",onChange:W,label:r({id:"Settings.roles.form.input.description",defaultMessage:"Description"}),error:V.description?r({id:V.description,defaultMessage:"Invalid value"}):null}))))),!m&&n.createElement(Qe,{ref:U,permissions:l,routes:y}))))))},Sn=()=>n.createElement(b.CheckPagePermissions,{permissions:s.Z.createRole},n.createElement(Cn,null)),wn=()=>n.createElement(b.CheckPagePermissions,{permissions:s.Z.accessRoles},n.createElement(A.Switch,null,n.createElement(A.Route,{path:`/settings/${S.Z}/roles/new`,component:Sn,exact:!0}),n.createElement(A.Route,{path:`/settings/${S.Z}/roles/:id`,component:hn,exact:!0}),n.createElement(A.Route,{path:`/settings/${S.Z}/roles`,component:pt,exact:!0}),n.createElement(A.Route,{path:"",component:b.NotFound})))},65772:(G,Z,u)=>{"use strict";u.d(Z,{Z:()=>a});var n=u(9669),A=u.n(n),b=u(74898),S=u.n(b),s=(c,i,R)=>new Promise((p,x)=>{var T=_=>{try{w(R.next(_))}catch(f){x(f)}},D=_=>{try{w(R.throw(_))}catch(f){x(f)}},w=_=>_.done?p(_.value):Promise.resolve(_.value).then(T,D);w((R=R.apply(c,i)).next())});const g=A().create({baseURL:""});g.interceptors.request.use(c=>s(void 0,null,function*(){return c.headers={Authorization:`Bearer ${b.auth.getToken()}`,Accept:"application/json","Content-Type":"application/json"},c}),c=>{Promise.reject(c)}),g.interceptors.response.use(c=>c,c=>{var i;throw((i=c.response)==null?void 0:i.status)===401&&(b.auth.clearAppStorage(),window.location.reload()),c});const a=g},42722:(G,Z,u)=>{"use strict";u.d(Z,{be:()=>n.Z,YX:()=>S,Gc:()=>a,OB:()=>c.Z});var n=u(65772),A=u(96486);const S=i=>Object.keys(i).reduce((R,p)=>{const x=i[p].controllers,T=Object.keys(x).reduce((D,w)=>((0,A.isEmpty)(x[w])||(D[w]=x[w]),D),{});return(0,A.isEmpty)(T)||(R[p]={controllers:T}),R},{});var s=u(83086);const a=i=>`/${s.Z}/${i}`;var c=u(97961)},35161:(G,Z,u)=>{var n=u(29932),A=u(67206),b=u(69199),S=u(1469);function s(g,a){var c=S(g)?n:b;return c(g,A(a,3))}G.exports=s},13217:(G,Z,u)=>{var n=u(14259);function A(b){var S=b==null?0:b.length;return S?n(b,1,S):[]}G.exports=A}}]);
